{"ast":null,"code":"/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\n/* eslint-disable jsdoc/require-param */\n\n/* eslint-disable no-case-declarations */\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { isNullOrUndefined, extend, createElement, Ajax } from '@syncfusion/ej2-base';\nimport { getShapeColor } from '../model/theme';\nimport { GeoLocation, isCustomPath, convertGeoToPoint, Point, PathOption, Size, removeElement } from '../utils/helper';\nimport { getElementByID, maintainSelection, getValueFromObject } from '../utils/helper';\nimport { RectOption, getTranslate, convertTileLatLongToPoint, checkShapeDataFields, CircleOption } from '../utils/helper';\nimport { getZoomTranslate, fixInitialScaleForTile } from '../utils/helper';\nimport { Tile } from '../model/base';\nimport { BingMap } from './bing-map';\nimport { ColorMapping } from './color-mapping';\nimport { layerRendering, shapeRendering } from '../index';\n/**\n * To calculate and render the shape layer\n */\n\nvar LayerPanel =\n/** @class */\nfunction () {\n  function LayerPanel(map) {\n    this.isMapCoordinates = true;\n    this.horizontalPan = false;\n    this.horizontalPanXCount = 0;\n    this.mapObject = map;\n    this.ajaxModule = new Ajax();\n    this.ajaxResponse = [];\n  }\n\n  LayerPanel.prototype.measureLayerPanel = function () {\n    var _this = this;\n\n    var layerCollection = this.mapObject.layersCollection;\n    var areaRect = this.mapObject.mapAreaRect;\n    var secondaryEle = getElementByID(this.mapObject.element.id + '_Secondary_Element');\n\n    if (this.mapObject.isTileMap && secondaryEle) {\n      this.tileSvgObject = this.mapObject.renderer.createSvg({\n        id: this.mapObject.element.id + '_Tile_SVG',\n        width: areaRect.width,\n        height: areaRect.height\n      });\n      var parentElement = createElement('div', {\n        id: this.mapObject.element.id + '_Tile_SVG_Parent',\n        styles: 'position: absolute; height: ' + areaRect.height + 'px; width: ' + areaRect.width + 'px;'\n      });\n      parentElement.appendChild(this.tileSvgObject);\n      secondaryEle.appendChild(parentElement);\n    }\n\n    this.layerGroup = this.mapObject.renderer.createGroup({\n      id: this.mapObject.element.id + '_Layer_Collections',\n      'clip-path': 'url(#' + this.mapObject.element.id + '_MapArea_ClipRect)'\n    });\n\n    if (this.mapObject.layers[this.mapObject.baseLayerIndex].layerType === 'GoogleStaticMap') {\n      var staticMapSize = 640;\n      this.clipRectElement = this.mapObject.renderer.drawClipPath(new RectOption(this.mapObject.element.id + '_MapArea_ClipRect', 'transparent', {\n        width: 1,\n        color: 'Gray'\n      }, 1, {\n        x: (areaRect.width - staticMapSize) / 2,\n        y: 0,\n        width: staticMapSize,\n        height: areaRect.height\n      }));\n    } else {\n      this.clipRectElement = this.mapObject.renderer.drawClipPath(new RectOption(this.mapObject.element.id + '_MapArea_ClipRect', 'transparent', {\n        width: 1,\n        color: 'Gray'\n      }, 1, {\n        x: this.mapObject.isTileMap ? 0 : areaRect.x,\n        y: this.mapObject.isTileMap ? 0 : areaRect.y,\n        width: areaRect.width,\n        height: areaRect.height < 0 ? 0 : !isNullOrUndefined(this.mapObject.legendModule) && this.mapObject.legendModule.totalPages.length > 0 ? this.mapObject.legendModule.legendTotalRect.height : areaRect.height\n      }));\n    }\n\n    this.layerGroup.appendChild(this.clipRectElement);\n    this.mapObject.baseMapBounds = null;\n    this.mapObject.baseMapRectBounds = null;\n    this.mapObject.baseSize = null;\n    Array.prototype.forEach.call(layerCollection, function (layer, index) {\n      _this.currentLayer = layer;\n\n      _this.processLayers(layer, index);\n    });\n  };\n  /**\n   * Tile rendering\n   *\n   * @param {LayerPanel} panel - Specifies the layer panel.\n   * @param {LayerSettings} layer - Specifies the layer settings.\n   * @param {number} layerIndex - Specifies the layer index.\n   * @param {BingMap} bing - Specifies the bing map.\n   * @returns {void}\n   * @private\n   */\n\n\n  LayerPanel.prototype.renderTileLayer = function (panel, layer, layerIndex, bing) {\n    panel.currentFactor = panel.calculateFactor(layer);\n    panel.mapObject.defaultState = panel.mapObject.zoomSettings.zoomFactor !== 1 && !isNullOrUndefined(panel.mapObject.tileZoomLevel) && panel.mapObject.tileZoomLevel !== 1 ? false : true;\n\n    if (isNullOrUndefined(panel.mapObject.previousCenterLatitude) && isNullOrUndefined(panel.mapObject.previousCenterLongitude)) {\n      panel.mapObject.previousCenterLatitude = panel.mapObject.centerPosition.latitude;\n      panel.mapObject.previousCenterLongitude = panel.mapObject.centerPosition.longitude;\n    } else if (panel.mapObject.previousCenterLatitude !== panel.mapObject.centerPosition.latitude && panel.mapObject.previousCenterLongitude !== panel.mapObject.centerPosition.longitude) {\n      panel.mapObject.centerPositionChanged = true;\n      panel.mapObject.previousCenterLatitude = panel.mapObject.centerPosition.latitude;\n      panel.mapObject.previousCenterLongitude = panel.mapObject.centerPosition.longitude;\n    } else {\n      panel.mapObject.centerPositionChanged = false;\n    }\n\n    var center = new Point(panel.mapObject.centerPosition.longitude, panel.mapObject.centerPosition.latitude);\n    var centerTileMap = center;\n\n    if (this.mapObject.isTileMap && panel.mapObject.markerModule && panel.mapObject.zoomSettings.enable) {\n      panel.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);\n\n      if (!isNullOrUndefined(this.mapObject.markerCenterLatitude) && !isNullOrUndefined(this.mapObject.markerCenterLongitude)) {\n        centerTileMap = new Point(panel.mapObject.markerCenterLongitude, panel.mapObject.markerCenterLatitude);\n      }\n    }\n\n    if (!panel.mapObject.zoomSettings.shouldZoomInitially && panel.mapObject.centerPosition.longitude && panel.mapObject.centerPosition.latitude && !panel.mapObject.zoomPersistence && panel.mapObject.defaultState) {\n      center = new Point(panel.mapObject.centerPosition.longitude, panel.mapObject.centerPosition.latitude);\n    } else if (panel.mapObject.zoomSettings.shouldZoomInitially && panel.mapObject.markerZoomedState && !panel.mapObject.zoomPersistence && !isNullOrUndefined(panel.mapObject.markerZoomCenterPoint)) {\n      center = new Point(panel.mapObject.markerZoomCenterPoint.longitude, panel.mapObject.markerZoomCenterPoint.latitude);\n    } else {\n      center = {\n        x: null,\n        y: null\n      };\n    }\n\n    var zoomFactorValue = panel.mapObject.zoomSettings.shouldZoomInitially ? isNullOrUndefined(panel.mapObject.markerZoomFactor) ? 1 : panel.mapObject.markerZoomFactor : panel.mapObject.zoomSettings.zoomFactor;\n    zoomFactorValue = panel.mapObject.enablePersistence ? isNullOrUndefined(panel.mapObject.mapScaleValue) ? isNullOrUndefined(panel.mapObject.markerZoomFactor) ? panel.mapObject.zoomSettings.zoomFactor : panel.mapObject.markerZoomFactor : panel.mapObject.mapScaleValue : zoomFactorValue;\n    zoomFactorValue = panel.mapObject.zoomSettings.enable ? zoomFactorValue : panel.mapObject.zoomSettings.zoomFactor;\n    zoomFactorValue = zoomFactorValue > 0 ? zoomFactorValue : 1;\n    panel.mapObject.defaultState = zoomFactorValue !== 1 ? false : true;\n\n    if (!panel.mapObject.markerZoomedState && panel.mapObject.zoomSettings.shouldZoomInitially && panel.mapObject.zoomSettings.zoomFactor === 1) {\n      panel.mapObject.defaultState = true;\n    }\n\n    if (isNullOrUndefined(panel.mapObject.tileZoomLevel)) {\n      panel.mapObject.tileZoomLevel = zoomFactorValue;\n      panel.mapObject.previousZoomFactor = zoomFactorValue;\n    } else if (this.mapObject.isReset && panel.mapObject.tileZoomLevel === 1 && !panel.mapObject.zoomSettings.shouldZoomInitially) {\n      var zoomLevel = panel.mapObject.tileZoomLevel;\n      panel.mapObject.tileZoomLevel = zoomLevel;\n    } else if (panel.mapObject.zoomSettings.zoomFactor !== 1 || panel.mapObject.zoomSettings.shouldZoomInitially) {\n      panel.mapObject.previousZoomFactor = panel.mapObject.tileZoomLevel;\n      panel.mapObject.tileZoomLevel = panel.mapObject.defaultState && panel.mapObject.zoomSettings.enable ? panel.mapObject.tileZoomLevel : !panel.mapObject.zoomSettings.shouldZoomInitially && !panel.mapObject.centerPositionChanged ? panel.mapObject.previousZoomFactor !== panel.mapObject.zoomSettings.zoomFactor ? panel.mapObject.zoomSettings.zoomFactor : panel.mapObject.tileZoomLevel : zoomFactorValue;\n      panel.mapObject.tileZoomLevel = zoomFactorValue === 1 && panel.mapObject.zoomSettings.zoomFactor === 0 ? zoomFactorValue : panel.mapObject.tileZoomLevel;\n\n      if (!isNullOrUndefined(panel.mapObject.tileTranslatePoint) && (panel.mapObject.markerZoomFactor !== panel.mapObject.mapScaleValue || isNullOrUndefined(panel.mapObject.markerZoomFactor) && isNullOrUndefined(panel.mapObject.mapScaleValue)) && (panel.mapObject.zoomSettings.zoomFactor <= 1 || panel.mapObject.previousZoomFactor !== panel.mapObject.zoomSettings.zoomFactor)) {\n        panel.mapObject.tileTranslatePoint.x = 0;\n        panel.mapObject.tileTranslatePoint.y = 0;\n      }\n    } else if (panel.mapObject.defaultState) {\n      panel.mapObject.previousZoomFactor = panel.mapObject.tileZoomLevel;\n      panel.mapObject.tileZoomLevel = zoomFactorValue;\n      panel.mapObject.tileTranslatePoint.x = 0;\n      panel.mapObject.tileTranslatePoint.y = 0;\n    }\n\n    if (zoomFactorValue <= 1 && !isNullOrUndefined(panel.mapObject.height) && !panel.mapObject.zoomSettings.shouldZoomInitially && panel.mapObject.tileZoomLevel === panel.mapObject.tileZoomScale && this.mapObject.initialCheck) {\n      fixInitialScaleForTile(this.mapObject);\n    }\n\n    if (!isNullOrUndefined(panel.mapObject.centerLatOfGivenLocation) && !isNullOrUndefined(panel.mapObject.centerLongOfGivenLocation) && panel.mapObject.zoomNotApplied) {\n      centerTileMap.y = panel.mapObject.centerLatOfGivenLocation;\n      centerTileMap.x = panel.mapObject.centerLongOfGivenLocation;\n      panel.mapObject.tileZoomLevel = panel.mapObject.mapScaleValue = panel.mapObject.scaleOfGivenLocation;\n    }\n\n    panel.mapObject.tileTranslatePoint = panel.panTileMap(panel.mapObject.availableSize.width, panel.mapObject.availableSize.height, centerTileMap);\n\n    if (this.mapObject.zoomSettings.resetToInitial && this.mapObject.initialCheck && !isNullOrUndefined(panel.mapObject.height) && this.mapObject.availableSize.height > 512) {\n      this.mapObject.applyZoomReset = true;\n      this.mapObject.initialZoomLevel = Math.floor(this.mapObject.availableSize.height / 512);\n      var padding = this.mapObject.layers[this.mapObject.baseLayerIndex].layerType !== 'GoogleStaticMap' ? 20 : 0;\n      var totalSize = Math.pow(2, this.mapObject.initialZoomLevel) * 256;\n      this.mapObject.initialTileTranslate.x = this.mapObject.availableSize.width / 2 - totalSize / 2;\n      this.mapObject.initialTileTranslate.y = this.mapObject.availableSize.height / 2 - totalSize / 2 + padding;\n    }\n\n    panel.generateTiles(panel.mapObject.tileZoomLevel, panel.mapObject.tileTranslatePoint, null, bing);\n\n    if (!isNullOrUndefined(panel.mapObject.previousZoomFactor) && panel.mapObject.previousZoomFactor !== panel.mapObject.zoomSettings.zoomFactor) {\n      panel.mapObject.previousZoomFactor = panel.mapObject.zoomSettings.zoomFactor;\n    }\n\n    if (panel.mapObject.navigationLineModule) {\n      panel.layerObject.appendChild(panel.mapObject.navigationLineModule.renderNavigation(panel.currentLayer, panel.mapObject.tileZoomLevel, layerIndex));\n    }\n\n    if (panel.mapObject.markerModule) {\n      panel.mapObject.markerModule.markerRender(panel.layerObject, layerIndex, panel.mapObject.tileZoomLevel, null);\n    }\n\n    panel.translateLayerElements(panel.layerObject, layerIndex);\n    panel.layerGroup.appendChild(panel.layerObject);\n  };\n\n  LayerPanel.prototype.processLayers = function (layer, layerIndex) {\n    var _this = this;\n\n    this.layerObject = this.mapObject.renderer.createGroup({\n      id: this.mapObject.element.id + '_LayerIndex_' + layerIndex\n    });\n\n    if (!this.mapObject.enablePersistence) {\n      var itemName = this.mapObject.getModuleName() + this.mapObject.element.id;\n\n      if (navigator.userAgent.indexOf('Edge') === -1) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data = void 0;\n\n        try {\n          data = window.localStorage;\n        } catch (e) {\n          data = null;\n        }\n\n        if (!isNullOrUndefined(data) && window.localStorage.getItem(itemName)) {\n          window.localStorage.removeItem(itemName);\n        }\n      }\n    }\n\n    var eventArgs = {\n      cancel: false,\n      name: layerRendering,\n      index: layerIndex,\n      layer: layer,\n      maps: this.mapObject,\n      visible: layer.visible\n    };\n    this.mapObject.trigger('layerRendering', eventArgs, function (observedArgs) {\n      if (!eventArgs.cancel && eventArgs.visible) {\n        if (layer.layerType !== 'Geometry') {\n          if (layer.layerType !== 'Bing' || _this.bing) {\n            _this.renderTileLayer(_this, layer, layerIndex);\n          } else if (layer.key && layer.key.length > 1) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_1 = _this;\n            var bing_1 = new BingMap(_this.mapObject);\n            var bingType = layer.bingMapType === 'AerialWithLabel' ? 'AerialWithLabelsOnDemand' : layer.bingMapType;\n            var url = 'https://dev.virtualearth.net/REST/V1/Imagery/Metadata/' + bingType;\n            var ajax = new Ajax({\n              url: url + '?output=json&include=ImageryProviders&urischeme=https&key=' + layer.key\n            });\n\n            ajax.onSuccess = function (json) {\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              var jsonObject = JSON.parse(json); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n              var resource = jsonObject['resourceSets'][0]['resources'][0];\n              var imageUrl = resource['imageUrl'];\n              var subDomains = resource['imageUrlSubdomains'];\n              var maxZoom = resource['zoomMax'];\n              var markerGroupElement = document.getElementById(proxy_1.mapObject.element.id + '_Markers_Group');\n\n              if (imageUrl !== null && imageUrl !== undefined && imageUrl !== bing_1.imageUrl) {\n                bing_1.imageUrl = imageUrl;\n              }\n\n              if (subDomains !== null && subDomains !== undefined && subDomains !== bing_1.subDomains) {\n                bing_1.subDomains = subDomains;\n              }\n\n              if (maxZoom !== null && maxZoom !== undefined && maxZoom !== bing_1.maxZoom) {\n                bing_1.maxZoom = maxZoom;\n              }\n\n              proxy_1.mapObject['bingMap'] = bing_1;\n              proxy_1.renderTileLayer(proxy_1, layer, layerIndex, bing_1);\n\n              _this.mapObject.arrangeTemplate();\n\n              if (_this.mapObject.zoomModule && _this.mapObject.previousScale !== _this.mapObject.scale) {\n                _this.mapObject.zoomModule.applyTransform(true);\n              }\n            };\n\n            ajax.send();\n          }\n        } else {\n          if (!isNullOrUndefined(layer.shapeData) && (!isNullOrUndefined(layer.shapeData['geometries']) || !isNullOrUndefined(layer.shapeData['features']))) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var featureData = !isNullOrUndefined(layer.shapeData['geometries']) && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            layer.shapeData['geometries'].length > 0 ? layer.shapeData['geometries'] : layer.shapeData['features'];\n            layer.layerData = []; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n            var bbox = layer.shapeData['bbox'];\n\n            if (!isNullOrUndefined(bbox) && layer.isBaseLayer) {\n              _this.mapObject.baseMapBounds = new GeoLocation({\n                min: bbox[0][1],\n                max: bbox[1][1]\n              }, {\n                min: bbox[0][0],\n                max: bbox[1][0]\n              });\n            } else if (isNullOrUndefined(_this.mapObject.baseMapBounds) && !isCustomPath(featureData)) {\n              _this.calculateRectBounds(featureData);\n            }\n\n            _this.calculatePathCollection(layerIndex, featureData);\n          }\n        }\n      }\n    });\n\n    if (!this.mapObject.isTileMap) {\n      this.mapObject.svgObject.appendChild(this.layerGroup);\n    } else if (this.tileSvgObject) {\n      this.tileSvgObject.appendChild(this.layerGroup);\n      this.mapObject.baseMapBounds = null;\n    }\n  };\n\n  LayerPanel.prototype.bubbleCalculation = function (bubbleSettings, range) {\n    if (bubbleSettings.dataSource != null && bubbleSettings != null) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var bubbleDataSource = bubbleSettings.dataSource;\n\n      for (var i = 0; i < bubbleDataSource.length; i++) {\n        var bubbledata = !isNullOrUndefined(bubbleSettings.valuePath) ? bubbleSettings.valuePath.indexOf('.') > -1 ? Number(getValueFromObject(bubbleSettings.dataSource[i], bubbleSettings.valuePath)) : parseFloat(bubbleSettings.dataSource[i][bubbleSettings.valuePath]) : parseFloat(bubbleSettings.dataSource[i][bubbleSettings.valuePath]);\n\n        if (i !== 0) {\n          if (bubbledata > range.max) {\n            range.max = bubbledata;\n          } else if (bubbledata < range.min) {\n            range.min = bubbledata;\n          }\n        } else {\n          range.max = range.min = bubbledata;\n        }\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  LayerPanel.prototype.calculatePathCollection = function (layerIndex, renderData) {\n    var _this = this;\n\n    this.groupElements = [];\n\n    if (!isCustomPath(renderData)) {\n      this.currentFactor = this.calculateFactor(this.currentLayer);\n    }\n\n    this.rectBounds = null;\n    var shapeSettings = this.currentLayer.shapeSettings;\n    var bubbleSettings = this.currentLayer.bubbleSettings; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    Array.prototype.forEach.call(renderData, function (geometryData, index) {\n      if (!isNullOrUndefined(geometryData['geometry']) || !isNullOrUndefined(geometryData['coordinates'])) {\n        var type = !isNullOrUndefined(geometryData['geometry']) ? geometryData['geometry']['type'] : geometryData['type']; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var coords = !isNullOrUndefined(geometryData['geometry']) ? geometryData['geometry']['coordinates'] : geometryData['coordinates']; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var data = geometryData['geometry']; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var properties = geometryData['properties'];\n\n        _this.generatePoints(type, coords, data, properties);\n      }\n    });\n    this.currentLayer.rectBounds = this.rectBounds;\n\n    if (isNullOrUndefined(this.mapObject.baseMapRectBounds) && this.currentLayer.isBaseLayer) {\n      this.mapObject.baseMapRectBounds = this.rectBounds;\n    }\n\n    var colors = shapeSettings.palette.length > 1 ? shapeSettings.palette : getShapeColor(this.mapObject.theme);\n    var labelTemplateEle = createElement('div', {\n      id: this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_Label_Template_Group',\n      className: this.mapObject.element.id + '_template',\n      styles: 'pointer-events: none; overflow: hidden; position: absolute;' + 'top:' + this.mapObject.mapAreaRect.y + 'px;' + 'left:' + this.mapObject.mapAreaRect.x + 'px;' + 'height:' + this.mapObject.mapAreaRect.height + 'px;' + 'width:' + this.mapObject.mapAreaRect.width + 'px;'\n    });\n\n    if (this.currentLayer.layerData.length !== 0) {\n      var _loop_1 = function (i) {\n        var k = void 0;\n        var borderValue = {\n          color: shapeSettings.border.color,\n          width: shapeSettings.border.width,\n          opacity: shapeSettings.border.opacity\n        }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var currentShapeData = this_1.currentLayer.layerData[i];\n        var pathOptions;\n        var polyLineOptions = void 0;\n        var circleOptions;\n        var groupElement;\n        var drawObject = void 0;\n        var path = '';\n        var points = '';\n        var fill = shapeSettings.autofill ? colors[i % colors.length] : shapeSettings.fill || this_1.mapObject.themeStyle.shapeFill;\n\n        if (shapeSettings.colorValuePath !== null && !isNullOrUndefined(currentShapeData['property'])) {\n          k = checkShapeDataFields( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this_1.currentLayer.dataSource, currentShapeData['property'], this_1.currentLayer.shapeDataPath, this_1.currentLayer.shapePropertyPath, this_1.currentLayer);\n\n          if (k !== null && shapeSettings.colorMapping.length === 0) {\n            fill = this_1.currentLayer.shapeSettings.colorValuePath.indexOf('.') > -1 ? getValueFromObject(this_1.currentLayer.dataSource[k], shapeSettings.colorValuePath) : this_1.currentLayer.dataSource[k][shapeSettings.colorValuePath];\n          } else if (currentShapeData['property'][shapeSettings.colorValuePath] && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this_1.currentLayer.dataSource.length === 0 && shapeSettings.colorMapping.length === 0) {\n            fill = this_1.currentLayer.shapeSettings.colorValuePath.indexOf('.') > -1 ? getValueFromObject(currentShapeData['property'], shapeSettings.colorValuePath) : currentShapeData['property'][shapeSettings.colorValuePath];\n          }\n\n          fill = !isNullOrUndefined(fill) ? fill : shapeSettings.fill || this_1.mapObject.themeStyle.shapeFill;\n        }\n\n        var shapeID = this_1.mapObject.element.id + '_LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_' + k; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var getShapeColor_1 = this_1.getShapeColorMapping(this_1.currentLayer, currentShapeData['property'], fill);\n        fill = Object.prototype.toString.call(getShapeColor_1) === '[object Object]' && !isNullOrUndefined(getShapeColor_1['fill']) ? getShapeColor_1['fill'] : fill;\n\n        if (this_1.currentLayer.shapeSettings.borderColorValuePath || this_1.currentLayer.shapeSettings.borderWidthValuePath) {\n          var borderColorValue = this_1.currentLayer.shapeSettings.borderColorValuePath;\n          var borderWidthValue = this_1.currentLayer.shapeSettings.borderWidthValuePath;\n          k = checkShapeDataFields( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this_1.currentLayer.dataSource, currentShapeData['property'], this_1.currentLayer.shapeDataPath, this_1.currentLayer.shapePropertyPath, this_1.currentLayer);\n\n          if (k !== null) {\n            if (this_1.currentLayer.dataSource[k][shapeSettings.borderColorValuePath]) {\n              borderValue.color = this_1.currentLayer.dataSource[k][shapeSettings.borderColorValuePath];\n            }\n\n            if (this_1.currentLayer.dataSource[k][shapeSettings.borderWidthValuePath]) {\n              borderValue.width = this_1.currentLayer.dataSource[k][shapeSettings.borderWidthValuePath];\n            }\n          }\n        }\n\n        var opacity = Object.prototype.toString.call(getShapeColor_1) === '[object Object]' && !isNullOrUndefined(getShapeColor_1['opacity']) ? getShapeColor_1['opacity'] : shapeSettings.opacity;\n        var eventArgs = {\n          cancel: false,\n          name: shapeRendering,\n          index: i,\n          data: this_1.currentLayer.dataSource ? this_1.currentLayer.dataSource[k] : null,\n          maps: this_1.mapObject,\n          shape: shapeSettings,\n          fill: fill,\n          border: {\n            width: borderValue.width,\n            color: borderValue.color,\n            opacity: borderValue.opacity\n          }\n        }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var shapeRenderingSuccess = function (eventArgs) {\n          var drawingType = !isNullOrUndefined(currentShapeData['_isMultiPolygon']) ? 'MultiPolygon' : isNullOrUndefined(currentShapeData['type']) ? currentShapeData[0]['type'] : currentShapeData['type'];\n          drawingType = drawingType === 'Polygon' || drawingType === 'MultiPolygon' ? 'Polygon' : drawingType;\n\n          if (!eventArgs.cancel) {\n            eventArgs.fill = eventArgs.fill === '#A6A6A6' ? eventArgs.shape.fill || _this.mapObject.themeStyle.shapeFill : eventArgs.fill;\n            eventArgs.border.color = eventArgs.border.color === '#000000' ? eventArgs.shape.border.color : eventArgs.border.color;\n            eventArgs.border.width = eventArgs.border.width === 0 ? eventArgs.shape.border.width : eventArgs.border.width;\n\n            if (isNullOrUndefined(shapeSettings.borderColorValuePath)) {\n              _this.mapObject.layers[layerIndex].shapeSettings.border.color = eventArgs.border.color;\n            }\n\n            if (isNullOrUndefined(shapeSettings.borderWidthValuePath)) {\n              _this.mapObject.layers[layerIndex].shapeSettings.border.width = eventArgs.border.width;\n            }\n          } else {\n            eventArgs.fill = fill;\n            eventArgs.border.color = shapeSettings.border.color;\n            eventArgs.border.width = shapeSettings.border.width;\n            _this.mapObject.layers[layerIndex].shapeSettings.border = shapeSettings.border;\n          }\n\n          eventArgs.border.opacity = isNullOrUndefined(eventArgs.border.opacity) ? opacity : eventArgs.border.opacity;\n\n          if (_this.groupElements.length < 1) {\n            groupElement = _this.mapObject.renderer.createGroup({\n              id: _this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_' + drawingType + '_Group',\n              transform: ''\n            });\n\n            _this.groupElements.push(groupElement);\n          } else {\n            for (var i_1 = 0; i_1 < _this.groupElements.length; i_1++) {\n              var ele = _this.groupElements[i_1];\n\n              if (ele.id.indexOf(drawingType) > -1) {\n                groupElement = ele;\n                break;\n              } else if (i_1 >= _this.groupElements.length - 1) {\n                groupElement = _this.mapObject.renderer.createGroup({\n                  id: _this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_' + drawingType + '_Group'\n                });\n\n                _this.groupElements.push(groupElement);\n\n                break;\n              }\n            }\n          }\n\n          var pathEle;\n\n          switch (drawingType) {\n            case 'Polygon':\n              if (!currentShapeData['_isMultiPolygon']) {\n                path += 'M' + currentShapeData[0]['point']['x'] + ' ' + currentShapeData[0]['point']['y']; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n                currentShapeData.map(function (shapeData) {\n                  path += ' L ' + shapeData['point']['x'] + ' ' + shapeData['point']['y'];\n                });\n              } else {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                path = _this.generateMultiPolygonPath(currentShapeData);\n              }\n\n              path += ' z ';\n\n              if (path.length > 3) {\n                pathOptions = new PathOption(shapeID, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n              }\n\n              break;\n\n            case 'LineString':\n              path += 'M ' + currentShapeData[0]['point']['x'] + ' ' + currentShapeData[0]['point']['y']; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n              currentShapeData.map(function (lineData) {\n                path += 'L' + lineData['point']['x'] + ' , ' + lineData['point']['y'] + ' ';\n              });\n\n              if (path.length > 3) {\n                pathOptions = new PathOption(shapeID, 'transparent', !isNullOrUndefined(eventArgs.border.width) ? eventArgs.border.width : 1, eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n              }\n\n              break;\n\n            case 'Point':\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              var pointData = currentShapeData['point'];\n              var circleRadius = _this.mapObject.layers[layerIndex].type !== 'SubLayer' ? shapeSettings.circleRadius : shapeSettings.circleRadius / _this.currentFactor;\n              circleOptions = new CircleOption(shapeID, eventArgs.fill, eventArgs.border, opacity, pointData['x'], pointData['y'], circleRadius, null);\n              pathEle = _this.mapObject.renderer.drawCircle(circleOptions);\n              break;\n\n            case 'Path':\n              path = currentShapeData['point'];\n              pathOptions = new PathOption(shapeID, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n              pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n              break;\n          }\n\n          if (!isNullOrUndefined(pathEle)) {\n            var property = Object.prototype.toString.call(_this.currentLayer.shapePropertyPath) === '[object Array]' ? _this.currentLayer.shapePropertyPath : [_this.currentLayer.shapePropertyPath];\n            var properties = void 0;\n\n            for (var j = 0; j < property.length; j++) {\n              if (!isNullOrUndefined(currentShapeData['property'])) {\n                properties = property[j];\n                break;\n              }\n            }\n\n            pathEle.setAttribute('aria-label', !isNullOrUndefined(currentShapeData['property']) ? currentShapeData['property'][properties] : '');\n            pathEle.setAttribute('tabindex', (_this.mapObject.tabIndex + i + 3).toString());\n\n            if (drawingType === 'LineString') {\n              pathEle.setAttribute('style', 'outline:none');\n            }\n\n            maintainSelection(_this.mapObject.selectedElementId, _this.mapObject.shapeSelectionClass, pathEle, 'ShapeselectionMapStyle');\n\n            if (_this.mapObject.toggledShapeElementId) {\n              for (var j = 0; j < _this.mapObject.toggledShapeElementId.length; j++) {\n                var styleProperty = _this.mapObject.legendSettings.toggleLegendSettings.applyShapeSettings ? _this.currentLayer.shapeSettings : _this.mapObject.legendSettings.toggleLegendSettings;\n\n                if (_this.mapObject.toggledShapeElementId[j] === pathEle.id) {\n                  pathEle.setAttribute('fill', styleProperty.fill);\n                  pathEle.setAttribute('stroke', styleProperty.border.color);\n                  pathEle.setAttribute('fill-opacity', styleProperty.opacity.toString());\n                  pathEle.setAttribute('stroke-opacity', (isNullOrUndefined(styleProperty.border.opacity) ? styleProperty.opacity : styleProperty.border.opacity).toString());\n                  pathEle.setAttribute('stroke-width', styleProperty.border.width.toString());\n                }\n              }\n            }\n\n            groupElement.appendChild(pathEle);\n          }\n\n          if (i === _this.currentLayer.layerData.length - 1) {\n            _this.layerFeatures(layerIndex, colors, renderData, labelTemplateEle);\n          }\n        };\n\n        shapeRenderingSuccess.bind(this_1);\n        this_1.mapObject.trigger('shapeRendering', eventArgs, shapeRenderingSuccess);\n      };\n\n      var this_1 = this;\n\n      for (var i = 0; i < this.currentLayer.layerData.length; i++) {\n        _loop_1(i);\n      }\n    } else {\n      this.layerFeatures(layerIndex, colors, renderData, labelTemplateEle);\n    }\n  };\n  /**\n   * layer features as bubble, marker, datalabel, navigation line.\n   *\n   * @param {number} layerIndex - Specifies the layer index\n   * @param {string[]} colors - Specifies the colors\n   * @param {Object[]} renderData - Specifies the render data\n   * @param {HTMLElement} labelTemplateEle - Specifies the label template element\n   * @returns {void}\n   */\n\n\n  LayerPanel.prototype.layerFeatures = function ( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  layerIndex, colors, renderData, labelTemplateEle) {\n    var _this = this;\n\n    var bubbleG;\n\n    if (this.currentLayer.bubbleSettings.length && this.mapObject.bubbleModule) {\n      var length_1 = this.currentLayer.bubbleSettings.length;\n      var bubble_1;\n\n      var _loop_2 = function (j) {\n        bubble_1 = this_2.currentLayer.bubbleSettings[j];\n        bubbleG = this_2.mapObject.renderer.createGroup({\n          id: this_2.mapObject.element.id + '_LayerIndex_' + layerIndex + '_bubble_Group_' + j\n        });\n        var range = {\n          min: 0,\n          max: 0\n        };\n        this_2.bubbleCalculation(bubble_1, range); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var bubbleDataSource = bubble_1.dataSource; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        bubbleDataSource.map(function (bubbleData, i) {\n          _this.renderBubble(_this.currentLayer, bubbleData, colors[i % colors.length], range, j, i, bubbleG, layerIndex, bubble_1);\n        });\n        this_2.groupElements.push(bubbleG);\n      };\n\n      var this_2 = this;\n\n      for (var j = 0; j < length_1; j++) {\n        _loop_2(j);\n      }\n    }\n\n    if (this.mapObject.markerModule && !this.mapObject.isTileMap && this.mapObject.zoomSettings.enable) {\n      this.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);\n    }\n\n    var group = this.mapObject.renderer.createGroup({\n      id: this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_dataLableIndex_Group',\n      style: 'pointer-events: none;'\n    });\n\n    if (this.mapObject.dataLabelModule && this.currentLayer.dataLabelSettings.visible) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var intersect_1 = []; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      renderData.map(function (currentShapeData, i) {\n        _this.renderLabel(_this.currentLayer, layerIndex, currentShapeData, group, i, labelTemplateEle, intersect_1);\n      });\n      this.groupElements.push(group);\n    }\n\n    if (this.mapObject.navigationLineModule) {\n      this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer, this.currentFactor, layerIndex));\n    }\n\n    this.groupElements.map(function (element) {\n      _this.layerObject.appendChild(element);\n    });\n\n    if (this.mapObject.markerModule) {\n      this.mapObject.markerModule.markerRender(this.layerObject, layerIndex, this.mapObject.isTileMap ? Math.floor(this.currentFactor) : this.currentFactor, null);\n    }\n\n    this.translateLayerElements(this.layerObject, layerIndex);\n    this.layerGroup.appendChild(this.layerObject);\n  };\n  /**\n   * render datalabel\n   *\n   * @param {LayerSettings} layer - Specifies the layer\n   * @param {number} layerIndex - Specifies the layer index\n   * @param {object[]} shape - Specifies the shape\n   * @param {Element} group - Specifies the group\n   * @param {number} shapeIndex - Specifies the shape index\n   * @param {HTMLElement} labelTemplateEle - Specifies the label template element\n   * @param {object[]} intersect - Specifies the intersect\n   * @returns {void}\n   */\n\n\n  LayerPanel.prototype.renderLabel = function (layer, layerIndex, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  shape, group, shapeIndex, labelTemplateEle, intersect) {\n    this.mapObject.dataLabelModule.renderLabel(layer, layerIndex, shape, layer.layerData, group, labelTemplateEle, shapeIndex, intersect);\n  };\n  /**\n   * To render path for multipolygon\n   *\n   * @param {any[]} currentShapeData Specifies the current shape data\n   * @returns {string} Returns the path\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  LayerPanel.prototype.generateMultiPolygonPath = function (currentShapeData) {\n    var path = ''; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var shape;\n\n    for (var j = 0; j < currentShapeData.length; j++) {\n      path += 'M' + currentShapeData[j][0]['point']['x'] + ' ' + currentShapeData[j][0]['point']['y']; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      shape = currentShapeData[j]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      shape.map(function (shapeData) {\n        path += ' L ' + shapeData['point']['x'] + ' ' + shapeData['point']['y'];\n      });\n    }\n\n    return path;\n  };\n  /**\n   * To render bubble\n   *\n   * @param {LayerSettings} layer - Specifies the layer\n   * @param {object} bubbleData - Specifies the bubble data\n   * @param {string} color - Specifies the color\n   * @param {number} range - Specifies the range\n   * @param {number} bubbleIndex - Specifies the bubble index\n   * @param {number} dataIndex - Specifies the data index\n   * @param {number} group - Specifies the group\n   * @param {number} layerIndex - Specifies the layer index\n   * @param {BubbleSettingsModel} bubbleSettings - Specifies the bubble settings\n   * @returns {void}\n   */\n\n\n  LayerPanel.prototype.renderBubble = function ( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  layer, bubbleData, color, range, bubbleIndex, dataIndex, group, layerIndex, bubbleSettings) {\n    if (isNullOrUndefined(this.mapObject.bubbleModule) || !bubbleSettings.visible) {\n      return null;\n    }\n\n    color = bubbleSettings.fill ? bubbleSettings.fill : color;\n    this.mapObject.bubbleModule.id = this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_BubbleIndex_' + bubbleIndex + '_dataIndex_' + dataIndex;\n    this.mapObject.bubbleModule.renderBubble(bubbleSettings, bubbleData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group, this.mapObject.bubbleModule.id);\n  };\n  /**\n   * To get the shape color from color mapping module\n   *\n   * @param {LayerSettingsModel} layer - Specifies the layer\n   * @param {object} shape - Specifies the shape\n   * @param {string} color - Specifies the color\n   * @returns {Object} - Returns the object\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  LayerPanel.prototype.getShapeColorMapping = function (layer, shape, color) {\n    color = color ? color : layer.shapeSettings.fill;\n\n    if (layer.shapeSettings.colorMapping.length === 0 && isNullOrUndefined(layer.dataSource)) {\n      return color;\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var index = checkShapeDataFields(layer.dataSource, shape, layer.shapeDataPath, layer.shapePropertyPath, layer);\n    var colorMapping = new ColorMapping(this.mapObject);\n\n    if (isNullOrUndefined(layer.dataSource[index])) {\n      return color;\n    }\n\n    return colorMapping.getShapeColorMapping(layer.shapeSettings, layer.dataSource[index], color);\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  LayerPanel.prototype.generatePoints = function (type, coordinates, data, properties) {\n    var _this = this;\n\n    var latitude;\n    var longitude; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var newData = [];\n\n    switch (type.toLowerCase()) {\n      case 'polygon':\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        newData = this.calculatePolygonBox(coordinates[0], data, properties);\n\n        if (newData.length > 0) {\n          newData['property'] = properties;\n          newData['type'] = type;\n          newData['_isMultiPolygon'] = false;\n          this.currentLayer.layerData.push(newData);\n        }\n\n        break;\n\n      case 'multipolygon':\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var multiPolygonDatas = [];\n\n        for (var i = 0; i < coordinates.length; i++) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          newData = this.calculatePolygonBox(coordinates[i][0], data, properties);\n\n          if (newData.length > 0) {\n            multiPolygonDatas.push(newData);\n          }\n        }\n\n        multiPolygonDatas['property'] = properties;\n        multiPolygonDatas['type'] = type;\n        multiPolygonDatas['_isMultiPolygon'] = true;\n        this.currentLayer.layerData.push(multiPolygonDatas);\n        break;\n\n      case 'linestring':\n        var extraSpace_1 = !isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ? this.currentLayer.shapeSettings.border.width : 1; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        coordinates.map(function (points, index) {\n          latitude = points[1];\n          longitude = points[0];\n          var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n\n          _this.calculateBox(point, extraSpace_1);\n\n          newData.push({\n            point: point,\n            lat: latitude,\n            lng: longitude\n          });\n        });\n        newData['property'] = properties;\n        newData['type'] = type;\n        this.currentLayer.layerData.push(newData);\n        break;\n\n      case 'point':\n        {\n          var arrayCollections_1 = false;\n          var extraSpace_2 = (!isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ? this.currentLayer.shapeSettings.border.width : 1) + this.currentLayer.shapeSettings.circleRadius * 2; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n          coordinates.map(function (points, index) {\n            if (Object.prototype.toString.call(points) === '[object Array]') {\n              latitude = points[1];\n              longitude = points[0];\n              arrayCollections_1 = true;\n              var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n\n              _this.currentLayer.layerData.push({\n                point: point,\n                type: type,\n                lat: latitude,\n                lng: longitude,\n                property: properties\n              });\n            }\n          });\n\n          if (!arrayCollections_1) {\n            latitude = coordinates[1];\n            longitude = coordinates[0];\n            var point = convertGeoToPoint(latitude, longitude, this.currentFactor, this.currentLayer, this.mapObject);\n            this.calculateBox(point, extraSpace_2);\n            this.currentLayer.layerData.push({\n              point: point,\n              type: type,\n              lat: latitude,\n              lng: longitude,\n              property: properties\n            });\n          }\n\n          break;\n        }\n\n      case 'path':\n        this.currentLayer.layerData.push({\n          point: data['d'],\n          type: type,\n          property: properties\n        });\n        break;\n    }\n  };\n\n  LayerPanel.prototype.calculateBox = function (point, extraSpace) {\n    if (isNullOrUndefined(this.rectBounds)) {\n      this.rectBounds = {\n        min: {\n          x: point.x,\n          y: point.y - extraSpace\n        },\n        max: {\n          x: point.x,\n          y: point.y + extraSpace\n        }\n      };\n    } else {\n      this.rectBounds['min']['x'] = Math.min(this.rectBounds['min']['x'], point.x);\n      this.rectBounds['min']['y'] = Math.min(this.rectBounds['min']['y'], point.y - extraSpace);\n      this.rectBounds['max']['x'] = Math.max(this.rectBounds['max']['x'], point.x);\n      this.rectBounds['max']['y'] = Math.max(this.rectBounds['max']['y'], point.y + extraSpace);\n    }\n  };\n\n  LayerPanel.prototype.calculateFactor = function (layer) {\n    var horFactor;\n    var verFactor = 1;\n    var divide = 10;\n    var exp = 'e+1';\n    var bounds = this.mapObject.baseMapBounds;\n    var mapSize = new Size(this.mapObject.mapAreaRect.width, this.mapObject.mapAreaRect.height - 5);\n    var mapHeight;\n    var mapWidth;\n\n    if (bounds) {\n      var start = convertGeoToPoint(bounds.latitude.min, bounds.longitude.min, null, layer, this.mapObject);\n      var end = convertGeoToPoint(bounds.latitude.max, bounds.longitude.max, null, layer, this.mapObject);\n      mapHeight = end.y - start.y;\n      mapWidth = end.x - start.x;\n    } else {\n      mapHeight = mapWidth = 500;\n    }\n\n    if (mapHeight < mapSize.height) {\n      horFactor = parseFloat(Math.abs(Number(mapSize.height / Number(mapHeight.toString() + exp)) * 100).toString().split('.')[0]) / divide;\n    } else {\n      horFactor = mapSize.height / mapHeight;\n    }\n\n    if (mapWidth < mapSize.width) {\n      verFactor = parseFloat(Math.abs(Number(mapSize.width / Number(mapWidth.toString() + exp)) * 100).toString().split('.')[0]) / divide;\n    } else {\n      verFactor = mapSize.width / mapWidth;\n    }\n\n    return Math.min(verFactor, horFactor);\n  };\n\n  LayerPanel.prototype.translateLayerElements = function (layerElement, index) {\n    var childNode;\n    this.mapObject.translateType = 'layer';\n\n    if (!isNullOrUndefined(this.mapObject.baseMapRectBounds)) {\n      var duration = this.currentLayer.animationDuration;\n      var animate = duration !== 0 || isNullOrUndefined(this.mapObject.zoomModule);\n      this.mapObject.baseTranslatePoint = this.mapObject.zoomTranslatePoint; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var translate = void 0;\n\n      if (this.mapObject.zoomSettings.zoomFactor > 1 && !isNullOrUndefined(this.mapObject.zoomModule)) {\n        translate = getZoomTranslate(this.mapObject, this.currentLayer, animate);\n      } else {\n        translate = getTranslate(this.mapObject, this.currentLayer, animate);\n      }\n\n      var scale = this.mapObject.previousScale = translate['scale'];\n      var location_1 = this.mapObject.previousPoint = translate['location'];\n      this.mapObject.baseTranslatePoint = this.mapObject.translatePoint = location_1;\n      this.mapObject.baseScale = this.mapObject.scale = scale;\n\n      for (var i = 0; i < layerElement.childElementCount; i++) {\n        childNode = layerElement.childNodes[i];\n\n        if (!(childNode.id.indexOf('_Markers_Group') > -1) && !(childNode.id.indexOf('_bubble_Group') > -1) && !(childNode.id.indexOf('_dataLableIndex_Group') > -1)) {\n          var transform = 'scale( ' + scale + ' ) ' + 'translate( ' + location_1.x + ' ' + location_1.y + ' ) ';\n          childNode.setAttribute('transform', transform);\n\n          if (duration > 0 && !isNullOrUndefined(this.mapObject.zoomModule)) {\n            if (this.mapObject.zoomSettings.zoomFactor > 1) {\n              translate = getZoomTranslate(this.mapObject, this.currentLayer);\n            } else {\n              translate = getTranslate(this.mapObject, this.currentLayer);\n            }\n\n            this.mapObject.scale = translate['scale'];\n            this.mapObject.zoomTranslatePoint = this.mapObject.translatePoint = translate['location'];\n          }\n        }\n      }\n    } else if (this.mapObject.isTileMap && !isNullOrUndefined(this.mapObject.scale)) {\n      for (var j = 0; j < layerElement.childElementCount; j++) {\n        childNode = layerElement.childNodes[j];\n\n        if (!(childNode.id.indexOf('_Markers_Group') > -1) && !(childNode.id.indexOf('_bubble_Group') > -1) && !(childNode.id.indexOf('_dataLableIndex_Group') > -1) && !(childNode.id.indexOf('_line_Group') > -1)) {\n          var transform = 'scale( ' + this.mapObject.scale + ' ) ' + 'translate( ' + this.mapObject.translatePoint.x + ' ' + this.mapObject.translatePoint.y + ' ) ';\n          childNode.setAttribute('transform', transform);\n        }\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  LayerPanel.prototype.calculateRectBounds = function (layerData) {\n    var _this = this; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    Array.prototype.forEach.call(layerData, function (obj, index) {\n      if (!isNullOrUndefined(obj['geometry']) || !isNullOrUndefined(obj['coordinates'])) {\n        var type = !isNullOrUndefined(obj['geometry']) ? obj['geometry']['type'] : obj['type']; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var coordinates = !isNullOrUndefined(obj['geometry']) ? obj['geometry']['coordinates'] : obj['coordinates'];\n\n        switch (type.toLowerCase()) {\n          case 'polygon':\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            _this.calculateRectBox(coordinates[0]);\n\n            break;\n\n          case 'multipolygon':\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            coordinates.map(function (point, index) {\n              _this.calculateRectBox(point[0]);\n            });\n            break;\n\n          case 'linestring':\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            coordinates.map(function (point, index) {\n              _this.calculateRectBox(point, 'LineString', index === 0 ? true : false);\n            });\n            break;\n\n          case 'point':\n            _this.calculateRectBox(coordinates, 'point');\n\n            break;\n        }\n      }\n    });\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  LayerPanel.prototype.calculatePolygonBox = function (coordinates, data, properties) {\n    var _this = this; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var newData = [];\n    var bounds = this.mapObject.baseMapBounds; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    coordinates.map(function (currentPoint, index) {\n      var latitude = currentPoint[1];\n      var longitude = currentPoint[0];\n\n      if (longitude >= bounds.longitude.min && longitude <= bounds.longitude.max && latitude >= bounds.latitude.min && latitude <= bounds.latitude.max) {\n        var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n\n        if (isNullOrUndefined(_this.rectBounds)) {\n          _this.rectBounds = {\n            min: {\n              x: point.x,\n              y: point.y\n            },\n            max: {\n              x: point.x,\n              y: point.y\n            }\n          };\n        } else {\n          _this.rectBounds['min']['x'] = Math.min(_this.rectBounds['min']['x'], point.x);\n          _this.rectBounds['min']['y'] = Math.min(_this.rectBounds['min']['y'], point.y);\n          _this.rectBounds['max']['x'] = Math.max(_this.rectBounds['max']['x'], point.x);\n          _this.rectBounds['max']['y'] = Math.max(_this.rectBounds['max']['y'], point.y);\n        }\n\n        newData.push({\n          point: point,\n          lat: latitude,\n          lng: longitude\n        });\n      }\n    });\n    return newData;\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  LayerPanel.prototype.calculateRectBox = function (coordinates, type, isFirstItem) {\n    var _this = this;\n\n    if (type !== 'LineString' && type !== 'point') {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      Array.prototype.forEach.call(coordinates, function (currentCoords) {\n        if (isNullOrUndefined(_this.mapObject.baseMapBounds)) {\n          _this.mapObject.baseMapBounds = new GeoLocation({\n            min: currentCoords[1],\n            max: currentCoords[1]\n          }, {\n            min: currentCoords[0],\n            max: currentCoords[0]\n          });\n        } else {\n          _this.mapObject.baseMapBounds.latitude.min = Math.min(_this.mapObject.baseMapBounds.latitude.min, currentCoords[1]);\n          _this.mapObject.baseMapBounds.latitude.max = Math.max(_this.mapObject.baseMapBounds.latitude.max, currentCoords[1]);\n          _this.mapObject.baseMapBounds.longitude.min = Math.min(_this.mapObject.baseMapBounds.longitude.min, currentCoords[0]);\n          _this.mapObject.baseMapBounds.longitude.max = Math.max(_this.mapObject.baseMapBounds.longitude.max, currentCoords[0]);\n        }\n      });\n    } else {\n      if ((isFirstItem || type === 'point') && isNullOrUndefined(this.mapObject.baseMapBounds)) {\n        this.mapObject.baseMapBounds = new GeoLocation({\n          min: coordinates[1],\n          max: coordinates[1]\n        }, {\n          min: coordinates[0],\n          max: coordinates[0]\n        });\n      } else {\n        this.mapObject.baseMapBounds.latitude.min = Math.min(this.mapObject.baseMapBounds.latitude.min, coordinates[1]);\n        this.mapObject.baseMapBounds.latitude.max = Math.max(this.mapObject.baseMapBounds.latitude.max, coordinates[1]);\n        this.mapObject.baseMapBounds.longitude.min = Math.min(this.mapObject.baseMapBounds.longitude.min, coordinates[0]);\n        this.mapObject.baseMapBounds.longitude.max = Math.max(this.mapObject.baseMapBounds.longitude.max, coordinates[0]);\n      }\n    }\n  };\n\n  LayerPanel.prototype.generateTiles = function (zoomLevel, tileTranslatePoint, zoomType, bing, position) {\n    var userLang = this.mapObject.locale;\n    var size = this.mapObject.availableSize;\n    this.tiles = [];\n    var xcount;\n    var ycount;\n    xcount = ycount = Math.pow(2, zoomLevel);\n    var xLeft = 0;\n    var xRight = 0;\n\n    if (tileTranslatePoint.x + xcount * 256 < size.width) {\n      xLeft = tileTranslatePoint.x > 0 ? Math.ceil(tileTranslatePoint.x / 256) : 0;\n      xRight = tileTranslatePoint.x + xcount * 256 < size.width ? Math.ceil((size.width - (tileTranslatePoint.x + xcount * 256)) / 256) : 0;\n    }\n\n    xcount += xLeft + xRight;\n\n    if (zoomType === 'Pan') {\n      xcount = this.horizontalPanXCount >= xcount ? this.horizontalPanXCount : xcount;\n      this.horizontalPan = false;\n    } else {\n      this.horizontalPanXCount = xcount;\n      this.horizontalPan = true;\n    }\n\n    var baseLayer = this.mapObject.layers[this.mapObject.baseLayerIndex];\n    this.urlTemplate = baseLayer.urlTemplate;\n    var endY = Math.min(ycount, (-tileTranslatePoint.y + size.height) / 256 + 1);\n    var endX = Math.min(xcount, (-tileTranslatePoint.x + size.width + xRight * 256) / 256 + 1);\n    var startX = -(tileTranslatePoint.x + xLeft * 256 + 256) / 256;\n    var startY = -(tileTranslatePoint.y + 256) / 256;\n    bing = bing || this.bing || this.mapObject['bingMap'];\n\n    for (var i = Math.round(startX); i < Math.round(endX); i++) {\n      for (var j = Math.round(startY); j < Math.round(endY); j++) {\n        var x = 256 * i + tileTranslatePoint.x;\n        var y = 256 * j + tileTranslatePoint.y;\n\n        if (x > -256 && x <= size.width && y > -256 && y < size.height) {\n          if (j >= 0) {\n            var tileI = i;\n\n            if (i < 0) {\n              tileI = tileI % ycount + ycount;\n            }\n\n            var tile = new Tile(tileI % ycount, j);\n            tile.left = x;\n            tile.top = y;\n\n            if (baseLayer.layerType === 'Bing') {\n              var key = baseLayer.key;\n              tile.src = bing.getBingMap(tile, key, baseLayer.bingMapType, userLang, bing.imageUrl, bing.subDomains);\n            } else {\n              tile.src = this.urlTemplate.replace('level', zoomLevel.toString()).replace('tileX', tile.x.toString()).replace('tileY', tile.y.toString());\n            }\n\n            this.tiles.push(tile);\n          }\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(zoomType)) {\n      if (zoomType.indexOf('wheel') > 1) {\n        this.animateToZoomX = this.mapObject.availableSize.width / 2 - position.x - 10;\n        this.animateToZoomY = -position.y;\n      } else {\n        this.animateToZoomX = -10;\n        this.animateToZoomY = -(this.mapObject.availableSize.height / 2 + 11.5) + 10;\n      }\n    }\n\n    var proxTiles = extend([], this.tiles, [], true);\n\n    for (var _i = 0, _a = this.mapObject.layers; _i < _a.length; _i++) {\n      var layer = _a[_i];\n\n      if (!(layer.type === 'SubLayer' && layer.visible)) {\n        continue;\n      }\n\n      if (layer.layerType === 'OSM' || layer.layerType === 'Bing') {\n        for (var _b = 0, proxTiles_1 = proxTiles; _b < proxTiles_1.length; _b++) {\n          var baseTile = proxTiles_1[_b];\n          var subtile = extend({}, baseTile, {}, true);\n\n          if (layer.layerType === 'Bing') {\n            subtile.src = bing.getBingMap(subtile, layer.key, layer.bingMapType, userLang, bing.imageUrl, bing.subDomains);\n          } else {\n            subtile.src = layer.urlTemplate.replace('level', zoomLevel.toString()).replace('tileX', baseTile.x.toString()).replace('tileY', baseTile.y.toString());\n          }\n\n          this.tiles.push(subtile);\n        }\n      }\n    }\n\n    if (this.mapObject.previousScale !== this.mapObject.scale || this.mapObject.isReset) {\n      this.arrangeTiles(zoomType, this.animateToZoomX, this.animateToZoomY);\n    }\n  };\n\n  LayerPanel.prototype.arrangeTiles = function (type, x, y) {\n    var _this = this;\n\n    var element = document.getElementById(this.mapObject.element.id + '_tile_parent');\n    var element1 = document.getElementById(this.mapObject.element.id + '_tiles');\n    var timeOut;\n\n    if (!isNullOrUndefined(type) && type !== 'Pan') {\n      this.tileAnimation(type, x, y);\n      timeOut = this.mapObject.layersCollection[0].animationDuration;\n    } else {\n      timeOut = 0;\n    }\n\n    if (this.mapObject.layers[this.mapObject.baseLayerIndex].layerType === 'GoogleStaticMap') {\n      this.renderGoogleMap(this.mapObject.layers[0].key, this.mapObject.staticMapZoom);\n    } else {\n      setTimeout(function () {\n        if (element) {\n          element.style.zIndex = '1';\n        }\n\n        if (element1) {\n          element1.style.zIndex = '0';\n        }\n\n        var animateElement;\n\n        if (!document.getElementById(_this.mapObject.element.id + '_animated_tiles') && element) {\n          animateElement = createElement('div', {\n            id: _this.mapObject.element.id + '_animated_tiles'\n          });\n          element.appendChild(animateElement);\n        } else {\n          if (type !== 'Pan' && element1 && element) {\n            element1.appendChild(element.children[0]);\n\n            if (!isNullOrUndefined(document.getElementById(_this.mapObject.element.id + '_animated_tiles'))) {\n              document.getElementById(_this.mapObject.element.id + '_animated_tiles').id = _this.mapObject.element.id + '_animated_tiles_old';\n            }\n\n            animateElement = createElement('div', {\n              id: _this.mapObject.element.id + '_animated_tiles'\n            });\n            element.appendChild(animateElement);\n          } else {\n            animateElement = element ? element.children[0] : null;\n          }\n        }\n\n        var id = 0;\n\n        var _loop_3 = function (tile) {\n          var imgElement = createElement('img');\n          imgElement.setAttribute('src', tile.src);\n          var mapId = _this.mapObject.element.id;\n\n          imgElement.onload = function () {\n            if (document.getElementById(mapId + '_tile_' + id) && type === 'Pan') {\n              removeElement(mapId + '_tile_' + id);\n            }\n\n            var child = createElement('div', {\n              id: mapId + '_tile_' + id\n            });\n            child.style.position = 'absolute';\n            child.style.left = tile.left + 'px';\n            child.style.top = tile.top + 'px';\n            child.style.height = tile.height + 'px';\n            child.style.width = tile.width + 'px';\n            child.appendChild(imgElement);\n\n            if (animateElement) {\n              animateElement.appendChild(child);\n            }\n\n            id++;\n\n            if (id === _this.tiles.length && document.getElementById(_this.mapObject.element.id + '_animated_tiles_old')) {\n              removeElement(_this.mapObject.element.id + '_animated_tiles_old');\n            }\n          };\n        };\n\n        for (var _i = 0, _a = _this.tiles; _i < _a.length; _i++) {\n          var tile = _a[_i];\n\n          _loop_3(tile);\n        }\n      }, timeOut);\n    }\n  };\n  /**\n   * Animation for tile layers and hide the group element until the tile layer rendering\n   *\n   * @param {string} zoomType - Specifies the zoom type\n   * @param {number} translateX - Specifies the x translate point\n   * @param {number} translateY - Specifies the y translate point\n   * @returns {void}\n   */\n\n\n  LayerPanel.prototype.tileAnimation = function (zoomType, translateX, translateY) {\n    var tileParent = document.getElementById(this.mapObject.element.id + '_tile_parent');\n    var animatedTiles = document.getElementById(this.mapObject.element.id + '_animated_tiles');\n    var tileElement = document.getElementById(this.mapObject.element.id + '_tiles');\n    var scaleValue = '2';\n\n    if (zoomType.indexOf('ZoomOut') === 0 || zoomType === 'Reset') {\n      tileElement.style.zIndex = '1';\n      tileParent.style.zIndex = '0';\n\n      while (tileElement.childElementCount >= 1) {\n        tileElement.removeChild(tileElement.children[0]);\n      }\n\n      translateX = 0;\n      translateY = document.getElementById(this.mapObject.element.id + '_tile_parent').getClientRects()[0].height / 4;\n      scaleValue = zoomType.indexOf('ZoomOut') === 0 ? '0.5' : '0.2';\n    }\n\n    if (!isNullOrUndefined(animatedTiles)) {\n      animatedTiles.style.transition = this.mapObject.layersCollection[0].animationDuration + 'ms';\n      animatedTiles.style.transform = 'translate(' + translateX + 'px, ' + translateY + 'px) scale(' + scaleValue + ')';\n    }\n  };\n  /**\n   * Static map rendering\n   *\n   * @param {string} apikey - Specifies the api key\n   * @param {number} zoom - Specifies the zoom value\n   * @returns {void}\n   * @private\n   */\n\n\n  LayerPanel.prototype.renderGoogleMap = function (apikey, zoom) {\n    var map = this.mapObject; // zoom = this.mapObject.zoomSettings.shouldZoomInitially ? this.mapObject.markerZoomFactor : zoom;\n\n    zoom = this.mapObject.tileZoomLevel;\n    var totalSize = Math.pow(2, zoom) * 256;\n    var x = map.mapAreaRect.width / 2 - totalSize / 2;\n    var y = map.mapAreaRect.height / 2 - totalSize / 2;\n    var centerPoint = new Point(null, null);\n    var diffX = 0;\n    var diffY = 0;\n    var position = convertTileLatLongToPoint(centerPoint, zoom, {\n      x: x,\n      y: y\n    }, this.isMapCoordinates);\n\n    if (map.zoomModule && map.zoomSettings.enable) {\n      diffX = map.zoomModule.mouseDownLatLong['x'] - map.zoomModule.mouseMoveLatLong['x'];\n      diffY = map.zoomModule.mouseDownLatLong['y'] - map.zoomModule.mouseMoveLatLong['y'];\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var panLatLng = map.pointToLatLong(position.x - diffX, position.y - diffY);\n    map.centerPosition.latitude = panLatLng['latitude'];\n    map.centerPosition.longitude = panLatLng['longitude'];\n    var mapWidth;\n    var mapHeight;\n\n    if (isNullOrUndefined(parseInt(map.width, 10))) {\n      mapWidth = parseInt(map.width, 10) - 22;\n    } else {\n      mapWidth = Math.round(map.mapAreaRect.width);\n    }\n\n    if (isNullOrUndefined(parseInt(map.height, 10))) {\n      mapHeight = parseInt(map.height, 10) - 22;\n    } else {\n      mapHeight = Math.round(map.mapAreaRect.height);\n    }\n\n    var eleWidth = mapWidth > 640 ? (mapWidth - 640) / 2 : 0;\n    var eleHeight = mapHeight > 640 ? (mapHeight - 640) / 2 : 0;\n    var center;\n    var mapType = map.layers[map.layers.length - 1].staticMapType.toString().toLowerCase();\n\n    if (map.centerPosition.latitude && map.centerPosition.longitude) {\n      center = map.centerPosition.latitude.toString() + ',' + map.centerPosition.longitude.toString();\n    } else {\n      center = '0,0';\n    }\n\n    var staticMapString = 'https://maps.googleapis.com/maps/api/staticmap?size=' + mapWidth + 'x' + mapHeight + '&zoom=' + zoom + '&center=' + center + '&maptype=' + mapType + '&key=' + apikey;\n    document.getElementById(this.mapObject.element.id + '_tile_parent').innerHTML = '<div id=\"' + this.mapObject.element.id + '_StaticGoogleMap\"' + 'style=\"position:absolute; left:' + eleWidth + 'px; top:' + eleHeight + 'px\"><img src=\"' + staticMapString + '\"></div>';\n  };\n  /**\n   * To find the tile translate point\n   *\n   * @param {number} factorX - Specifies the x factor\n   * @param {number} factorY - Specifies the x factor\n   * @param {MapLocation} centerPosition - Specifies the map location\n   * @returns {Point} - Returns point values\n   */\n\n\n  LayerPanel.prototype.panTileMap = function (factorX, factorY, centerPosition) {\n    if (this.mapObject.tileZoomLevel <= this.mapObject.tileZoomScale && this.mapObject.initialCheck) {\n      this.mapObject.tileZoomLevel = this.mapObject.tileZoomScale;\n    }\n\n    var level = this.mapObject.tileZoomLevel;\n    var padding = this.mapObject.layers[this.mapObject.layers.length - 1].layerType !== 'GoogleStaticMap' ? 20 : 0;\n    var x;\n    var y;\n    var totalSize = Math.pow(2, level) * 256;\n    x = factorX / 2 - totalSize / 2;\n    y = factorY / 2 - totalSize / 2;\n    var position = convertTileLatLongToPoint(centerPosition, level, {\n      x: x,\n      y: y\n    }, this.isMapCoordinates);\n    padding = this.mapObject.zoomNotApplied ? 0 : padding;\n    x -= position.x - factorX / 2;\n    y = y - (position.y - factorY / 2) + padding;\n    this.mapObject.scale = Math.pow(2, level - 1);\n\n    if (isNullOrUndefined(this.mapObject.tileTranslatePoint) || this.mapObject.tileTranslatePoint.y === 0 && this.mapObject.tileTranslatePoint.x === 0 || isNullOrUndefined(this.mapObject.previousTileWidth) || isNullOrUndefined(this.mapObject.previousTileHeight)) {\n      this.mapObject.previousTileWidth = factorX;\n      this.mapObject.previousTileHeight = factorY;\n    }\n\n    if (!isNullOrUndefined(this.mapObject.tileTranslatePoint) && isNullOrUndefined(centerPosition.x) && (this.mapObject.zoomSettings.zoomFactor === 1 || this.mapObject.zoomSettings.zoomFactor !== level || !this.mapObject.defaultState)) {\n      if (factorX !== this.mapObject.previousTileWidth || factorY !== this.mapObject.previousTileHeight) {\n        var xdiff = x - (this.mapObject.previousTileWidth / 2 - totalSize / 2);\n        var ydiff = y - (this.mapObject.previousTileHeight / 2 - totalSize / 2 + padding);\n        this.mapObject.tileTranslatePoint.x = this.mapObject.tileTranslatePoint.x + xdiff;\n        this.mapObject.tileTranslatePoint.y = this.mapObject.tileTranslatePoint.y + ydiff;\n      }\n    }\n\n    if (!isNullOrUndefined(this.mapObject.tileTranslatePoint) && !this.mapObject.zoomNotApplied) {\n      if (this.mapObject.tileTranslatePoint.x !== 0 && this.mapObject.tileTranslatePoint.x !== x && !this.mapObject.centerPositionChanged) {\n        x = this.mapObject.tileTranslatePoint.x;\n      }\n\n      if (this.mapObject.tileTranslatePoint.y !== 0 && this.mapObject.tileTranslatePoint.y !== y && !this.mapObject.centerPositionChanged) {\n        y = this.mapObject.tileTranslatePoint.y;\n      }\n    }\n\n    this.mapObject.translatePoint = new Point((x - 0.01 * this.mapObject.zoomSettings.zoomFactor) / this.mapObject.scale, (y - 0.01 * this.mapObject.zoomSettings.zoomFactor) / this.mapObject.scale);\n    this.mapObject.previousTileWidth = factorX;\n    this.mapObject.previousTileHeight = factorY;\n    return new Point(x, y);\n  };\n\n  return LayerPanel;\n}();\n\nexport { LayerPanel };","map":{"version":3,"sources":["C:/Users/vinay/Desktop/world-map-dashboard/world-map/node_modules/@syncfusion/ej2-maps/src/maps/layers/layer-panel.js"],"names":["isNullOrUndefined","extend","createElement","Ajax","getShapeColor","GeoLocation","isCustomPath","convertGeoToPoint","Point","PathOption","Size","removeElement","getElementByID","maintainSelection","getValueFromObject","RectOption","getTranslate","convertTileLatLongToPoint","checkShapeDataFields","CircleOption","getZoomTranslate","fixInitialScaleForTile","Tile","BingMap","ColorMapping","layerRendering","shapeRendering","LayerPanel","map","isMapCoordinates","horizontalPan","horizontalPanXCount","mapObject","ajaxModule","ajaxResponse","prototype","measureLayerPanel","_this","layerCollection","layersCollection","areaRect","mapAreaRect","secondaryEle","element","id","isTileMap","tileSvgObject","renderer","createSvg","width","height","parentElement","styles","appendChild","layerGroup","createGroup","layers","baseLayerIndex","layerType","staticMapSize","clipRectElement","drawClipPath","color","x","y","legendModule","totalPages","length","legendTotalRect","baseMapBounds","baseMapRectBounds","baseSize","Array","forEach","call","layer","index","currentLayer","processLayers","renderTileLayer","panel","layerIndex","bing","currentFactor","calculateFactor","defaultState","zoomSettings","zoomFactor","tileZoomLevel","previousCenterLatitude","previousCenterLongitude","centerPosition","latitude","longitude","centerPositionChanged","center","centerTileMap","markerModule","enable","calculateZoomCenterPositionAndFactor","markerCenterLatitude","markerCenterLongitude","shouldZoomInitially","zoomPersistence","markerZoomedState","markerZoomCenterPoint","zoomFactorValue","markerZoomFactor","enablePersistence","mapScaleValue","previousZoomFactor","isReset","zoomLevel","tileTranslatePoint","tileZoomScale","initialCheck","centerLatOfGivenLocation","centerLongOfGivenLocation","zoomNotApplied","scaleOfGivenLocation","panTileMap","availableSize","resetToInitial","applyZoomReset","initialZoomLevel","Math","floor","padding","totalSize","pow","initialTileTranslate","generateTiles","navigationLineModule","layerObject","renderNavigation","markerRender","translateLayerElements","itemName","getModuleName","navigator","userAgent","indexOf","data","window","localStorage","e","getItem","removeItem","eventArgs","cancel","name","maps","visible","trigger","observedArgs","key","proxy_1","bing_1","bingType","bingMapType","url","ajax","onSuccess","json","jsonObject","JSON","parse","resource","imageUrl","subDomains","maxZoom","markerGroupElement","document","getElementById","undefined","arrangeTemplate","zoomModule","previousScale","scale","applyTransform","send","shapeData","featureData","layerData","bbox","isBaseLayer","min","max","calculateRectBounds","calculatePathCollection","svgObject","bubbleCalculation","bubbleSettings","range","dataSource","bubbleDataSource","i","bubbledata","valuePath","Number","parseFloat","renderData","groupElements","rectBounds","shapeSettings","geometryData","type","coords","properties","generatePoints","colors","palette","theme","labelTemplateEle","className","_loop_1","k","borderValue","border","opacity","currentShapeData","this_1","pathOptions","polyLineOptions","circleOptions","groupElement","drawObject","path","points","fill","autofill","themeStyle","shapeFill","colorValuePath","shapeDataPath","shapePropertyPath","colorMapping","shapeID","getShapeColor_1","getShapeColorMapping","Object","toString","borderColorValuePath","borderWidthValuePath","borderColorValue","borderWidthValue","shape","shapeRenderingSuccess","drawingType","transform","push","i_1","ele","pathEle","generateMultiPolygonPath","dashArray","drawPath","lineData","pointData","circleRadius","drawCircle","property","j","setAttribute","tabIndex","selectedElementId","shapeSelectionClass","toggledShapeElementId","styleProperty","legendSettings","toggleLegendSettings","applyShapeSettings","layerFeatures","bind","bubbleG","bubbleModule","length_1","bubble_1","_loop_2","this_2","bubbleData","renderBubble","group","style","dataLabelModule","dataLabelSettings","intersect_1","renderLabel","shapeIndex","intersect","bubbleIndex","dataIndex","coordinates","newData","toLowerCase","calculatePolygonBox","multiPolygonDatas","extraSpace_1","point","calculateBox","lat","lng","arrayCollections_1","extraSpace_2","extraSpace","horFactor","verFactor","divide","exp","bounds","mapSize","mapHeight","mapWidth","start","end","abs","split","layerElement","childNode","translateType","duration","animationDuration","animate","baseTranslatePoint","zoomTranslatePoint","translate","location_1","previousPoint","translatePoint","baseScale","childElementCount","childNodes","obj","calculateRectBox","currentPoint","isFirstItem","currentCoords","zoomType","position","userLang","locale","size","tiles","xcount","ycount","xLeft","xRight","ceil","baseLayer","urlTemplate","endY","endX","startX","startY","round","tileI","tile","left","top","src","getBingMap","replace","animateToZoomX","animateToZoomY","proxTiles","_i","_a","_b","proxTiles_1","baseTile","subtile","arrangeTiles","element1","timeOut","tileAnimation","renderGoogleMap","staticMapZoom","setTimeout","zIndex","animateElement","children","_loop_3","imgElement","mapId","onload","child","translateX","translateY","tileParent","animatedTiles","tileElement","scaleValue","removeChild","getClientRects","transition","apikey","zoom","centerPoint","diffX","diffY","mouseDownLatLong","mouseMoveLatLong","panLatLng","pointToLatLong","parseInt","eleWidth","eleHeight","mapType","staticMapType","staticMapString","innerHTML","factorX","factorY","level","previousTileWidth","previousTileHeight","xdiff","ydiff"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable no-case-declarations */\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { isNullOrUndefined, extend, createElement, Ajax } from '@syncfusion/ej2-base';\nimport { getShapeColor } from '../model/theme';\nimport { GeoLocation, isCustomPath, convertGeoToPoint, Point, PathOption, Size, removeElement } from '../utils/helper';\nimport { getElementByID, maintainSelection, getValueFromObject } from '../utils/helper';\nimport { RectOption, getTranslate, convertTileLatLongToPoint, checkShapeDataFields, CircleOption } from '../utils/helper';\nimport { getZoomTranslate, fixInitialScaleForTile } from '../utils/helper';\nimport { Tile } from '../model/base';\nimport { BingMap } from './bing-map';\nimport { ColorMapping } from './color-mapping';\nimport { layerRendering, shapeRendering } from '../index';\n/**\n * To calculate and render the shape layer\n */\nvar LayerPanel = /** @class */ (function () {\n    function LayerPanel(map) {\n        this.isMapCoordinates = true;\n        this.horizontalPan = false;\n        this.horizontalPanXCount = 0;\n        this.mapObject = map;\n        this.ajaxModule = new Ajax();\n        this.ajaxResponse = [];\n    }\n    LayerPanel.prototype.measureLayerPanel = function () {\n        var _this = this;\n        var layerCollection = this.mapObject.layersCollection;\n        var areaRect = this.mapObject.mapAreaRect;\n        var secondaryEle = getElementByID(this.mapObject.element.id + '_Secondary_Element');\n        if (this.mapObject.isTileMap && secondaryEle) {\n            this.tileSvgObject = this.mapObject.renderer.createSvg({\n                id: this.mapObject.element.id + '_Tile_SVG', width: areaRect.width,\n                height: areaRect.height\n            });\n            var parentElement = createElement('div', {\n                id: this.mapObject.element.id + '_Tile_SVG_Parent', styles: 'position: absolute; height: ' +\n                    (areaRect.height) + 'px; width: '\n                    + (areaRect.width) + 'px;'\n            });\n            parentElement.appendChild(this.tileSvgObject);\n            secondaryEle.appendChild(parentElement);\n        }\n        this.layerGroup = (this.mapObject.renderer.createGroup({\n            id: this.mapObject.element.id + '_Layer_Collections',\n            'clip-path': 'url(#' + this.mapObject.element.id + '_MapArea_ClipRect)'\n        }));\n        if (this.mapObject.layers[this.mapObject.baseLayerIndex].layerType === 'GoogleStaticMap') {\n            var staticMapSize = 640;\n            this.clipRectElement = this.mapObject.renderer.drawClipPath(new RectOption(this.mapObject.element.id + '_MapArea_ClipRect', 'transparent', { width: 1, color: 'Gray' }, 1, {\n                x: ((areaRect.width - staticMapSize) / 2), y: 0,\n                width: staticMapSize, height: areaRect.height\n            }));\n        }\n        else {\n            this.clipRectElement = this.mapObject.renderer.drawClipPath(new RectOption(this.mapObject.element.id + '_MapArea_ClipRect', 'transparent', { width: 1, color: 'Gray' }, 1, {\n                x: this.mapObject.isTileMap ? 0 : areaRect.x, y: this.mapObject.isTileMap ? 0 : areaRect.y,\n                width: areaRect.width, height: (areaRect.height < 0) ? 0 : !isNullOrUndefined(this.mapObject.legendModule) &&\n                    this.mapObject.legendModule.totalPages.length > 0 ? this.mapObject.legendModule.legendTotalRect.height : areaRect.height\n            }));\n        }\n        this.layerGroup.appendChild(this.clipRectElement);\n        this.mapObject.baseMapBounds = null;\n        this.mapObject.baseMapRectBounds = null;\n        this.mapObject.baseSize = null;\n        Array.prototype.forEach.call(layerCollection, function (layer, index) {\n            _this.currentLayer = layer;\n            _this.processLayers(layer, index);\n        });\n    };\n    /**\n     * Tile rendering\n     *\n     * @param {LayerPanel} panel - Specifies the layer panel.\n     * @param {LayerSettings} layer - Specifies the layer settings.\n     * @param {number} layerIndex - Specifies the layer index.\n     * @param {BingMap} bing - Specifies the bing map.\n     * @returns {void}\n     * @private\n     */\n    LayerPanel.prototype.renderTileLayer = function (panel, layer, layerIndex, bing) {\n        panel.currentFactor = panel.calculateFactor(layer);\n        panel.mapObject.defaultState = ((panel.mapObject.zoomSettings.zoomFactor !== 1) &&\n            (!isNullOrUndefined(panel.mapObject.tileZoomLevel) && panel.mapObject.tileZoomLevel !== 1)) ?\n            false : true;\n        if (isNullOrUndefined(panel.mapObject.previousCenterLatitude) &&\n            isNullOrUndefined(panel.mapObject.previousCenterLongitude)) {\n            panel.mapObject.previousCenterLatitude = panel.mapObject.centerPosition.latitude;\n            panel.mapObject.previousCenterLongitude = panel.mapObject.centerPosition.longitude;\n        }\n        else if (panel.mapObject.previousCenterLatitude !==\n            panel.mapObject.centerPosition.latitude && panel.mapObject.previousCenterLongitude !==\n            panel.mapObject.centerPosition.longitude) {\n            panel.mapObject.centerPositionChanged = true;\n            panel.mapObject.previousCenterLatitude = panel.mapObject.centerPosition.latitude;\n            panel.mapObject.previousCenterLongitude = panel.mapObject.centerPosition.longitude;\n        }\n        else {\n            panel.mapObject.centerPositionChanged = false;\n        }\n        var center = new Point(panel.mapObject.centerPosition.longitude, panel.mapObject.centerPosition.latitude);\n        var centerTileMap = center;\n        if ((this.mapObject.isTileMap && panel.mapObject.markerModule) && panel.mapObject.zoomSettings.enable) {\n            panel.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);\n            if (!isNullOrUndefined(this.mapObject.markerCenterLatitude) && !isNullOrUndefined(this.mapObject.markerCenterLongitude)) {\n                centerTileMap = new Point(panel.mapObject.markerCenterLongitude, panel.mapObject.markerCenterLatitude);\n            }\n        }\n        if (!panel.mapObject.zoomSettings.shouldZoomInitially && panel.mapObject.centerPosition.longitude\n            && panel.mapObject.centerPosition.latitude && !panel.mapObject.zoomPersistence && panel.mapObject.defaultState) {\n            center = new Point(panel.mapObject.centerPosition.longitude, panel.mapObject.centerPosition.latitude);\n        }\n        else if (panel.mapObject.zoomSettings.shouldZoomInitially\n            && panel.mapObject.markerZoomedState && !panel.mapObject.zoomPersistence\n            && !isNullOrUndefined(panel.mapObject.markerZoomCenterPoint)) {\n            center = new Point(panel.mapObject.markerZoomCenterPoint.longitude, panel.mapObject.markerZoomCenterPoint.latitude);\n        }\n        else {\n            center = { x: null, y: null };\n        }\n        var zoomFactorValue = panel.mapObject.zoomSettings.shouldZoomInitially ?\n            isNullOrUndefined(panel.mapObject.markerZoomFactor) ? 1 :\n                panel.mapObject.markerZoomFactor : panel.mapObject.zoomSettings.zoomFactor;\n        zoomFactorValue = (panel.mapObject.enablePersistence) ? ((isNullOrUndefined(panel.mapObject.mapScaleValue))\n            ? (isNullOrUndefined(panel.mapObject.markerZoomFactor) ? panel.mapObject.zoomSettings.zoomFactor :\n                panel.mapObject.markerZoomFactor) : panel.mapObject.mapScaleValue) : zoomFactorValue;\n        zoomFactorValue = panel.mapObject.zoomSettings.enable ? zoomFactorValue : panel.mapObject.zoomSettings.zoomFactor;\n        zoomFactorValue = zoomFactorValue > 0 ? zoomFactorValue : 1;\n        panel.mapObject.defaultState = zoomFactorValue !== 1 ? false : true;\n        if (!panel.mapObject.markerZoomedState && panel.mapObject.zoomSettings.shouldZoomInitially &&\n            panel.mapObject.zoomSettings.zoomFactor === 1) {\n            panel.mapObject.defaultState = true;\n        }\n        if (isNullOrUndefined(panel.mapObject.tileZoomLevel)) {\n            panel.mapObject.tileZoomLevel = zoomFactorValue;\n            panel.mapObject.previousZoomFactor = zoomFactorValue;\n        }\n        else if (this.mapObject.isReset && panel.mapObject.tileZoomLevel === 1 && !panel.mapObject.zoomSettings.shouldZoomInitially) {\n            var zoomLevel = panel.mapObject.tileZoomLevel;\n            panel.mapObject.tileZoomLevel = zoomLevel;\n        }\n        else if (panel.mapObject.zoomSettings.zoomFactor !== 1 || panel.mapObject.zoomSettings.shouldZoomInitially) {\n            panel.mapObject.previousZoomFactor = panel.mapObject.tileZoomLevel;\n            panel.mapObject.tileZoomLevel = panel.mapObject.defaultState && panel.mapObject.zoomSettings.enable ?\n                panel.mapObject.tileZoomLevel : !panel.mapObject.zoomSettings.shouldZoomInitially\n                && !panel.mapObject.centerPositionChanged ?\n                panel.mapObject.previousZoomFactor !== panel.mapObject.zoomSettings.zoomFactor ?\n                    panel.mapObject.zoomSettings.zoomFactor : panel.mapObject.tileZoomLevel : zoomFactorValue;\n            panel.mapObject.tileZoomLevel = zoomFactorValue === 1 && panel.mapObject.zoomSettings.zoomFactor === 0 ?\n                zoomFactorValue : panel.mapObject.tileZoomLevel;\n            if (!isNullOrUndefined(panel.mapObject.tileTranslatePoint) &&\n                (panel.mapObject.markerZoomFactor !== panel.mapObject.mapScaleValue\n                    || (isNullOrUndefined(panel.mapObject.markerZoomFactor)\n                        && isNullOrUndefined(panel.mapObject.mapScaleValue)))\n                && (panel.mapObject.zoomSettings.zoomFactor <= 1 || panel.mapObject.previousZoomFactor !==\n                    panel.mapObject.zoomSettings.zoomFactor)) {\n                panel.mapObject.tileTranslatePoint.x = 0;\n                panel.mapObject.tileTranslatePoint.y = 0;\n            }\n        }\n        else if (panel.mapObject.defaultState) {\n            panel.mapObject.previousZoomFactor = panel.mapObject.tileZoomLevel;\n            panel.mapObject.tileZoomLevel = zoomFactorValue;\n            panel.mapObject.tileTranslatePoint.x = 0;\n            panel.mapObject.tileTranslatePoint.y = 0;\n        }\n        if (zoomFactorValue <= 1 && !isNullOrUndefined(panel.mapObject.height) && !panel.mapObject.zoomSettings.shouldZoomInitially\n            && (panel.mapObject.tileZoomLevel === panel.mapObject.tileZoomScale) && this.mapObject.initialCheck) {\n            fixInitialScaleForTile(this.mapObject);\n        }\n        if (!isNullOrUndefined(panel.mapObject.centerLatOfGivenLocation) && !isNullOrUndefined(panel.mapObject.centerLongOfGivenLocation) &&\n            panel.mapObject.zoomNotApplied) {\n            centerTileMap.y = panel.mapObject.centerLatOfGivenLocation;\n            centerTileMap.x = panel.mapObject.centerLongOfGivenLocation;\n            panel.mapObject.tileZoomLevel = panel.mapObject.mapScaleValue = panel.mapObject.scaleOfGivenLocation;\n        }\n        panel.mapObject.tileTranslatePoint = panel.panTileMap(panel.mapObject.availableSize.width, panel.mapObject.availableSize.height, centerTileMap);\n        if (this.mapObject.zoomSettings.resetToInitial && this.mapObject.initialCheck && !isNullOrUndefined(panel.mapObject.height)\n            && this.mapObject.availableSize.height > 512) {\n            this.mapObject.applyZoomReset = true;\n            this.mapObject.initialZoomLevel = Math.floor(this.mapObject.availableSize.height / 512);\n            var padding = this.mapObject.layers[this.mapObject.baseLayerIndex].layerType !== 'GoogleStaticMap' ?\n                20 : 0;\n            var totalSize = Math.pow(2, this.mapObject.initialZoomLevel) * 256;\n            this.mapObject.initialTileTranslate.x = (this.mapObject.availableSize.width / 2) - (totalSize / 2);\n            this.mapObject.initialTileTranslate.y = (this.mapObject.availableSize.height / 2) - (totalSize / 2) + padding;\n        }\n        panel.generateTiles(panel.mapObject.tileZoomLevel, panel.mapObject.tileTranslatePoint, null, bing);\n        if (!isNullOrUndefined(panel.mapObject.previousZoomFactor)\n            && panel.mapObject.previousZoomFactor !== panel.mapObject.zoomSettings.zoomFactor) {\n            panel.mapObject.previousZoomFactor = panel.mapObject.zoomSettings.zoomFactor;\n        }\n        if (panel.mapObject.navigationLineModule) {\n            panel.layerObject.appendChild(panel.mapObject.navigationLineModule.renderNavigation(panel.currentLayer, panel.mapObject.tileZoomLevel, layerIndex));\n        }\n        if (panel.mapObject.markerModule) {\n            panel.mapObject.markerModule.markerRender(panel.layerObject, layerIndex, panel.mapObject.tileZoomLevel, null);\n        }\n        panel.translateLayerElements(panel.layerObject, layerIndex);\n        panel.layerGroup.appendChild(panel.layerObject);\n    };\n    LayerPanel.prototype.processLayers = function (layer, layerIndex) {\n        var _this = this;\n        this.layerObject = (this.mapObject.renderer.createGroup({\n            id: this.mapObject.element.id + '_LayerIndex_' + layerIndex\n        }));\n        if (!this.mapObject.enablePersistence) {\n            var itemName = this.mapObject.getModuleName() + this.mapObject.element.id;\n            if (navigator.userAgent.indexOf('Edge') === -1) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var data = void 0;\n                try {\n                    data = window.localStorage;\n                }\n                catch (e) {\n                    data = null;\n                }\n                if (!isNullOrUndefined(data) && window.localStorage.getItem(itemName)) {\n                    window.localStorage.removeItem(itemName);\n                }\n            }\n        }\n        var eventArgs = {\n            cancel: false, name: layerRendering, index: layerIndex,\n            layer: layer, maps: this.mapObject, visible: layer.visible\n        };\n        this.mapObject.trigger('layerRendering', eventArgs, function (observedArgs) {\n            if (!eventArgs.cancel && eventArgs.visible) {\n                if (layer.layerType !== 'Geometry') {\n                    if (layer.layerType !== 'Bing' || _this.bing) {\n                        _this.renderTileLayer(_this, layer, layerIndex);\n                    }\n                    else if (layer.key && layer.key.length > 1) {\n                        // eslint-disable-next-line @typescript-eslint/no-this-alias\n                        var proxy_1 = _this;\n                        var bing_1 = new BingMap(_this.mapObject);\n                        var bingType = layer.bingMapType === 'AerialWithLabel' ? 'AerialWithLabelsOnDemand' : layer.bingMapType;\n                        var url = 'https://dev.virtualearth.net/REST/V1/Imagery/Metadata/' + bingType;\n                        var ajax = new Ajax({\n                            url: url + '?output=json&include=ImageryProviders&urischeme=https&key=' + layer.key\n                        });\n                        ajax.onSuccess = function (json) {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            var jsonObject = JSON.parse(json);\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            var resource = jsonObject['resourceSets'][0]['resources'][0];\n                            var imageUrl = resource['imageUrl'];\n                            var subDomains = resource['imageUrlSubdomains'];\n                            var maxZoom = resource['zoomMax'];\n                            var markerGroupElement = document.getElementById(proxy_1.mapObject.element.id + '_Markers_Group');\n                            if (imageUrl !== null && imageUrl !== undefined && imageUrl !== bing_1.imageUrl) {\n                                bing_1.imageUrl = imageUrl;\n                            }\n                            if (subDomains !== null && subDomains !== undefined && subDomains !== bing_1.subDomains) {\n                                bing_1.subDomains = subDomains;\n                            }\n                            if (maxZoom !== null && maxZoom !== undefined && maxZoom !== bing_1.maxZoom) {\n                                bing_1.maxZoom = maxZoom;\n                            }\n                            proxy_1.mapObject['bingMap'] = bing_1;\n                            proxy_1.renderTileLayer(proxy_1, layer, layerIndex, bing_1);\n                            _this.mapObject.arrangeTemplate();\n                            if (_this.mapObject.zoomModule && (_this.mapObject.previousScale !== _this.mapObject.scale)) {\n                                _this.mapObject.zoomModule.applyTransform(true);\n                            }\n                        };\n                        ajax.send();\n                    }\n                }\n                else {\n                    if (!isNullOrUndefined(layer.shapeData) && (!isNullOrUndefined(layer.shapeData['geometries']) ||\n                        !isNullOrUndefined(layer.shapeData['features']))) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var featureData = (!isNullOrUndefined(layer.shapeData['geometries']) &&\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            layer.shapeData['geometries'].length > 0 ? layer.shapeData['geometries'] :\n                            layer.shapeData['features']);\n                        layer.layerData = [];\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var bbox = layer.shapeData['bbox'];\n                        if (!isNullOrUndefined(bbox) && layer.isBaseLayer) {\n                            _this.mapObject.baseMapBounds = new GeoLocation({ min: bbox[0][1], max: bbox[1][1] }, { min: bbox[0][0], max: bbox[1][0] });\n                        }\n                        else if (isNullOrUndefined(_this.mapObject.baseMapBounds) && !isCustomPath(featureData)) {\n                            _this.calculateRectBounds(featureData);\n                        }\n                        _this.calculatePathCollection(layerIndex, featureData);\n                    }\n                }\n            }\n        });\n        if (!this.mapObject.isTileMap) {\n            this.mapObject.svgObject.appendChild(this.layerGroup);\n        }\n        else if (this.tileSvgObject) {\n            this.tileSvgObject.appendChild(this.layerGroup);\n            this.mapObject.baseMapBounds = null;\n        }\n    };\n    LayerPanel.prototype.bubbleCalculation = function (bubbleSettings, range) {\n        if (bubbleSettings.dataSource != null && bubbleSettings != null) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var bubbleDataSource = bubbleSettings.dataSource;\n            for (var i = 0; i < bubbleDataSource.length; i++) {\n                var bubbledata = (!isNullOrUndefined(bubbleSettings.valuePath)) ? ((bubbleSettings.valuePath.indexOf('.') > -1) ?\n                    Number(getValueFromObject(bubbleSettings.dataSource[i], bubbleSettings.valuePath)) :\n                    parseFloat(bubbleSettings.dataSource[i][bubbleSettings.valuePath])) :\n                    parseFloat(bubbleSettings.dataSource[i][bubbleSettings.valuePath]);\n                if (i !== 0) {\n                    if (bubbledata > range.max) {\n                        range.max = bubbledata;\n                    }\n                    else if (bubbledata < range.min) {\n                        range.min = bubbledata;\n                    }\n                }\n                else {\n                    range.max = range.min = bubbledata;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.calculatePathCollection = function (layerIndex, renderData) {\n        var _this = this;\n        this.groupElements = [];\n        if ((!isCustomPath(renderData))) {\n            this.currentFactor = this.calculateFactor(this.currentLayer);\n        }\n        this.rectBounds = null;\n        var shapeSettings = this.currentLayer.shapeSettings;\n        var bubbleSettings = this.currentLayer.bubbleSettings;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Array.prototype.forEach.call(renderData, function (geometryData, index) {\n            if (!isNullOrUndefined(geometryData['geometry']) || !isNullOrUndefined(geometryData['coordinates'])) {\n                var type = !isNullOrUndefined(geometryData['geometry']) ? geometryData['geometry']['type'] : geometryData['type'];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var coords = !isNullOrUndefined(geometryData['geometry']) ? geometryData['geometry']['coordinates'] :\n                    geometryData['coordinates'];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var data = geometryData['geometry'];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var properties = geometryData['properties'];\n                _this.generatePoints(type, coords, data, properties);\n            }\n        });\n        this.currentLayer.rectBounds = this.rectBounds;\n        if (isNullOrUndefined(this.mapObject.baseMapRectBounds) && this.currentLayer.isBaseLayer) {\n            this.mapObject.baseMapRectBounds = this.rectBounds;\n        }\n        var colors = shapeSettings.palette.length > 1 ? shapeSettings.palette : getShapeColor(this.mapObject.theme);\n        var labelTemplateEle = createElement('div', {\n            id: this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_Label_Template_Group',\n            className: this.mapObject.element.id + '_template',\n            styles: 'pointer-events: none; overflow: hidden; position: absolute;' +\n                'top:' + this.mapObject.mapAreaRect.y + 'px;' +\n                'left:' + this.mapObject.mapAreaRect.x + 'px;' +\n                'height:' + this.mapObject.mapAreaRect.height + 'px;' +\n                'width:' + this.mapObject.mapAreaRect.width + 'px;'\n        });\n        if (this.currentLayer.layerData.length !== 0) {\n            var _loop_1 = function (i) {\n                var k = void 0;\n                var borderValue = {\n                    color: shapeSettings.border.color,\n                    width: shapeSettings.border.width,\n                    opacity: shapeSettings.border.opacity\n                };\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var currentShapeData = this_1.currentLayer.layerData[i];\n                var pathOptions;\n                var polyLineOptions = void 0;\n                var circleOptions;\n                var groupElement;\n                var drawObject = void 0;\n                var path = '';\n                var points = '';\n                var fill = (shapeSettings.autofill) ? colors[i % colors.length] :\n                    (shapeSettings.fill || this_1.mapObject.themeStyle.shapeFill);\n                if (shapeSettings.colorValuePath !== null && !isNullOrUndefined(currentShapeData['property'])) {\n                    k = checkShapeDataFields(\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    this_1.currentLayer.dataSource, currentShapeData['property'], this_1.currentLayer.shapeDataPath, this_1.currentLayer.shapePropertyPath, this_1.currentLayer);\n                    if (k !== null && shapeSettings.colorMapping.length === 0) {\n                        fill = ((this_1.currentLayer.shapeSettings.colorValuePath.indexOf('.') > -1) ?\n                            (getValueFromObject(this_1.currentLayer.dataSource[k], shapeSettings.colorValuePath)) :\n                            this_1.currentLayer.dataSource[k][shapeSettings.colorValuePath]);\n                    }\n                    else if (currentShapeData['property'][shapeSettings.colorValuePath] &&\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        this_1.currentLayer.dataSource.length === 0 && shapeSettings.colorMapping.length === 0) {\n                        fill = ((this_1.currentLayer.shapeSettings.colorValuePath.indexOf('.') > -1) ?\n                            (getValueFromObject(currentShapeData['property'], shapeSettings.colorValuePath)) :\n                            currentShapeData['property'][shapeSettings.colorValuePath]);\n                    }\n                    fill = !isNullOrUndefined(fill) ? fill : (shapeSettings.fill || this_1.mapObject.themeStyle.shapeFill);\n                }\n                var shapeID = this_1.mapObject.element.id + '_LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_' + k;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var getShapeColor_1 = this_1.getShapeColorMapping(this_1.currentLayer, currentShapeData['property'], fill);\n                fill = Object.prototype.toString.call(getShapeColor_1) === '[object Object]' && !isNullOrUndefined(getShapeColor_1['fill'])\n                    ? getShapeColor_1['fill'] : fill;\n                if (this_1.currentLayer.shapeSettings.borderColorValuePath || this_1.currentLayer.shapeSettings.borderWidthValuePath) {\n                    var borderColorValue = this_1.currentLayer.shapeSettings.borderColorValuePath;\n                    var borderWidthValue = this_1.currentLayer.shapeSettings.borderWidthValuePath;\n                    k = checkShapeDataFields(\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    this_1.currentLayer.dataSource, currentShapeData['property'], this_1.currentLayer.shapeDataPath, this_1.currentLayer.shapePropertyPath, this_1.currentLayer);\n                    if (k !== null) {\n                        if (this_1.currentLayer.dataSource[k][shapeSettings.borderColorValuePath]) {\n                            borderValue.color = this_1.currentLayer.dataSource[k][shapeSettings.borderColorValuePath];\n                        }\n                        if (this_1.currentLayer.dataSource[k][shapeSettings.borderWidthValuePath]) {\n                            borderValue.width = this_1.currentLayer.dataSource[k][shapeSettings.borderWidthValuePath];\n                        }\n                    }\n                }\n                var opacity = (Object.prototype.toString.call(getShapeColor_1) === '[object Object]'\n                    && !isNullOrUndefined(getShapeColor_1['opacity'])) ? getShapeColor_1['opacity'] : shapeSettings.opacity;\n                var eventArgs = {\n                    cancel: false, name: shapeRendering, index: i,\n                    data: this_1.currentLayer.dataSource ? this_1.currentLayer.dataSource[k] : null,\n                    maps: this_1.mapObject,\n                    shape: shapeSettings, fill: fill,\n                    border: { width: borderValue.width, color: borderValue.color, opacity: borderValue.opacity }\n                };\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var shapeRenderingSuccess = function (eventArgs) {\n                    var drawingType = !isNullOrUndefined(currentShapeData['_isMultiPolygon'])\n                        ? 'MultiPolygon' : isNullOrUndefined(currentShapeData['type']) ? currentShapeData[0]['type'] : currentShapeData['type'];\n                    drawingType = (drawingType === 'Polygon' || drawingType === 'MultiPolygon') ? 'Polygon' : drawingType;\n                    if (!eventArgs.cancel) {\n                        eventArgs.fill = eventArgs.fill === '#A6A6A6' ? eventArgs.shape.fill ||\n                            _this.mapObject.themeStyle.shapeFill : eventArgs.fill;\n                        eventArgs.border.color = eventArgs.border.color === '#000000' ?\n                            eventArgs.shape.border.color : eventArgs.border.color;\n                        eventArgs.border.width = eventArgs.border.width === 0 ? eventArgs.shape.border.width : eventArgs.border.width;\n                        if (isNullOrUndefined(shapeSettings.borderColorValuePath)) {\n                            _this.mapObject.layers[layerIndex].shapeSettings.border.color = eventArgs.border.color;\n                        }\n                        if (isNullOrUndefined(shapeSettings.borderWidthValuePath)) {\n                            _this.mapObject.layers[layerIndex].shapeSettings.border.width = eventArgs.border.width;\n                        }\n                    }\n                    else {\n                        eventArgs.fill = fill;\n                        eventArgs.border.color = shapeSettings.border.color;\n                        eventArgs.border.width = shapeSettings.border.width;\n                        _this.mapObject.layers[layerIndex].shapeSettings.border = shapeSettings.border;\n                    }\n                    eventArgs.border.opacity = isNullOrUndefined(eventArgs.border.opacity) ? opacity : eventArgs.border.opacity;\n                    if (_this.groupElements.length < 1) {\n                        groupElement = _this.mapObject.renderer.createGroup({\n                            id: _this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_' + drawingType + '_Group', transform: ''\n                        });\n                        _this.groupElements.push(groupElement);\n                    }\n                    else {\n                        for (var i_1 = 0; i_1 < _this.groupElements.length; i_1++) {\n                            var ele = _this.groupElements[i_1];\n                            if (ele.id.indexOf(drawingType) > -1) {\n                                groupElement = ele;\n                                break;\n                            }\n                            else if (i_1 >= _this.groupElements.length - 1) {\n                                groupElement = _this.mapObject.renderer.createGroup({\n                                    id: _this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_' + drawingType + '_Group'\n                                });\n                                _this.groupElements.push(groupElement);\n                                break;\n                            }\n                        }\n                    }\n                    var pathEle;\n                    switch (drawingType) {\n                        case 'Polygon':\n                            if (!currentShapeData['_isMultiPolygon']) {\n                                path += 'M' + (currentShapeData[0]['point']['x']) + ' ' + (currentShapeData[0]['point']['y']);\n                                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                currentShapeData.map(function (shapeData) {\n                                    path += ' L ' + (shapeData['point']['x']) + ' ' + (shapeData['point']['y']);\n                                });\n                            }\n                            else {\n                                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                path = _this.generateMultiPolygonPath(currentShapeData);\n                            }\n                            path += ' z ';\n                            if (path.length > 3) {\n                                pathOptions = new PathOption(shapeID, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                                pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n                            }\n                            break;\n                        case 'LineString':\n                            path += 'M ' + (currentShapeData[0]['point']['x']) + ' ' + (currentShapeData[0]['point']['y']);\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            currentShapeData.map(function (lineData) {\n                                path += 'L' + (lineData['point']['x']) + ' , ' + (lineData['point']['y']) + ' ';\n                            });\n                            if (path.length > 3) {\n                                pathOptions = new PathOption(shapeID, 'transparent', !isNullOrUndefined(eventArgs.border.width) ? eventArgs.border.width : 1, eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                                pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n                            }\n                            break;\n                        case 'Point':\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            var pointData = currentShapeData['point'];\n                            var circleRadius = (_this.mapObject.layers[layerIndex].type !== 'SubLayer') ? shapeSettings.circleRadius : shapeSettings.circleRadius / _this.currentFactor;\n                            circleOptions = new CircleOption(shapeID, eventArgs.fill, eventArgs.border, opacity, pointData['x'], pointData['y'], circleRadius, null);\n                            pathEle = _this.mapObject.renderer.drawCircle(circleOptions);\n                            break;\n                        case 'Path':\n                            path = currentShapeData['point'];\n                            pathOptions = new PathOption(shapeID, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                            pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n                            break;\n                    }\n                    if (!isNullOrUndefined(pathEle)) {\n                        var property = (Object.prototype.toString.call(_this.currentLayer.shapePropertyPath) === '[object Array]' ?\n                            _this.currentLayer.shapePropertyPath : [_this.currentLayer.shapePropertyPath]);\n                        var properties = void 0;\n                        for (var j = 0; j < property.length; j++) {\n                            if (!isNullOrUndefined(currentShapeData['property'])) {\n                                properties = property[j];\n                                break;\n                            }\n                        }\n                        pathEle.setAttribute('aria-label', ((!isNullOrUndefined(currentShapeData['property'])) ?\n                            (currentShapeData['property'][properties]) : ''));\n                        pathEle.setAttribute('tabindex', (_this.mapObject.tabIndex + i + 3).toString());\n                        if (drawingType === 'LineString') {\n                            pathEle.setAttribute('style', 'outline:none');\n                        }\n                        maintainSelection(_this.mapObject.selectedElementId, _this.mapObject.shapeSelectionClass, pathEle, 'ShapeselectionMapStyle');\n                        if (_this.mapObject.toggledShapeElementId) {\n                            for (var j = 0; j < _this.mapObject.toggledShapeElementId.length; j++) {\n                                var styleProperty = _this.mapObject.legendSettings.toggleLegendSettings.applyShapeSettings ?\n                                    _this.currentLayer.shapeSettings : _this.mapObject.legendSettings.toggleLegendSettings;\n                                if (_this.mapObject.toggledShapeElementId[j] === pathEle.id) {\n                                    pathEle.setAttribute('fill', styleProperty.fill);\n                                    pathEle.setAttribute('stroke', styleProperty.border.color);\n                                    pathEle.setAttribute('fill-opacity', (styleProperty.opacity).toString());\n                                    pathEle.setAttribute('stroke-opacity', (isNullOrUndefined(styleProperty.border.opacity) ? styleProperty.opacity : styleProperty.border.opacity).toString());\n                                    pathEle.setAttribute('stroke-width', (styleProperty.border.width).toString());\n                                }\n                            }\n                        }\n                        groupElement.appendChild(pathEle);\n                    }\n                    if (i === _this.currentLayer.layerData.length - 1) {\n                        _this.layerFeatures(layerIndex, colors, renderData, labelTemplateEle);\n                    }\n                };\n                shapeRenderingSuccess.bind(this_1);\n                this_1.mapObject.trigger('shapeRendering', eventArgs, shapeRenderingSuccess);\n            };\n            var this_1 = this;\n            for (var i = 0; i < this.currentLayer.layerData.length; i++) {\n                _loop_1(i);\n            }\n        }\n        else {\n            this.layerFeatures(layerIndex, colors, renderData, labelTemplateEle);\n        }\n    };\n    /**\n     * layer features as bubble, marker, datalabel, navigation line.\n     *\n     * @param {number} layerIndex - Specifies the layer index\n     * @param {string[]} colors - Specifies the colors\n     * @param {Object[]} renderData - Specifies the render data\n     * @param {HTMLElement} labelTemplateEle - Specifies the label template element\n     * @returns {void}\n     */\n    LayerPanel.prototype.layerFeatures = function (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    layerIndex, colors, renderData, labelTemplateEle) {\n        var _this = this;\n        var bubbleG;\n        if (this.currentLayer.bubbleSettings.length && this.mapObject.bubbleModule) {\n            var length_1 = this.currentLayer.bubbleSettings.length;\n            var bubble_1;\n            var _loop_2 = function (j) {\n                bubble_1 = this_2.currentLayer.bubbleSettings[j];\n                bubbleG = this_2.mapObject.renderer.createGroup({\n                    id: this_2.mapObject.element.id + '_LayerIndex_' + layerIndex + '_bubble_Group_' + j\n                });\n                var range = { min: 0, max: 0 };\n                this_2.bubbleCalculation(bubble_1, range);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var bubbleDataSource = bubble_1.dataSource;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                bubbleDataSource.map(function (bubbleData, i) {\n                    _this.renderBubble(_this.currentLayer, bubbleData, colors[i % colors.length], range, j, i, bubbleG, layerIndex, bubble_1);\n                });\n                this_2.groupElements.push(bubbleG);\n            };\n            var this_2 = this;\n            for (var j = 0; j < length_1; j++) {\n                _loop_2(j);\n            }\n        }\n        if ((this.mapObject.markerModule && !this.mapObject.isTileMap) && this.mapObject.zoomSettings.enable) {\n            this.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);\n        }\n        var group = (this.mapObject.renderer.createGroup({\n            id: this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_dataLableIndex_Group',\n            style: 'pointer-events: none;'\n        }));\n        if (this.mapObject.dataLabelModule && this.currentLayer.dataLabelSettings.visible) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var intersect_1 = [];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            renderData.map(function (currentShapeData, i) {\n                _this.renderLabel(_this.currentLayer, layerIndex, currentShapeData, group, i, labelTemplateEle, intersect_1);\n            });\n            this.groupElements.push(group);\n        }\n        if (this.mapObject.navigationLineModule) {\n            this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer, this.currentFactor, layerIndex));\n        }\n        this.groupElements.map(function (element) {\n            _this.layerObject.appendChild(element);\n        });\n        if (this.mapObject.markerModule) {\n            this.mapObject.markerModule.markerRender(this.layerObject, layerIndex, (this.mapObject.isTileMap ? Math.floor(this.currentFactor)\n                : this.currentFactor), null);\n        }\n        this.translateLayerElements(this.layerObject, layerIndex);\n        this.layerGroup.appendChild(this.layerObject);\n    };\n    /**\n     * render datalabel\n     *\n     * @param {LayerSettings} layer - Specifies the layer\n     * @param {number} layerIndex - Specifies the layer index\n     * @param {object[]} shape - Specifies the shape\n     * @param {Element} group - Specifies the group\n     * @param {number} shapeIndex - Specifies the shape index\n     * @param {HTMLElement} labelTemplateEle - Specifies the label template element\n     * @param {object[]} intersect - Specifies the intersect\n     * @returns {void}\n     */\n    LayerPanel.prototype.renderLabel = function (layer, layerIndex, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    shape, group, shapeIndex, labelTemplateEle, intersect) {\n        this.mapObject.dataLabelModule.renderLabel(layer, layerIndex, shape, layer.layerData, group, labelTemplateEle, shapeIndex, intersect);\n    };\n    /**\n     * To render path for multipolygon\n     *\n     * @param {any[]} currentShapeData Specifies the current shape data\n     * @returns {string} Returns the path\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.generateMultiPolygonPath = function (currentShapeData) {\n        var path = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var shape;\n        for (var j = 0; j < currentShapeData.length; j++) {\n            path += 'M' + (currentShapeData[j][0]['point']['x']) + ' ' + (currentShapeData[j][0]['point']['y']);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            shape = currentShapeData[j];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            shape.map(function (shapeData) {\n                path += ' L ' + (shapeData['point']['x']) + ' ' + (shapeData['point']['y']);\n            });\n        }\n        return path;\n    };\n    /**\n     * To render bubble\n     *\n     * @param {LayerSettings} layer - Specifies the layer\n     * @param {object} bubbleData - Specifies the bubble data\n     * @param {string} color - Specifies the color\n     * @param {number} range - Specifies the range\n     * @param {number} bubbleIndex - Specifies the bubble index\n     * @param {number} dataIndex - Specifies the data index\n     * @param {number} group - Specifies the group\n     * @param {number} layerIndex - Specifies the layer index\n     * @param {BubbleSettingsModel} bubbleSettings - Specifies the bubble settings\n     * @returns {void}\n     */\n    LayerPanel.prototype.renderBubble = function (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    layer, bubbleData, color, range, bubbleIndex, dataIndex, group, layerIndex, bubbleSettings) {\n        if (isNullOrUndefined(this.mapObject.bubbleModule) || !bubbleSettings.visible) {\n            return null;\n        }\n        color = bubbleSettings.fill ? bubbleSettings.fill : color;\n        this.mapObject.bubbleModule.id = this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_BubbleIndex_' +\n            bubbleIndex + '_dataIndex_' + dataIndex;\n        this.mapObject.bubbleModule.renderBubble(bubbleSettings, bubbleData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group, this.mapObject.bubbleModule.id);\n    };\n    /**\n     * To get the shape color from color mapping module\n     *\n     * @param {LayerSettingsModel} layer - Specifies the layer\n     * @param {object} shape - Specifies the shape\n     * @param {string} color - Specifies the color\n     * @returns {Object} - Returns the object\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.getShapeColorMapping = function (layer, shape, color) {\n        color = color ? color : layer.shapeSettings.fill;\n        if (layer.shapeSettings.colorMapping.length === 0 && isNullOrUndefined(layer.dataSource)) {\n            return color;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var index = checkShapeDataFields(layer.dataSource, shape, layer.shapeDataPath, layer.shapePropertyPath, layer);\n        var colorMapping = new ColorMapping(this.mapObject);\n        if (isNullOrUndefined(layer.dataSource[index])) {\n            return color;\n        }\n        return colorMapping.getShapeColorMapping(layer.shapeSettings, layer.dataSource[index], color);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.generatePoints = function (type, coordinates, data, properties) {\n        var _this = this;\n        var latitude;\n        var longitude;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var newData = [];\n        switch (type.toLowerCase()) {\n            case 'polygon':\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                newData = this.calculatePolygonBox(coordinates[0], data, properties);\n                if (newData.length > 0) {\n                    newData['property'] = properties;\n                    newData['type'] = type;\n                    newData['_isMultiPolygon'] = false;\n                    this.currentLayer.layerData.push(newData);\n                }\n                break;\n            case 'multipolygon':\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var multiPolygonDatas = [];\n                for (var i = 0; i < coordinates.length; i++) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    newData = this.calculatePolygonBox(coordinates[i][0], data, properties);\n                    if (newData.length > 0) {\n                        multiPolygonDatas.push(newData);\n                    }\n                }\n                multiPolygonDatas['property'] = properties;\n                multiPolygonDatas['type'] = type;\n                multiPolygonDatas['_isMultiPolygon'] = true;\n                this.currentLayer.layerData.push(multiPolygonDatas);\n                break;\n            case 'linestring':\n                var extraSpace_1 = !isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ?\n                    this.currentLayer.shapeSettings.border.width : 1;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                coordinates.map(function (points, index) {\n                    latitude = points[1];\n                    longitude = points[0];\n                    var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n                    _this.calculateBox(point, extraSpace_1);\n                    newData.push({\n                        point: point, lat: latitude, lng: longitude\n                    });\n                });\n                newData['property'] = properties;\n                newData['type'] = type;\n                this.currentLayer.layerData.push(newData);\n                break;\n            case 'point': {\n                var arrayCollections_1 = false;\n                var extraSpace_2 = (!isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ?\n                    this.currentLayer.shapeSettings.border.width : 1) + (this.currentLayer.shapeSettings.circleRadius * 2);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                coordinates.map(function (points, index) {\n                    if (Object.prototype.toString.call(points) === '[object Array]') {\n                        latitude = points[1];\n                        longitude = points[0];\n                        arrayCollections_1 = true;\n                        var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n                        _this.currentLayer.layerData.push({\n                            point: point, type: type, lat: latitude, lng: longitude, property: properties\n                        });\n                    }\n                });\n                if (!arrayCollections_1) {\n                    latitude = coordinates[1];\n                    longitude = coordinates[0];\n                    var point = convertGeoToPoint(latitude, longitude, this.currentFactor, this.currentLayer, this.mapObject);\n                    this.calculateBox(point, extraSpace_2);\n                    this.currentLayer.layerData.push({\n                        point: point, type: type, lat: latitude, lng: longitude, property: properties\n                    });\n                }\n                break;\n            }\n            case 'path':\n                this.currentLayer.layerData.push({\n                    point: data['d'], type: type, property: properties\n                });\n                break;\n        }\n    };\n    LayerPanel.prototype.calculateBox = function (point, extraSpace) {\n        if (isNullOrUndefined(this.rectBounds)) {\n            this.rectBounds = { min: { x: point.x, y: point.y - extraSpace }, max: { x: point.x, y: point.y + extraSpace } };\n        }\n        else {\n            this.rectBounds['min']['x'] = Math.min(this.rectBounds['min']['x'], point.x);\n            this.rectBounds['min']['y'] = Math.min(this.rectBounds['min']['y'], point.y - extraSpace);\n            this.rectBounds['max']['x'] = Math.max(this.rectBounds['max']['x'], point.x);\n            this.rectBounds['max']['y'] = Math.max(this.rectBounds['max']['y'], point.y + extraSpace);\n        }\n    };\n    LayerPanel.prototype.calculateFactor = function (layer) {\n        var horFactor;\n        var verFactor = 1;\n        var divide = 10;\n        var exp = 'e+1';\n        var bounds = this.mapObject.baseMapBounds;\n        var mapSize = new Size(this.mapObject.mapAreaRect.width, this.mapObject.mapAreaRect.height - 5);\n        var mapHeight;\n        var mapWidth;\n        if (bounds) {\n            var start = convertGeoToPoint(bounds.latitude.min, bounds.longitude.min, null, layer, this.mapObject);\n            var end = convertGeoToPoint(bounds.latitude.max, bounds.longitude.max, null, layer, this.mapObject);\n            mapHeight = end.y - start.y;\n            mapWidth = end.x - start.x;\n        }\n        else {\n            mapHeight = mapWidth = 500;\n        }\n        if (mapHeight < mapSize.height) {\n            horFactor = parseFloat(Math.abs(Number(mapSize.height / Number(mapHeight.toString() + exp)) * 100).toString().split('.')[0])\n                / divide;\n        }\n        else {\n            horFactor = mapSize.height / mapHeight;\n        }\n        if (mapWidth < mapSize.width) {\n            verFactor = parseFloat(Math.abs(Number(mapSize.width / Number(mapWidth.toString() + exp)) * 100).toString().split('.')[0])\n                / divide;\n        }\n        else {\n            verFactor = mapSize.width / mapWidth;\n        }\n        return (Math.min(verFactor, horFactor));\n    };\n    LayerPanel.prototype.translateLayerElements = function (layerElement, index) {\n        var childNode;\n        this.mapObject.translateType = 'layer';\n        if (!isNullOrUndefined(this.mapObject.baseMapRectBounds)) {\n            var duration = this.currentLayer.animationDuration;\n            var animate = duration !== 0 || isNullOrUndefined(this.mapObject.zoomModule);\n            this.mapObject.baseTranslatePoint = this.mapObject.zoomTranslatePoint;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var translate = void 0;\n            if (this.mapObject.zoomSettings.zoomFactor > 1 && !isNullOrUndefined(this.mapObject.zoomModule)) {\n                translate = getZoomTranslate(this.mapObject, this.currentLayer, animate);\n            }\n            else {\n                translate = getTranslate(this.mapObject, this.currentLayer, animate);\n            }\n            var scale = this.mapObject.previousScale = translate['scale'];\n            var location_1 = this.mapObject.previousPoint = translate['location'];\n            this.mapObject.baseTranslatePoint = this.mapObject.translatePoint = location_1;\n            this.mapObject.baseScale = this.mapObject.scale = scale;\n            for (var i = 0; i < layerElement.childElementCount; i++) {\n                childNode = layerElement.childNodes[i];\n                if (!(childNode.id.indexOf('_Markers_Group') > -1) &&\n                    (!(childNode.id.indexOf('_bubble_Group') > -1)) &&\n                    (!(childNode.id.indexOf('_dataLableIndex_Group') > -1))) {\n                    var transform = 'scale( ' + scale + ' ) '\n                        + 'translate( ' + location_1.x + ' ' + location_1.y + ' ) ';\n                    childNode.setAttribute('transform', transform);\n                    if (duration > 0 && !isNullOrUndefined(this.mapObject.zoomModule)) {\n                        if (this.mapObject.zoomSettings.zoomFactor > 1) {\n                            translate = getZoomTranslate(this.mapObject, this.currentLayer);\n                        }\n                        else {\n                            translate = getTranslate(this.mapObject, this.currentLayer);\n                        }\n                        this.mapObject.scale = translate['scale'];\n                        this.mapObject.zoomTranslatePoint = this.mapObject.translatePoint = translate['location'];\n                    }\n                }\n            }\n        }\n        else if (this.mapObject.isTileMap && !isNullOrUndefined(this.mapObject.scale)) {\n            for (var j = 0; j < layerElement.childElementCount; j++) {\n                childNode = layerElement.childNodes[j];\n                if (!(childNode.id.indexOf('_Markers_Group') > -1) &&\n                    (!(childNode.id.indexOf('_bubble_Group') > -1)) &&\n                    (!(childNode.id.indexOf('_dataLableIndex_Group') > -1)) &&\n                    (!(childNode.id.indexOf('_line_Group') > -1))) {\n                    var transform = 'scale( ' + this.mapObject.scale + ' ) ' + 'translate( ' + this.mapObject.translatePoint.x\n                        + ' ' + this.mapObject.translatePoint.y + ' ) ';\n                    childNode.setAttribute('transform', transform);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.calculateRectBounds = function (layerData) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Array.prototype.forEach.call(layerData, function (obj, index) {\n            if (!isNullOrUndefined(obj['geometry']) || !isNullOrUndefined(obj['coordinates'])) {\n                var type = !isNullOrUndefined(obj['geometry']) ? obj['geometry']['type'] : obj['type'];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var coordinates = !isNullOrUndefined(obj['geometry']) ? obj['geometry']['coordinates'] : obj['coordinates'];\n                switch (type.toLowerCase()) {\n                    case 'polygon':\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        _this.calculateRectBox(coordinates[0]);\n                        break;\n                    case 'multipolygon':\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        coordinates.map(function (point, index) {\n                            _this.calculateRectBox(point[0]);\n                        });\n                        break;\n                    case 'linestring':\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        coordinates.map(function (point, index) {\n                            _this.calculateRectBox(point, 'LineString', index === 0 ? true : false);\n                        });\n                        break;\n                    case 'point':\n                        _this.calculateRectBox(coordinates, 'point');\n                        break;\n                }\n            }\n        });\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.calculatePolygonBox = function (coordinates, data, properties) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var newData = [];\n        var bounds = this.mapObject.baseMapBounds;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        coordinates.map(function (currentPoint, index) {\n            var latitude = currentPoint[1];\n            var longitude = currentPoint[0];\n            if ((longitude >= bounds.longitude.min && longitude <= bounds.longitude.max)\n                && (latitude >= bounds.latitude.min && latitude <= bounds.latitude.max)) {\n                var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n                if (isNullOrUndefined(_this.rectBounds)) {\n                    _this.rectBounds = { min: { x: point.x, y: point.y }, max: { x: point.x, y: point.y } };\n                }\n                else {\n                    _this.rectBounds['min']['x'] = Math.min(_this.rectBounds['min']['x'], point.x);\n                    _this.rectBounds['min']['y'] = Math.min(_this.rectBounds['min']['y'], point.y);\n                    _this.rectBounds['max']['x'] = Math.max(_this.rectBounds['max']['x'], point.x);\n                    _this.rectBounds['max']['y'] = Math.max(_this.rectBounds['max']['y'], point.y);\n                }\n                newData.push({\n                    point: point,\n                    lat: latitude,\n                    lng: longitude\n                });\n            }\n        });\n        return newData;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.calculateRectBox = function (coordinates, type, isFirstItem) {\n        var _this = this;\n        if (type !== 'LineString' && type !== 'point') {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            Array.prototype.forEach.call(coordinates, function (currentCoords) {\n                if (isNullOrUndefined(_this.mapObject.baseMapBounds)) {\n                    _this.mapObject.baseMapBounds = new GeoLocation({ min: currentCoords[1], max: currentCoords[1] }, { min: currentCoords[0], max: currentCoords[0] });\n                }\n                else {\n                    _this.mapObject.baseMapBounds.latitude.min = Math.min(_this.mapObject.baseMapBounds.latitude.min, currentCoords[1]);\n                    _this.mapObject.baseMapBounds.latitude.max = Math.max(_this.mapObject.baseMapBounds.latitude.max, currentCoords[1]);\n                    _this.mapObject.baseMapBounds.longitude.min = Math.min(_this.mapObject.baseMapBounds.longitude.min, currentCoords[0]);\n                    _this.mapObject.baseMapBounds.longitude.max = Math.max(_this.mapObject.baseMapBounds.longitude.max, currentCoords[0]);\n                }\n            });\n        }\n        else {\n            if ((isFirstItem || type === 'point') && isNullOrUndefined(this.mapObject.baseMapBounds)) {\n                this.mapObject.baseMapBounds = new GeoLocation({ min: coordinates[1], max: coordinates[1] }, { min: coordinates[0], max: coordinates[0] });\n            }\n            else {\n                this.mapObject.baseMapBounds.latitude.min = Math.min(this.mapObject.baseMapBounds.latitude.min, coordinates[1]);\n                this.mapObject.baseMapBounds.latitude.max = Math.max(this.mapObject.baseMapBounds.latitude.max, coordinates[1]);\n                this.mapObject.baseMapBounds.longitude.min = Math.min(this.mapObject.baseMapBounds.longitude.min, coordinates[0]);\n                this.mapObject.baseMapBounds.longitude.max = Math.max(this.mapObject.baseMapBounds.longitude.max, coordinates[0]);\n            }\n        }\n    };\n    LayerPanel.prototype.generateTiles = function (zoomLevel, tileTranslatePoint, zoomType, bing, position) {\n        var userLang = this.mapObject.locale;\n        var size = this.mapObject.availableSize;\n        this.tiles = [];\n        var xcount;\n        var ycount;\n        xcount = ycount = Math.pow(2, zoomLevel);\n        var xLeft = 0;\n        var xRight = 0;\n        if ((tileTranslatePoint.x + (xcount * 256)) < size.width) {\n            xLeft = tileTranslatePoint.x > 0 ? Math.ceil(tileTranslatePoint.x / 256) : 0;\n            xRight = ((tileTranslatePoint.x + xcount * 256) < size.width) ?\n                Math.ceil((size.width - (tileTranslatePoint.x + xcount * 256)) / 256) : 0;\n        }\n        xcount += xLeft + xRight;\n        if (zoomType === 'Pan') {\n            xcount = (this.horizontalPanXCount >= xcount) ? this.horizontalPanXCount : xcount;\n            this.horizontalPan = false;\n        }\n        else {\n            this.horizontalPanXCount = xcount;\n            this.horizontalPan = true;\n        }\n        var baseLayer = this.mapObject.layers[this.mapObject.baseLayerIndex];\n        this.urlTemplate = baseLayer.urlTemplate;\n        var endY = Math.min(ycount, ((-tileTranslatePoint.y + size.height) / 256) + 1);\n        var endX = Math.min(xcount, ((-tileTranslatePoint.x + size.width + (xRight * 256)) / 256) + 1);\n        var startX = (-((tileTranslatePoint.x + (xLeft * 256)) + 256) / 256);\n        var startY = (-(tileTranslatePoint.y + 256) / 256);\n        bing = bing || this.bing || this.mapObject['bingMap'];\n        for (var i = Math.round(startX); i < Math.round(endX); i++) {\n            for (var j = Math.round(startY); j < Math.round(endY); j++) {\n                var x = 256 * i + tileTranslatePoint.x;\n                var y = 256 * j + tileTranslatePoint.y;\n                if (x > -256 && x <= size.width && y > -256 && y < size.height) {\n                    if (j >= 0) {\n                        var tileI = i;\n                        if (i < 0) {\n                            tileI = (tileI % ycount) + ycount;\n                        }\n                        var tile = new Tile(tileI % ycount, j);\n                        tile.left = x;\n                        tile.top = y;\n                        if (baseLayer.layerType === 'Bing') {\n                            var key = baseLayer.key;\n                            tile.src = bing.getBingMap(tile, key, baseLayer.bingMapType, userLang, bing.imageUrl, bing.subDomains);\n                        }\n                        else {\n                            tile.src = this.urlTemplate.replace('level', zoomLevel.toString()).replace('tileX', tile.x.toString())\n                                .replace('tileY', tile.y.toString());\n                        }\n                        this.tiles.push(tile);\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(zoomType)) {\n            if (zoomType.indexOf('wheel') > 1) {\n                this.animateToZoomX = (this.mapObject.availableSize.width / 2) - position.x - 10;\n                this.animateToZoomY = -position.y;\n            }\n            else {\n                this.animateToZoomX = -10;\n                this.animateToZoomY = -(this.mapObject.availableSize.height / 2 + 11.5) + 10;\n            }\n        }\n        var proxTiles = extend([], this.tiles, [], true);\n        for (var _i = 0, _a = this.mapObject.layers; _i < _a.length; _i++) {\n            var layer = _a[_i];\n            if (!(layer.type === 'SubLayer' && layer.visible)) {\n                continue;\n            }\n            if (layer.layerType === 'OSM' || layer.layerType === 'Bing') {\n                for (var _b = 0, proxTiles_1 = proxTiles; _b < proxTiles_1.length; _b++) {\n                    var baseTile = proxTiles_1[_b];\n                    var subtile = extend({}, baseTile, {}, true);\n                    if (layer.layerType === 'Bing') {\n                        subtile.src = bing.getBingMap(subtile, layer.key, layer.bingMapType, userLang, bing.imageUrl, bing.subDomains);\n                    }\n                    else {\n                        subtile.src = layer.urlTemplate.replace('level', zoomLevel.toString()).replace('tileX', baseTile.x.toString())\n                            .replace('tileY', baseTile.y.toString());\n                    }\n                    this.tiles.push(subtile);\n                }\n            }\n        }\n        if (this.mapObject.previousScale !== this.mapObject.scale || this.mapObject.isReset) {\n            this.arrangeTiles(zoomType, this.animateToZoomX, this.animateToZoomY);\n        }\n    };\n    LayerPanel.prototype.arrangeTiles = function (type, x, y) {\n        var _this = this;\n        var element = document.getElementById(this.mapObject.element.id + '_tile_parent');\n        var element1 = document.getElementById(this.mapObject.element.id + '_tiles');\n        var timeOut;\n        if (!isNullOrUndefined(type) && type !== 'Pan') {\n            this.tileAnimation(type, x, y);\n            timeOut = this.mapObject.layersCollection[0].animationDuration;\n        }\n        else {\n            timeOut = 0;\n        }\n        if (this.mapObject.layers[this.mapObject.baseLayerIndex].layerType === 'GoogleStaticMap') {\n            this.renderGoogleMap(this.mapObject.layers[0].key, this.mapObject.staticMapZoom);\n        }\n        else {\n            setTimeout(function () {\n                if (element) {\n                    element.style.zIndex = '1';\n                }\n                if (element1) {\n                    element1.style.zIndex = '0';\n                }\n                var animateElement;\n                if (!document.getElementById(_this.mapObject.element.id + '_animated_tiles') && element) {\n                    animateElement = createElement('div', { id: _this.mapObject.element.id + '_animated_tiles' });\n                    element.appendChild(animateElement);\n                }\n                else {\n                    if (type !== 'Pan' && element1 && element) {\n                        element1.appendChild(element.children[0]);\n                        if (!isNullOrUndefined(document.getElementById(_this.mapObject.element.id + '_animated_tiles'))) {\n                            document.getElementById(_this.mapObject.element.id + '_animated_tiles').id =\n                                _this.mapObject.element.id + '_animated_tiles_old';\n                        }\n                        animateElement = createElement('div', { id: _this.mapObject.element.id + '_animated_tiles' });\n                        element.appendChild(animateElement);\n                    }\n                    else {\n                        animateElement = element ? element.children[0] : null;\n                    }\n                }\n                var id = 0;\n                var _loop_3 = function (tile) {\n                    var imgElement = createElement('img');\n                    imgElement.setAttribute('src', tile.src);\n                    var mapId = _this.mapObject.element.id;\n                    imgElement.onload = function () {\n                        if (document.getElementById(mapId + '_tile_' + id) && type === 'Pan') {\n                            removeElement(mapId + '_tile_' + id);\n                        }\n                        var child = createElement('div', { id: mapId + '_tile_' + id });\n                        child.style.position = 'absolute';\n                        child.style.left = tile.left + 'px';\n                        child.style.top = tile.top + 'px';\n                        child.style.height = tile.height + 'px';\n                        child.style.width = tile.width + 'px';\n                        child.appendChild(imgElement);\n                        if (animateElement) {\n                            animateElement.appendChild(child);\n                        }\n                        id++;\n                        if (id === _this.tiles.length && document.getElementById(_this.mapObject.element.id + '_animated_tiles_old')) {\n                            removeElement(_this.mapObject.element.id + '_animated_tiles_old');\n                        }\n                    };\n                };\n                for (var _i = 0, _a = _this.tiles; _i < _a.length; _i++) {\n                    var tile = _a[_i];\n                    _loop_3(tile);\n                }\n            }, timeOut);\n        }\n    };\n    /**\n     * Animation for tile layers and hide the group element until the tile layer rendering\n     *\n     * @param {string} zoomType - Specifies the zoom type\n     * @param {number} translateX - Specifies the x translate point\n     * @param {number} translateY - Specifies the y translate point\n     * @returns {void}\n     */\n    LayerPanel.prototype.tileAnimation = function (zoomType, translateX, translateY) {\n        var tileParent = document.getElementById(this.mapObject.element.id + '_tile_parent');\n        var animatedTiles = document.getElementById(this.mapObject.element.id + '_animated_tiles');\n        var tileElement = document.getElementById(this.mapObject.element.id + '_tiles');\n        var scaleValue = '2';\n        if (zoomType.indexOf('ZoomOut') === 0 || zoomType === 'Reset') {\n            tileElement.style.zIndex = '1';\n            tileParent.style.zIndex = '0';\n            while (tileElement.childElementCount >= 1) {\n                tileElement.removeChild(tileElement.children[0]);\n            }\n            translateX = 0;\n            translateY = document.getElementById(this.mapObject.element.id + '_tile_parent').getClientRects()[0].height / 4;\n            scaleValue = zoomType.indexOf('ZoomOut') === 0 ? '0.5' : '0.2';\n        }\n        if (!isNullOrUndefined(animatedTiles)) {\n            animatedTiles.style.transition = this.mapObject.layersCollection[0].animationDuration + 'ms';\n            animatedTiles.style.transform = 'translate(' + translateX + 'px, ' + translateY + 'px) scale(' + scaleValue + ')';\n        }\n    };\n    /**\n     * Static map rendering\n     *\n     * @param {string} apikey - Specifies the api key\n     * @param {number} zoom - Specifies the zoom value\n     * @returns {void}\n     * @private\n     */\n    LayerPanel.prototype.renderGoogleMap = function (apikey, zoom) {\n        var map = this.mapObject;\n        // zoom = this.mapObject.zoomSettings.shouldZoomInitially ? this.mapObject.markerZoomFactor : zoom;\n        zoom = this.mapObject.tileZoomLevel;\n        var totalSize = Math.pow(2, zoom) * 256;\n        var x = (map.mapAreaRect.width / 2) - (totalSize / 2);\n        var y = (map.mapAreaRect.height / 2) - (totalSize / 2);\n        var centerPoint = new Point(null, null);\n        var diffX = 0;\n        var diffY = 0;\n        var position = convertTileLatLongToPoint(centerPoint, zoom, { x: x, y: y }, this.isMapCoordinates);\n        if (map.zoomModule && map.zoomSettings.enable) {\n            diffX = map.zoomModule.mouseDownLatLong['x'] - map.zoomModule.mouseMoveLatLong['x'];\n            diffY = map.zoomModule.mouseDownLatLong['y'] - map.zoomModule.mouseMoveLatLong['y'];\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var panLatLng = map.pointToLatLong(position.x - diffX, position.y - diffY);\n        map.centerPosition.latitude = panLatLng['latitude'];\n        map.centerPosition.longitude = panLatLng['longitude'];\n        var mapWidth;\n        var mapHeight;\n        if (isNullOrUndefined(parseInt(map.width, 10))) {\n            mapWidth = parseInt(map.width, 10) - 22;\n        }\n        else {\n            mapWidth = Math.round(map.mapAreaRect.width);\n        }\n        if (isNullOrUndefined(parseInt(map.height, 10))) {\n            mapHeight = parseInt(map.height, 10) - 22;\n        }\n        else {\n            mapHeight = Math.round(map.mapAreaRect.height);\n        }\n        var eleWidth = mapWidth > 640 ? (mapWidth - 640) / 2 : 0;\n        var eleHeight = mapHeight > 640 ? (mapHeight - 640) / 2 : 0;\n        var center;\n        var mapType = (map.layers[map.layers.length - 1].staticMapType).toString().toLowerCase();\n        if (map.centerPosition.latitude && map.centerPosition.longitude) {\n            center = map.centerPosition.latitude.toString() + ',' + map.centerPosition.longitude.toString();\n        }\n        else {\n            center = '0,0';\n        }\n        var staticMapString = 'https://maps.googleapis.com/maps/api/staticmap?size=' + mapWidth + 'x' + mapHeight +\n            '&zoom=' + zoom + '&center=' + center + '&maptype=' + mapType + '&key=' + apikey;\n        document.getElementById(this.mapObject.element.id + '_tile_parent').innerHTML\n            = '<div id=\"' + this.mapObject.element.id + '_StaticGoogleMap\"' + 'style=\"position:absolute; left:' + eleWidth + 'px; top:'\n                + eleHeight + 'px\"><img src=\"' + staticMapString + '\"></div>';\n    };\n    /**\n     * To find the tile translate point\n     *\n     * @param {number} factorX - Specifies the x factor\n     * @param {number} factorY - Specifies the x factor\n     * @param {MapLocation} centerPosition - Specifies the map location\n     * @returns {Point} - Returns point values\n     */\n    LayerPanel.prototype.panTileMap = function (factorX, factorY, centerPosition) {\n        if (this.mapObject.tileZoomLevel <= this.mapObject.tileZoomScale && this.mapObject.initialCheck) {\n            this.mapObject.tileZoomLevel = this.mapObject.tileZoomScale;\n        }\n        var level = this.mapObject.tileZoomLevel;\n        var padding = this.mapObject.layers[this.mapObject.layers.length - 1].layerType !== 'GoogleStaticMap' ?\n            20 : 0;\n        var x;\n        var y;\n        var totalSize = Math.pow(2, level) * 256;\n        x = (factorX / 2) - (totalSize / 2);\n        y = (factorY / 2) - (totalSize / 2);\n        var position = convertTileLatLongToPoint(centerPosition, level, { x: x, y: y }, this.isMapCoordinates);\n        padding = this.mapObject.zoomNotApplied ? 0 : padding;\n        x -= position.x - (factorX / 2);\n        y = (y - (position.y - (factorY / 2))) + padding;\n        this.mapObject.scale = Math.pow(2, level - 1);\n        if ((isNullOrUndefined(this.mapObject.tileTranslatePoint) || (this.mapObject.tileTranslatePoint.y === 0 &&\n            this.mapObject.tileTranslatePoint.x === 0)) || (isNullOrUndefined(this.mapObject.previousTileWidth) ||\n            isNullOrUndefined(this.mapObject.previousTileHeight))) {\n            this.mapObject.previousTileWidth = factorX;\n            this.mapObject.previousTileHeight = factorY;\n        }\n        if (!isNullOrUndefined(this.mapObject.tileTranslatePoint) && (isNullOrUndefined(centerPosition.x)) &&\n            (this.mapObject.zoomSettings.zoomFactor === 1 ||\n                this.mapObject.zoomSettings.zoomFactor !== level || !this.mapObject.defaultState)) {\n            if ((factorX !== this.mapObject.previousTileWidth || factorY !== this.mapObject.previousTileHeight)) {\n                var xdiff = x - ((this.mapObject.previousTileWidth / 2) - (totalSize / 2));\n                var ydiff = y - ((this.mapObject.previousTileHeight / 2) - (totalSize / 2) + padding);\n                this.mapObject.tileTranslatePoint.x = this.mapObject.tileTranslatePoint.x + xdiff;\n                this.mapObject.tileTranslatePoint.y = this.mapObject.tileTranslatePoint.y + ydiff;\n            }\n        }\n        if (!isNullOrUndefined(this.mapObject.tileTranslatePoint) && !this.mapObject.zoomNotApplied) {\n            if (this.mapObject.tileTranslatePoint.x !== 0 && this.mapObject.tileTranslatePoint.x !== x\n                && !this.mapObject.centerPositionChanged) {\n                x = this.mapObject.tileTranslatePoint.x;\n            }\n            if (this.mapObject.tileTranslatePoint.y !== 0 && this.mapObject.tileTranslatePoint.y !== y\n                && !this.mapObject.centerPositionChanged) {\n                y = this.mapObject.tileTranslatePoint.y;\n            }\n        }\n        this.mapObject.translatePoint = new Point((x - (0.01 * this.mapObject.zoomSettings.zoomFactor)) / this.mapObject.scale, (y - (0.01 * this.mapObject.zoomSettings.zoomFactor)) / this.mapObject.scale);\n        this.mapObject.previousTileWidth = factorX;\n        this.mapObject.previousTileHeight = factorY;\n        return new Point(x, y);\n    };\n    return LayerPanel;\n}());\nexport { LayerPanel };\n"]},"metadata":{},"sourceType":"module"}