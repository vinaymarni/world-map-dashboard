{"ast":null,"code":"import { Point, getElementByID, PathOption, Rect, convertGeoToPoint, CircleOption, convertTileLatLongToPoint } from '../utils/helper';\nimport { RectOption, createTooltip, calculateScale, getTouchCenter, getTouches, targetTouches } from '../utils/helper';\nimport { MapLocation, zoomAnimate, smoothTranslate, measureText, textTrim, clusterTemplate, marker } from '../utils/helper';\nimport { markerTemplate, removeElement, getElement, clusterSeparate, markerColorChoose } from '../utils/helper';\nimport { markerShapeChoose } from '../utils/helper';\nimport { isNullOrUndefined, EventHandler, Browser, remove, createElement } from '@syncfusion/ej2-base';\nimport { changeBorderWidth, markerRendering } from '../index';\nimport { pan } from '../model/constants';\nimport { getValueFromObject } from '../utils/helper';\n/**\n * Zoom module used to process the zoom for maps\n */\n\nvar Zoom =\n/** @class */\nfunction () {\n  function Zoom(maps) {\n    this.isPanning = false;\n    this.mouseEnter = false;\n    this.isTouch = false;\n    this.rectZoomingStart = false;\n    this.pinchRect = new Rect(0, 0, 0, 0);\n    this.browserName = Browser.info.name; // eslint-disable-next-line @typescript-eslint/ban-types\n\n    this.isPointer = Browser.isPointer;\n    this.handled = false;\n    this.pinchFactor = 1; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.startTouches = []; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.shapeZoomLocation = []; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.intersect = []; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.mouseDownLatLong = {\n      x: 0,\n      y: 0\n    }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.mouseMoveLatLong = {\n      x: 0,\n      y: 0\n    };\n    /**\n     * @private\n     */\n\n    this.isSingleClick = false;\n    this.maps = maps;\n    this.wheelEvent = this.browserName === 'mozilla' ? this.isPointer ? 'mousewheel' : 'DOMMouseScroll' : 'mousewheel';\n    this.cancelEvent = this.isPointer ? 'pointerleave' : 'mouseleave';\n    this.selectionColor = this.maps.zoomSettings.selectionColor;\n    this.fillColor = this.maps.zoomSettings.color;\n    this.addEventListener();\n    this.groupElements = [];\n  }\n  /**\n   * To perform zooming for maps\n   *\n   * @param {Point} position - Specifies the position.\n   * @param {number} newZoomFactor - Specifies the zoom factor.\n   * @param {string} type - Specifies the type.\n   * @returns {void}\n   */\n\n\n  Zoom.prototype.performZooming = function (position, newZoomFactor, type) {\n    var _this = this;\n\n    var map = this.maps;\n    map.previousProjection = map.projectionType;\n    map.defaultState = false;\n    map.initialCheck = false;\n    map.markerZoomedState = false;\n    map.zoomPersistence = map.enablePersistence;\n    var prevLevel = map.tileZoomLevel;\n    var scale = map.previousScale = map.scale;\n    var maxZoom = map.zoomSettings.maxZoom;\n    var minZoom = map.zoomSettings.minZoom;\n    newZoomFactor = minZoom > newZoomFactor && type === 'ZoomIn' ? minZoom + 1 : newZoomFactor;\n    var prevTilePoint = map.tileTranslatePoint;\n\n    if (!map.isTileMap && (type === 'ZoomIn' ? newZoomFactor >= minZoom && newZoomFactor <= maxZoom : newZoomFactor >= minZoom)) {\n      var availSize = map.mapAreaRect; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var minBounds = map.baseMapRectBounds['min']; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var maxBounds = map.baseMapRectBounds['max'];\n      var mapTotalWidth = Math.abs(minBounds['x'] - maxBounds['x']);\n      var mapTotalHeight = Math.abs(minBounds['y'] - maxBounds['y']);\n      var point = map.translatePoint;\n      var translatePointX = point.x - (availSize.width / scale - availSize.width / newZoomFactor) / (availSize.width / position.x);\n      var translatePointY = point.y - (availSize.height / scale - availSize.height / newZoomFactor) / (availSize.height / position.y);\n      var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * newZoomFactor;\n      translatePointX = currentHeight < map.mapAreaRect.height ? availSize.x + (-minBounds['x'] + (availSize.width / 2 - mapTotalWidth / 2)) : translatePointX;\n      translatePointY = currentHeight < map.mapAreaRect.height ? availSize.y + (-minBounds['y'] + (availSize.height / 2 - mapTotalHeight / 2)) : translatePointY;\n      map.translatePoint = new Point(translatePointX, translatePointY);\n      map.scale = newZoomFactor;\n      this.triggerZoomEvent(prevTilePoint, prevLevel, type);\n      this.applyTransform();\n    } else if (map.isTileMap && newZoomFactor >= minZoom && newZoomFactor <= maxZoom) {\n      this.getTileTranslatePosition(prevLevel, newZoomFactor, position, type);\n      map.tileZoomLevel = newZoomFactor;\n      map.zoomSettings.zoomFactor = newZoomFactor;\n      map.scale = Math.pow(2, newZoomFactor - 1);\n\n      if (type === 'ZoomOut' && map.zoomSettings.resetToInitial && map.applyZoomReset && newZoomFactor <= map.initialZoomLevel) {\n        map.initialCheck = true;\n        map.zoomPersistence = false;\n        map.tileTranslatePoint.x = map.initialTileTranslate.x;\n        map.tileTranslatePoint.y = map.initialTileTranslate.y;\n        newZoomFactor = map.tileZoomLevel = map.mapScaleValue = map.initialZoomLevel;\n        map.scale = Math.pow(2, newZoomFactor - 1);\n      }\n\n      map.translatePoint.y = (map.tileTranslatePoint.y - 0.01 * map.mapScaleValue) / map.scale;\n      map.translatePoint.x = (map.tileTranslatePoint.x - 0.01 * map.mapScaleValue) / map.scale;\n      this.triggerZoomEvent(prevTilePoint, prevLevel, type);\n\n      if (document.querySelector('.GroupElement')) {\n        document.querySelector('.GroupElement').style.display = 'none';\n      }\n\n      if (document.getElementById(this.maps.element.id + '_LayerIndex_1')) {\n        document.getElementById(this.maps.element.id + '_LayerIndex_1').style.display = 'none';\n      }\n\n      this.markerLineAnimation(map);\n      map.mapLayerPanel.generateTiles(newZoomFactor, map.tileTranslatePoint, type + 'wheel', null, position);\n      var element1 = document.getElementById(this.maps.element.id + '_tiles');\n      var animationDuration = this.maps.layersCollection[0].animationDuration;\n      setTimeout(function () {\n        // if (type === 'ZoomOut') {\n        //     element1.removeChild(element1.children[element1.childElementCount - 1]);\n        //     if (element1.childElementCount) {\n        //         element1.removeChild(element1.children[element1.childElementCount - 1]);\n        //     } else {\n        //         element1 = element1;\n        //     }\n        // }\n        _this.applyTransform();\n\n        if (document.getElementById(_this.maps.element.id + '_LayerIndex_1')) {\n          document.getElementById(_this.maps.element.id + '_LayerIndex_1').style.display = 'block';\n        }\n      }, animationDuration);\n    }\n\n    this.maps.zoomNotApplied = false;\n  };\n\n  Zoom.prototype.triggerZoomEvent = function (prevTilePoint, prevLevel, type) {\n    var map = this.maps;\n    var zoomArgs;\n\n    if (!map.isTileMap) {\n      zoomArgs = {\n        cancel: false,\n        name: 'zoom',\n        type: type,\n        maps: map,\n        tileTranslatePoint: {},\n        translatePoint: {\n          previous: map.previousPoint,\n          current: map.translatePoint\n        },\n        tileZoomLevel: {},\n        scale: {\n          previous: map.previousScale,\n          current: map.scale\n        }\n      };\n    } else {\n      zoomArgs = {\n        cancel: false,\n        name: 'zoom',\n        type: type,\n        maps: map,\n        tileTranslatePoint: {\n          previous: prevTilePoint,\n          current: map.tileTranslatePoint\n        },\n        translatePoint: {\n          previous: map.previousPoint,\n          current: map.translatePoint\n        },\n        tileZoomLevel: {\n          previous: prevLevel,\n          current: map.tileZoomLevel\n        },\n        scale: {\n          previous: map.previousScale,\n          current: map.scale\n        }\n      };\n    }\n\n    map.trigger('zoom', zoomArgs);\n  };\n\n  Zoom.prototype.getTileTranslatePosition = function (prevLevel, currentLevel, position, type) {\n    var map = this.maps;\n    var tileDefaultSize = 256;\n    var padding = type === 'ZoomOut' ? 10 : type === 'Reset' && currentLevel > 1 ? 0 : 10;\n    var bounds = map.availableSize;\n    var prevSize = Math.pow(2, prevLevel) * 256;\n    var totalSize = Math.pow(2, currentLevel) * 256;\n    var x = (position.x - map.tileTranslatePoint.x) / prevSize * 100;\n    var y = (position.y - map.tileTranslatePoint.y) / prevSize * 100;\n    map.tileTranslatePoint.x = currentLevel === 1 ? bounds.width / 2 - tileDefaultSize * 2 / 2 : position.x - x * totalSize / 100;\n    map.tileTranslatePoint.y = currentLevel === 1 ? bounds.height / 2 - tileDefaultSize * 2 / 2 + padding * 2 : position.y - y * totalSize / 100;\n  };\n\n  Zoom.prototype.performRectZooming = function () {\n    this.isDragZoom = true;\n    var map = this.maps;\n    var size = map.availableSize;\n    map.previousProjection = map.projectionType;\n    var prevLevel = map.tileZoomLevel;\n    var prevTilePoint = map.tileTranslatePoint;\n    var zoomRect = this.zoomingRect;\n    var maxZoom = map.zoomSettings.maxZoom;\n    var minZoom = map.zoomSettings.minZoom;\n\n    if (zoomRect.height > 0 && zoomRect.width > 0) {\n      var x = this.zoomingRect.x + this.zoomingRect.width / 2;\n      var y = this.zoomingRect.y + this.zoomingRect.height / 2;\n      var zoomCalculationFactor = void 0;\n\n      if (!map.isTileMap) {\n        var scale = map.previousScale = map.scale;\n        zoomCalculationFactor = scale + Math.round((size.width / zoomRect.width + size.height / zoomRect.height) / 2);\n        var translatePoint = map.previousPoint = map.translatePoint;\n        var translatePointX = translatePoint.x - (size.width / scale - size.width / zoomCalculationFactor) / (size.width / x);\n        var translatePointY = translatePoint.y - (size.height / scale - size.height / zoomCalculationFactor) / (size.height / y);\n        map.translatePoint = new Point(translatePointX, translatePointY);\n        map.scale = zoomCalculationFactor;\n        this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n      } else {\n        zoomCalculationFactor = prevLevel + Math.round(prevLevel + (size.width / zoomRect.width + size.height / zoomRect.height) / 2);\n        zoomCalculationFactor = zoomCalculationFactor >= minZoom && zoomCalculationFactor <= maxZoom ? zoomCalculationFactor : maxZoom;\n        map.zoomSettings.zoomFactor = zoomCalculationFactor;\n        this.getTileTranslatePosition(prevLevel, zoomCalculationFactor, {\n          x: x,\n          y: y\n        });\n        map.tileZoomLevel = zoomCalculationFactor;\n        map.translatePoint.x = (map.tileTranslatePoint.x - 0.5 * Math.pow(2, zoomCalculationFactor)) / Math.pow(2, zoomCalculationFactor);\n        map.translatePoint.y = (map.tileTranslatePoint.y - 0.5 * Math.pow(2, zoomCalculationFactor)) / Math.pow(2, zoomCalculationFactor);\n        map.scale = Math.pow(2, zoomCalculationFactor);\n        this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n        map.mapLayerPanel.generateTiles(zoomCalculationFactor, map.tileTranslatePoint);\n      }\n\n      map.mapScaleValue = zoomCalculationFactor;\n      this.applyTransform(true);\n      this.maps.zoomNotApplied = false;\n      this.zoomingRect = null;\n    }\n  };\n\n  Zoom.prototype.setInteraction = function (newInteraction) {\n    this.lastScale = 1;\n    this.interaction = newInteraction;\n  };\n\n  Zoom.prototype.updateInteraction = function () {\n    if (this.fingers === 2) {\n      this.setInteraction('zoom');\n    } else {\n      this.setInteraction(null);\n    }\n  };\n\n  Zoom.prototype.performPinchZooming = function (e) {\n    var map = this.maps;\n    var prevLevel = map.tileZoomLevel;\n    var availSize = map.mapAreaRect;\n    map.previousScale = map.scale;\n    map.previousPoint = map.translatePoint;\n    var prevTilePoint = map.tileTranslatePoint;\n    var scale = calculateScale(this.touchStartList, this.touchMoveList);\n    var touchCenter = getTouchCenter(getTouches(this.touchMoveList, this.maps));\n    var newScale = scale / this.lastScale;\n    this.lastScale = scale;\n    this.pinchFactor *= newScale;\n    this.pinchFactor = Math.min(this.maps.zoomSettings.maxZoom, Math.max(this.pinchFactor, this.maps.zoomSettings.minZoom));\n    var zoomCalculationFactor = this.pinchFactor;\n    var zoomArgs;\n\n    if (!map.isTileMap) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var minBounds = map.baseMapRectBounds['min']; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var maxBounds = map.baseMapRectBounds['max'];\n      var mapTotalHeight = Math.abs(minBounds['y'] - maxBounds['y']);\n      var mapTotalWidth = Math.abs(minBounds['x'] - maxBounds['x']);\n      var translatePoint = map.translatePoint;\n      var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * zoomCalculationFactor;\n      var translatePointX = translatePoint.x - (availSize.width / map.scale - availSize.width / zoomCalculationFactor) / (availSize.width / touchCenter.x);\n      var translatePointY = translatePoint.y - (availSize.height / map.scale - availSize.height / zoomCalculationFactor) / (availSize.height / touchCenter.y);\n      translatePointX = currentHeight < map.mapAreaRect.height ? availSize.x + (-minBounds['x'] + (availSize.width / 2 - mapTotalWidth / 2)) : translatePointX;\n      translatePointY = currentHeight < map.mapAreaRect.height ? availSize.y + (-minBounds['y'] + (availSize.height / 2 - mapTotalHeight / 2)) : translatePointY;\n      map.translatePoint = new Point(translatePointX, translatePointY);\n      map.scale = zoomCalculationFactor;\n      this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n    } else {\n      var newTileFactor = zoomCalculationFactor;\n      this.getTileTranslatePosition(prevLevel, newTileFactor, {\n        x: touchCenter.x,\n        y: touchCenter.y\n      });\n      map.tileZoomLevel = newTileFactor;\n      map.translatePoint.x = (map.tileTranslatePoint.x - 0.5 * Math.pow(2, newTileFactor)) / Math.pow(2, newTileFactor);\n      map.translatePoint.y = (map.tileTranslatePoint.y - 0.5 * Math.pow(2, newTileFactor)) / Math.pow(2, newTileFactor);\n      map.scale = Math.pow(2, newTileFactor);\n      this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n      map.mapLayerPanel.generateTiles(newTileFactor, map.tileTranslatePoint);\n    }\n\n    this.applyTransform();\n  };\n\n  Zoom.prototype.drawZoomRectangle = function () {\n    var map = this.maps;\n    var down = this.mouseDownPoints;\n    var move = this.mouseMovePoints; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var border = {\n      width: 1,\n      color: '#009900'\n    };\n    var width = Math.abs(move.x - down.x);\n    var height = Math.abs(move.y - down.y);\n    var x = move.x > down.x ? down.x : down.x - width;\n    var y = move.y > down.y ? down.y : down.y - height;\n    var elementRect = getElementByID(map.element.id).getBoundingClientRect();\n\n    if (x > map.mapAreaRect.x && x < map.mapAreaRect.x + map.mapAreaRect.width && y > map.mapAreaRect.y && y < map.mapAreaRect.y + map.mapAreaRect.height) {\n      this.zoomingRect = new Rect(x, y, width, height);\n      var rectSVGObject = map.renderer.createSvg({\n        id: map.element.id + '_Selection_Rect_Zooming',\n        width: map.availableSize.width,\n        height: map.availableSize.height\n      });\n      var rectOption = new RectOption(map.element.id + '_ZoomRect', '#d3d3d3', border, 0.5, this.zoomingRect, 0, 0, '', '3');\n      rectSVGObject.appendChild(map.renderer.drawRectangle(rectOption));\n      getElementByID(map.element.id + '_Secondary_Element').appendChild(rectSVGObject);\n    }\n  };\n  /**\n   * To animate the zooming process\n   *\n   * @param {Element} element - Specifies the element\n   * @param {boolean} animate - Specifies the boolean value\n   * @param {number} x - Specifies the x value\n   * @param {number} y - Specifies the y value\n   * @param {number} scale - Specifies the scale value\n   * @returns {void}\n   */\n\n\n  Zoom.prototype.animateTransform = function (element, animate, x, y, scale) {\n    var duration = this.currentLayer.animationDuration;\n\n    if (!animate || duration === 0 || this.maps.isTileMap) {\n      element.setAttribute('transform', 'scale(' + scale + ') translate( ' + x + ' ' + y + ' )');\n      return;\n    }\n\n    if (!this.maps.isTileMap) {\n      zoomAnimate(element, 0, duration, new MapLocation(x, y), scale, this.maps.mapAreaRect, this.maps);\n    }\n  };\n\n  Zoom.prototype.applyTransform = function (animate) {\n    var layerIndex;\n    this.templateCount = 0;\n    var layer; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var zoomshapelocation;\n    var i;\n    var markerStyle;\n    var scale = this.maps.scale;\n    var x = this.maps.translatePoint.x;\n    var y = this.maps.translatePoint.y; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var collection = [];\n    this.maps.zoomShapeCollection = [];\n\n    if (document.getElementById(this.maps.element.id + '_mapsTooltip')) {\n      removeElement(this.maps.element.id + '_mapsTooltip');\n    }\n\n    if (this.layerCollectionEle) {\n      for (var i_1 = 0; i_1 < this.layerCollectionEle.childElementCount; i_1++) {\n        var layerElement = this.layerCollectionEle.childNodes[i_1];\n\n        if (layerElement.tagName === 'g') {\n          this.templateCount++;\n          this.index = layerElement.id.indexOf('_LayerIndex_') > -1 && parseFloat(layerElement.id.split('_LayerIndex_')[1].split('_')[0]);\n          this.currentLayer = this.maps.layersCollection[this.index];\n          var factor = this.maps.mapLayerPanel.calculateFactor(this.currentLayer);\n\n          for (var j = 0; j < layerElement.childElementCount; j++) {\n            var currentEle = layerElement.childNodes[j];\n\n            if (!(currentEle.id.indexOf('_Markers_Group') > -1) && !(currentEle.id.indexOf('_bubble_Group') > -1) && !(currentEle.id.indexOf('_dataLableIndex_Group') > -1)) {\n              if (this.maps.isTileMap && currentEle.id.indexOf('_line_Group') > -1) {\n                currentEle.remove();\n\n                if (layerElement.children.length > 0 && layerElement.children[0]) {\n                  layerElement.insertBefore(this.maps.navigationLineModule.renderNavigation(this.currentLayer, this.maps.tileZoomLevel, this.index), layerElement.children[0]);\n                } else {\n                  layerElement.appendChild(this.maps.navigationLineModule.renderNavigation(this.currentLayer, this.maps.tileZoomLevel, this.index));\n                }\n              } else {\n                changeBorderWidth(currentEle, this.index, scale, this.maps);\n                this.maps.zoomTranslatePoint = this.maps.translatePoint;\n                this.animateTransform(currentEle, animate, x, y, scale);\n                this.shapeZoomLocation = currentEle.childNodes;\n              }\n            } else if (currentEle.id.indexOf('_Markers_Group') > -1) {\n              if (!this.isPanning) {\n                this.markerTranslates(currentEle.childNodes[0], factor, x, y, scale, 'Marker', layerElement, animate);\n              }\n\n              currentEle = layerElement.childNodes[j];\n              var markerAnimation = void 0;\n\n              if (!isNullOrUndefined(currentEle) && currentEle.id.indexOf('Markers') !== -1) {\n                for (var k = 0; k < currentEle.childElementCount; k++) {\n                  this.markerTranslate(currentEle.childNodes[k], factor, x, y, scale, 'Marker', animate);\n                  var layerIndex_1 = parseInt(currentEle.childNodes[k]['id'].split('_LayerIndex_')[1].split('_')[0], 10);\n                  var dataIndex = parseInt(currentEle.childNodes[k]['id'].split('_dataIndex_')[1].split('_')[0], 10);\n                  var markerIndex = parseInt(currentEle.childNodes[k]['id'].split('_MarkerIndex_')[1].split('_')[0], 10);\n                  markerAnimation = this.currentLayer.markerSettings[markerIndex].animationDuration > 0; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n                  var markerSelectionValues = this.currentLayer.markerSettings[markerIndex].dataSource[dataIndex];\n\n                  for (var x_1 = 0; x_1 < this.currentLayer.markerSettings[markerIndex].initialMarkerSelection.length; x_1++) {\n                    if (this.currentLayer.markerSettings[markerIndex].initialMarkerSelection[x_1]['latitude'] === markerSelectionValues['latitude'] || this.currentLayer.markerSettings[markerIndex].initialMarkerSelection[x_1]['longitude'] === markerSelectionValues['longitude']) {\n                      this.maps.markerSelection(this.currentLayer.markerSettings[markerIndex].selectionSettings, this.maps, currentEle.children[k], this.currentLayer.markerSettings[markerIndex].dataSource[dataIndex]);\n                    }\n                  }\n\n                  if ((this.currentLayer.animationDuration > 0 || this.maps.layersCollection[0].animationDuration > 0 && this.currentLayer.type === 'SubLayer') && !this.isPanning) {\n                    if (this.maps.isTileMap) {\n                      var groupElement = document.querySelector('.GroupElement');\n\n                      if (groupElement && !document.querySelector('.ClusterGroupElement') && markerAnimation) {\n                        groupElement.style.display = 'none';\n                      }\n                    } else {\n                      markerStyle = 'visibility:hidden';\n                      currentEle.setAttribute('style', markerStyle);\n                    }\n                  }\n                }\n\n                if (this.isPanning && this.maps.markerModule.sameMarkerData.length > 0) {\n                  clusterSeparate(this.maps.markerModule.sameMarkerData, this.maps, currentEle, true);\n                } else if (this.maps.markerModule.sameMarkerData.length > 0) {\n                  this.maps.markerModule.sameMarkerData = [];\n\n                  if (document.getElementById(this.maps.element.id + '_mapsTooltip')) {\n                    removeElement(this.maps.element.id + '_mapsTooltip');\n                  }\n                }\n\n                if (document.getElementById(this.maps.element.id + '_mapsTooltip') && this.maps.mapsTooltipModule.tooltipTargetID.indexOf('_MarkerIndex_') && !this.isPanning) {\n                  var mapsTooltip = this.maps.mapsTooltipModule;\n                  var tooltipElement = currentEle.querySelector('#' + mapsTooltip.tooltipTargetID);\n\n                  if (!isNullOrUndefined(tooltipElement)) {\n                    if (tooltipElement['style']['visibility'] === 'hidden') {\n                      removeElement(this.maps.element.id + '_mapsTooltip');\n                    } else {\n                      var x_2 = parseFloat(tooltipElement.getAttribute('transform').split('(')[1].split(')')[0].split(' ')[1]);\n                      var y_1 = parseFloat(tooltipElement.getAttribute('transform').split('(')[1].split(')')[0].split(' ')[2]);\n\n                      if (this.maps.isTileMap) {\n                        x_2 += +getElement(this.maps.element.id + '_tile_parent')['style']['left'].split('px')[0];\n                        y_1 += +getElement(this.maps.element.id + '_tile_parent')['style']['top'].split('px')[0];\n                      }\n\n                      mapsTooltip.svgTooltip.location.x = x_2;\n                      mapsTooltip.svgTooltip.location.y = y_1;\n                      mapsTooltip.svgTooltip.enableAnimation = false;\n                    }\n                  }\n                }\n              }\n            } else if (currentEle.id.indexOf('_bubble_Group') > -1) {\n              var childElement = void 0;\n\n              for (var k = 0; k < currentEle.childElementCount; k++) {\n                childElement = currentEle.childNodes[k];\n                var bubbleTransform = childElement.getAttribute('transform');\n                layerIndex = parseFloat(childElement.id.split('_LayerIndex_')[1].split('_')[0]);\n                var bubleIndex = parseFloat(childElement.id.split('_BubbleIndex_')[1].split('_')[0]);\n                var dataIndex = parseFloat(childElement.id.split('_BubbleIndex_')[1].split('_')[2]);\n\n                for (var l = 0; l < this.maps.bubbleModule.bubbleCollection.length; l++) {\n                  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                  var bubbleCollection = this.maps.bubbleModule.bubbleCollection[l];\n\n                  if (bubbleCollection['LayerIndex'] === layerIndex && bubbleCollection['BubbleIndex'] === bubleIndex && bubbleCollection['DataIndex'] === dataIndex) {\n                    var centerX = bubbleCollection['center']['x'];\n                    var centerY = bubbleCollection['center']['y'];\n                    var currentX = (centerX + x) * scale;\n                    var currentY = (centerY + y) * scale;\n                    var duration = this.currentLayer.animationDuration;\n\n                    if (!animate || duration === 0) {\n                      childElement.setAttribute('transform', 'translate( ' + currentX + ' ' + currentY + ' )');\n                    } else {\n                      smoothTranslate(childElement, 0, duration, new MapLocation(currentX, currentY));\n                    }\n\n                    break;\n                  }\n                }\n              }\n            } else if (currentEle.id.indexOf('_dataLableIndex_Group') > -1) {\n              this.intersect = [];\n              this.maps.zoomLabelPositions = [];\n              this.maps.zoomLabelPositions = this.maps.dataLabelModule.dataLabelCollections;\n\n              for (var k = 0; k < currentEle.childElementCount; k++) {\n                if (currentEle.childNodes[k]['id'].indexOf('_LabelIndex_') > -1) {\n                  var labelIndex = parseFloat(currentEle.childNodes[k]['id'].split('_LabelIndex_')[1].split('_')[0]);\n                  this.zoomshapewidth = this.shapeZoomLocation[labelIndex].getBoundingClientRect();\n                  this.maps.zoomShapeCollection.push(this.zoomshapewidth);\n                  this.dataLabelTranslate(currentEle.childNodes[k], factor, x, y, scale, 'DataLabel', animate);\n                  var dataLabel = this.maps.layers[this.index].dataLabelSettings;\n                  var border = dataLabel.border;\n\n                  if (k > 0 && border['width'] > 1) {\n                    if (currentEle.childNodes[k - 1]['id'].indexOf('_rectIndex_') > -1) {\n                      var labelX = (this.maps.zoomLabelPositions[labelIndex]['location']['x'] + x) * scale;\n                      var labelY = (this.maps.zoomLabelPositions[labelIndex]['location']['y'] + y) * scale;\n                      var zoomtext = currentEle.childNodes[k]['innerHTML'];\n                      var style = this.maps.layers[this.index].dataLabelSettings.textStyle;\n                      var zoomtextSize = measureText(zoomtext, style);\n                      var padding = 5;\n                      var rectElement = currentEle.childNodes[k - 1];\n                      var rectX = labelX - zoomtextSize['width'] / 2;\n                      var rectY = labelY - zoomtextSize['height'] / 2 - padding;\n                      rectElement['setAttribute']('x', rectX);\n                      rectElement['setAttribute']('y', rectY);\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n\n        this.maps.arrangeTemplate();\n      }\n\n      if (!isNullOrUndefined(this.currentLayer)) {\n        if (!animate || this.currentLayer.animationDuration === 0 || this.maps.isTileMap) {\n          this.processTemplate(x, y, scale, this.maps);\n        }\n      }\n    }\n  };\n\n  Zoom.prototype.markerTranslates = function (element, factor, x, y, scale, type, layerElement, animate) {\n    var _this = this;\n\n    if (animate === void 0) {\n      animate = false;\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var templateFn;\n    var nullCount = 0;\n    var markerCounts = 0;\n    var markerTemplateCounts = 0;\n    var layerIndex = parseInt((element ? element : layerElement).id.split('_LayerIndex_')[1].split('_')[0], 10);\n    var markerSVGObject = this.maps.renderer.createGroup({\n      id: this.maps.element.id + '_Markers_Group',\n      class: 'GroupElement',\n      style: 'pointer-events: auto;'\n    });\n\n    if (document.getElementById(markerSVGObject.id)) {\n      removeElement(markerSVGObject.id);\n    }\n\n    var mapsAreaRect = this.maps.mapAreaRect;\n    var markerTemplateElements = createElement('div', {\n      id: this.maps.element.id + '_LayerIndex_' + layerIndex + '_Markers_Template_Group',\n      className: 'template',\n      styles: 'overflow: hidden; position: absolute;pointer-events: none;' + 'top:' + mapsAreaRect.y + 'px;' + 'left:' + mapsAreaRect.x + 'px;' + 'height:' + mapsAreaRect.height + 'px;' + 'width:' + mapsAreaRect.width + 'px;'\n    });\n\n    if (document.getElementById(markerTemplateElements.id)) {\n      removeElement(markerTemplateElements.id);\n    }\n\n    var currentLayers = this.maps.layersCollection[layerIndex];\n    currentLayers.markerSettings.map(function (markerSettings, markerIndex) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var markerDatas = markerSettings.dataSource; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      Array.prototype.forEach.call(markerDatas, function (data, dataIndex) {\n        _this.maps.markerNullCount = markerIndex >= 0 && dataIndex === 0 ? 0 : _this.maps.markerNullCount;\n        var eventArgs = {\n          template: markerSettings.template,\n          data: data,\n          maps: _this.maps,\n          marker: markerSettings,\n          cancel: false,\n          name: markerRendering,\n          fill: markerSettings.fill,\n          colorValuePath: markerSettings.colorValuePath,\n          shapeValuePath: markerSettings.shapeValuePath,\n          height: markerSettings.height,\n          width: markerSettings.width,\n          imageUrl: markerSettings.imageUrl,\n          imageUrlValuePath: markerSettings.imageUrlValuePath,\n          shape: markerSettings.shape,\n          border: markerSettings.border\n        };\n        eventArgs = markerShapeChoose(eventArgs, data);\n        eventArgs = markerColorChoose(eventArgs, data);\n\n        _this.maps.trigger('markerRendering', eventArgs, function (MarkerArgs) {\n          if (markerSettings.shapeValuePath !== eventArgs.shapeValuePath) {\n            eventArgs = markerShapeChoose(eventArgs, data);\n          }\n\n          if (markerSettings.colorValuePath !== eventArgs.colorValuePath) {\n            eventArgs = markerColorChoose(eventArgs, data);\n          }\n\n          var lati = !isNullOrUndefined(markerSettings.latitudeValuePath) ? Number(getValueFromObject(data, markerSettings.latitudeValuePath)) : !isNullOrUndefined(data['latitude']) ? parseFloat(data['latitude']) : !isNullOrUndefined(data['Latitude']) ? data['Latitude'] : 0;\n          var long = !isNullOrUndefined(markerSettings.longitudeValuePath) ? Number(getValueFromObject(data, markerSettings.longitudeValuePath)) : !isNullOrUndefined(data['longitude']) ? parseFloat(data['longitude']) : !isNullOrUndefined(data['Longitude']) ? data['Longitude'] : 0;\n          var offset = markerSettings.offset;\n\n          if (!eventArgs.cancel && markerSettings.visible && !isNullOrUndefined(long) && !isNullOrUndefined(lati)) {\n            var markerID = _this.maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + dataIndex;\n            var location_1 = _this.maps.isTileMap ? convertTileLatLongToPoint(new MapLocation(long, lati), _this.maps.tileZoomLevel, _this.maps.tileTranslatePoint, true) : convertGeoToPoint(lati, long, factor, currentLayers, _this.maps);\n            var animate_1 = currentLayers.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n            var transPoint = {\n              x: x,\n              y: y\n            };\n\n            if (eventArgs.template && !isNaN(location_1.x) && !isNaN(location_1.y)) {\n              markerTemplateCounts++;\n              markerTemplate(eventArgs, templateFn, markerID, data, markerIndex, markerTemplateElements, location_1, transPoint, scale, offset, _this.maps);\n            } else if (!eventArgs.template && !isNaN(location_1.x) && !isNaN(location_1.y)) {\n              markerCounts++;\n              marker(eventArgs, markerSettings, markerDatas, dataIndex, location_1, transPoint, markerID, offset, scale, _this.maps, markerSVGObject);\n            }\n          }\n\n          nullCount += !isNaN(lati) && !isNaN(long) ? 0 : 1;\n          markerTemplateCounts += eventArgs.cancel ? 1 : 0;\n          markerCounts += eventArgs.cancel ? 1 : 0;\n          _this.maps.markerNullCount = !isNullOrUndefined(lati) || !isNullOrUndefined(long) ? _this.maps.markerNullCount : _this.maps.markerNullCount + 1;\n          var markerDataLength = markerDatas.length - _this.maps.markerNullCount;\n\n          if (markerSVGObject.childElementCount === markerDatas.length - markerTemplateCounts - nullCount && type !== 'Template') {\n            layerElement.appendChild(markerSVGObject);\n\n            if (currentLayers.markerClusterSettings.allowClustering) {\n              _this.maps.svgObject.appendChild(markerSVGObject);\n\n              _this.maps.element.appendChild(_this.maps.svgObject);\n\n              clusterTemplate(currentLayers, markerSVGObject, _this.maps, layerIndex, markerSVGObject, layerElement, true, true);\n            }\n          }\n\n          if (markerTemplateElements.childElementCount === markerDatas.length - markerCounts - nullCount && getElementByID(_this.maps.element.id + '_Secondary_Element')) {\n            getElementByID(_this.maps.element.id + '_Secondary_Element').appendChild(markerTemplateElements);\n\n            if (scale >= 1) {\n              if (currentLayers.markerClusterSettings.allowClustering) {\n                clusterTemplate(currentLayers, markerTemplateElements, _this.maps, layerIndex, markerSVGObject, layerElement, false, true);\n              }\n            }\n          }\n        });\n      });\n    });\n  };\n  /**\n   * To translate the layer template elements\n   *\n   * @param {number} x - Specifies the x value\n   * @param {number} y - Specifies the y value\n   * @param {number} scale - Specifies the scale value\n   * @param {Maps} maps - Specifies the maps value\n   * @returns {void}\n   * @private\n   */\n\n\n  Zoom.prototype.processTemplate = function (x, y, scale, maps) {\n    for (var i = 0; i < this.templateCount; i++) {\n      var factor = maps.mapLayerPanel.calculateFactor(this.currentLayer);\n      var markerTemplateElement = getElementByID(maps.element.id + '_LayerIndex_' + i + '_Markers_Template_Group');\n      var datalabelTemplateElemement = getElementByID(maps.element.id + '_LayerIndex_' + i + '_Label_Template_Group');\n\n      if (!isNullOrUndefined(markerTemplateElement) && markerTemplateElement.childElementCount > 0) {\n        for (var k = 0; k < markerTemplateElement.childElementCount; k++) {\n          this.markerTranslate(markerTemplateElement.childNodes[k], factor, x, y, scale, 'Template');\n        }\n      }\n\n      if (!isNullOrUndefined(datalabelTemplateElemement) && datalabelTemplateElemement.childElementCount > 0) {\n        for (var k = 0; k < datalabelTemplateElemement.childElementCount; k++) {\n          this.dataLabelTranslate(datalabelTemplateElemement.childNodes[k], factor, x, y, scale, 'Template');\n        }\n      }\n    }\n  };\n\n  Zoom.prototype.dataLabelTranslate = function (element, factor, x, y, scale, type, animate) {\n    if (animate === void 0) {\n      animate = false;\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var labelCollection = this.maps.dataLabelModule.dataLabelCollections; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var zoomelement = element.getBoundingClientRect();\n    var text;\n    var trimmedLable;\n    var style = this.maps.layers[this.index].dataLabelSettings.textStyle;\n    var zoomtext;\n    var zoomtextSize;\n    var zoomtrimLabel;\n    var labelPath = this.maps.layers[this.index].dataLabelSettings.labelPath;\n    var layerIndex = parseFloat(element.id.split('_LayerIndex_')[1].split('_')[0]);\n    var shapeIndex = parseFloat(element.id.split('_shapeIndex_')[1].split('_')[0]);\n    var labelIndex;\n\n    if (element.id.indexOf('_LabelIndex_') > -1) {\n      labelIndex = parseFloat(element.id.split('_LabelIndex_')[1].split('_')[0]);\n    }\n\n    var duration = this.currentLayer.animationDuration;\n\n    for (var l = 0; l < labelCollection.length; l++) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var label = labelCollection[l];\n\n      if (label['layerIndex'] === layerIndex && label['shapeIndex'] === shapeIndex && label['labelIndex'] === labelIndex) {\n        var labelX = label['location']['x'];\n        var labelY = label['location']['y'];\n\n        if (type === 'Template') {\n          var layerEle = getElementByID(this.maps.element.id + '_Layer_Collections');\n          labelX = Math.abs(this.maps.baseMapRectBounds['min']['x'] - labelX) * scale;\n          labelY = Math.abs(this.maps.baseMapRectBounds['min']['y'] - labelY) * scale;\n          var templateOffset = element.getBoundingClientRect();\n          var layerOffset = layerEle.getBoundingClientRect();\n          var elementOffset = element.parentElement.getBoundingClientRect();\n          var x_3 = labelX + (layerOffset.left - elementOffset.left) - templateOffset.width / 2;\n          var y_2 = labelY + (layerOffset.top - elementOffset.top) - templateOffset.height / 2;\n          element.style.left = x_3 + 'px';\n          element.style.top = y_2 + 'px';\n        } else {\n          labelX = (labelX + x) * scale;\n          labelY = (labelY + y) * scale;\n          zoomtext = label['dataLabelText'];\n          zoomtextSize = measureText(zoomtext, style);\n          var start = labelY - zoomtextSize['height'] / 4;\n          var end = labelY + zoomtextSize['height'] / 4;\n          var xpositionEnds = labelX + zoomtextSize['width'] / 2;\n          var xpositionStart = labelX - zoomtextSize['width'] / 2; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n          var textLocations = {\n            rightWidth: xpositionEnds,\n            leftWidth: xpositionStart,\n            heightTop: start,\n            heightBottom: end\n          };\n\n          if (!animate || duration === 0) {\n            element.setAttribute('transform', 'translate( ' + labelX + ' ' + labelY + ' )');\n          }\n\n          if (this.maps.layers[this.index].dataLabelSettings.smartLabelMode === 'Hide') {\n            if (scale > 1) {\n              text = this.zoomshapewidth['width'] >= zoomtextSize['width'] ? zoomtext : '';\n              element.innerHTML = text;\n            } else {\n              text = this.maps.dataLabelShape[l] >= zoomtextSize['width'] ? zoomtext : '';\n              element.innerHTML = text;\n            }\n          }\n\n          if (this.maps.layers[this.index].dataLabelSettings.smartLabelMode === 'Trim') {\n            if (scale > 1) {\n              zoomtrimLabel = textTrim(this.zoomshapewidth['width'], zoomtext, style);\n              text = zoomtrimLabel;\n              element.innerHTML = text;\n            } else {\n              zoomtrimLabel = textTrim(this.maps.dataLabelShape[l], zoomtext, style);\n              text = zoomtrimLabel;\n              element.innerHTML = text;\n            }\n          }\n\n          if (this.maps.layers[this.index].dataLabelSettings.intersectionAction === 'Hide') {\n            for (var m = 0; m < this.intersect.length; m++) {\n              if (!isNullOrUndefined(this.intersect[m])) {\n                if (textLocations['leftWidth'] > this.intersect[m]['rightWidth'] || textLocations['rightWidth'] < this.intersect[m]['leftWidth'] || textLocations['heightTop'] > this.intersect[m]['heightBottom'] || textLocations['heightBottom'] < this.intersect[m]['heightTop']) {\n                  text = !isNullOrUndefined(text) ? text : zoomtext;\n                  element.innerHTML = text;\n                } else {\n                  text = '';\n                  element.innerHTML = text;\n                  break;\n                }\n              }\n            }\n\n            this.intersect.push(textLocations);\n          }\n\n          if (this.maps.layers[this.index].dataLabelSettings.intersectionAction === 'Trim') {\n            for (var j = 0; j < this.intersect.length; j++) {\n              if (!isNullOrUndefined(this.intersect[j])) {\n                if (textLocations['rightWidth'] < this.intersect[j]['leftWidth'] || textLocations['leftWidth'] > this.intersect[j]['rightWidth'] || textLocations['heightBottom'] < this.intersect[j]['heightTop'] || textLocations['heightTop'] > this.intersect[j]['heightBottom']) {\n                  trimmedLable = !isNullOrUndefined(text) ? text : zoomtext;\n\n                  if (scale > 1) {\n                    trimmedLable = textTrim(this.zoomshapewidth['width'], trimmedLable, style);\n                  }\n\n                  element.innerHTML = trimmedLable;\n                } else {\n                  if (textLocations['leftWidth'] > this.intersect[j]['leftWidth']) {\n                    var width = this.intersect[j]['rightWidth'] - textLocations['leftWidth'];\n                    var difference = width - (textLocations['rightWidth'] - textLocations['leftWidth']);\n                    text = !isNullOrUndefined(text) ? text : zoomtext;\n                    trimmedLable = textTrim(difference, text, style);\n                    element.innerHTML = trimmedLable;\n                    break;\n                  }\n\n                  if (textLocations['leftWidth'] < this.intersect[j]['leftWidth']) {\n                    var width = textLocations['rightWidth'] - this.intersect[j]['leftWidth'];\n                    var difference = Math.abs(width - (textLocations['rightWidth'] - textLocations['leftWidth']));\n                    text = !isNullOrUndefined(text) ? text : zoomtext;\n                    trimmedLable = textTrim(difference, text, style);\n                    element.innerHTML = trimmedLable;\n                    break;\n                  }\n                }\n              }\n            }\n\n            this.intersect.push(textLocations);\n\n            if (isNullOrUndefined(trimmedLable)) {\n              trimmedLable = textTrim(this.zoomshapewidth['width'], zoomtext, style);\n              element.innerHTML = trimmedLable;\n            }\n          } else {\n            smoothTranslate(element, 0, duration, new MapLocation(labelX, labelY));\n          }\n        }\n      }\n    }\n  };\n\n  Zoom.prototype.markerTranslate = function (element, factor, x, y, scale, type, animate) {\n    if (animate === void 0) {\n      animate = false;\n    }\n\n    var layerIndex = parseInt(element.id.split('_LayerIndex_')[1].split('_')[0], 10);\n    var markerIndex = parseInt(element.id.split('_MarkerIndex_')[1].split('_')[0], 10);\n    var dataIndex = parseInt(element.id.split('_dataIndex_')[1].split('_')[0], 10);\n    var layer = this.maps.layersCollection[layerIndex];\n    var marker = layer.markerSettings[markerIndex];\n\n    if (!isNullOrUndefined(marker) && !isNullOrUndefined(marker.dataSource) && !isNullOrUndefined(marker.dataSource[dataIndex])) {\n      var lng = !isNullOrUndefined(marker.longitudeValuePath) ? Number(getValueFromObject(marker.dataSource[dataIndex], marker.longitudeValuePath)) : !isNullOrUndefined(marker.dataSource[dataIndex]['longitude']) ? parseFloat(marker.dataSource[dataIndex]['longitude']) : !isNullOrUndefined(marker.dataSource[dataIndex]['Latitude']) ? parseFloat(marker.dataSource[dataIndex]['Latitude']) : 0;\n      var lat = !isNullOrUndefined(marker.latitudeValuePath) ? Number(getValueFromObject(marker.dataSource[dataIndex], marker.latitudeValuePath)) : !isNullOrUndefined(marker.dataSource[dataIndex]['latitude']) ? parseFloat(marker.dataSource[dataIndex]['latitude']) : !isNullOrUndefined(marker.dataSource[dataIndex]['Latitude']) ? parseFloat(marker.dataSource[dataIndex]['Latitude']) : 0;\n      var duration = this.currentLayer.animationDuration;\n      var location_2 = this.maps.isTileMap ? convertTileLatLongToPoint(new Point(lng, lat), this.maps.tileZoomLevel, this.maps.tileTranslatePoint, true) : convertGeoToPoint(lat, lng, factor, layer, this.maps);\n\n      if (this.maps.isTileMap) {\n        if (type === 'Template') {\n          var templateOffset = element.getBoundingClientRect();\n          element.style.left = location_2.x - templateOffset.width / 2 + marker.offset.x + 'px';\n          element.style.top = location_2.y - templateOffset.height / 2 + marker.offset.y + 'px';\n\n          if (this.maps.layers[this.maps.baseLayerIndex].layerType === 'GoogleStaticMap') {\n            var staticMapOffset = getElementByID(this.maps.element.id + '_StaticGoogleMap').getBoundingClientRect();\n            var staticMapOffsetWidth = 640;\n\n            if (element['style']['display'] !== 'none') {\n              if ((staticMapOffset['x'] > templateOffset['x'] || staticMapOffset['x'] + staticMapOffsetWidth < templateOffset['x'] + templateOffset['width']) && (staticMapOffset['y'] > templateOffset['y'] || staticMapOffset['y'] + staticMapOffset['height'] < templateOffset['y'] + templateOffset['height'])) {\n                element['style']['display'] = 'none';\n              } else if (staticMapOffset['x'] > templateOffset['x'] || staticMapOffset['x'] + staticMapOffsetWidth < templateOffset['x'] + templateOffset['width']) {\n                element['style']['display'] = 'none';\n              }\n            }\n          }\n        } else {\n          location_2.x += marker.offset.x;\n          location_2.y += marker.offset.y;\n          element.setAttribute('transform', 'translate( ' + location_2.x + ' ' + location_2.y + ' )');\n        }\n      } else {\n        if (type === 'Template') {\n          if (duration > 0) {\n            location_2.x = Math.abs(this.maps.baseMapRectBounds['min']['x'] - location_2.x) * scale;\n            location_2.y = Math.abs(this.maps.baseMapRectBounds['min']['y'] - location_2.y) * scale;\n            var layerOffset = getElementByID(this.maps.element.id + '_Layer_Collections').getBoundingClientRect();\n            var elementOffset = element.parentElement.getBoundingClientRect();\n            element.style.left = location_2.x + (layerOffset.left - elementOffset.left) + marker.offset.x + 'px';\n            element.style.top = location_2.y + (layerOffset.top - elementOffset.top) + marker.offset.y + 'px';\n            element.style.transform = 'translate(-50%, -50%)';\n          } else {\n            var elementOffset = element.getBoundingClientRect();\n            element.style.left = (location_2.x + x) * scale + marker.offset.x - this.maps.mapAreaRect.x - elementOffset.width / 2 + 'px';\n            element.style.top = (location_2.y + y) * scale + marker.offset.y - this.maps.mapAreaRect.y - elementOffset.height / 2 + 'px';\n          }\n        } else {\n          location_2.x = (location_2.x + x) * scale + marker.offset.x;\n          location_2.y = (location_2.y + y) * scale + marker.offset.y;\n\n          if (!animate || duration === 0) {\n            element.setAttribute('transform', 'translate( ' + location_2.x + ' ' + location_2.y + ' )');\n          } else {\n            smoothTranslate(element, 0, duration, location_2);\n          }\n        }\n      }\n    }\n  };\n\n  Zoom.prototype.markerLineAnimation = function (map) {\n    if (map.isTileMap) {\n      for (var i = 0; i < map.layersCollection.length; i++) {\n        var markerTemplateElement = getElementByID(this.maps.element.id + '_LayerIndex_' + i + '_Markers_Template_Group');\n        var lineElement = getElementByID(this.maps.element.id + '_LayerIndex_' + i + '_line_Group');\n\n        if (!isNullOrUndefined(markerTemplateElement)) {\n          markerTemplateElement.style.visibility = 'hidden';\n        }\n\n        if (!isNullOrUndefined(lineElement)) {\n          lineElement.style.visibility = 'hidden';\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Zoom.prototype.panning = function (direction, xDifference, yDifference, mouseLocation) {\n    var map = this.maps;\n    var panArgs;\n    var down = this.mouseDownPoints;\n    var move = this.mouseMovePoints;\n    var scale = map.scale;\n    map.markerZoomedState = false;\n    map.zoomPersistence = map.enablePersistence;\n    map.defaultState = false;\n    map.initialCheck = false;\n    var translatePoint = map.translatePoint;\n    var prevTilePoint = map.tileTranslatePoint;\n    var x;\n    var y;\n    xDifference = !isNullOrUndefined(xDifference) ? xDifference : down.x - move.x;\n    yDifference = !isNullOrUndefined(yDifference) ? yDifference : down.y - move.y;\n    this.maps.mergeCluster();\n\n    if (!map.isTileMap) {\n      var legendElement = document.getElementById(map.element.id + '_Legend_Group');\n      var legendHeight = !isNullOrUndefined(legendElement) ? legendElement.getClientRects()[0].height : 0;\n      x = translatePoint.x - xDifference / scale;\n      y = translatePoint.y - yDifference / scale;\n      var layerRect = getElementByID(map.element.id + '_Layer_Collections').getBoundingClientRect();\n      var elementRect = getElementByID(map.element.id + '_svg').getBoundingClientRect();\n      var panningXDirection = xDifference < 0 ? layerRect.left <= elementRect.left + map.mapAreaRect.x : layerRect.left + layerRect.width >= elementRect.left + elementRect.width + map.mapAreaRect.x + map.margin.left;\n      var panningYDirection = yDifference < 0 ? layerRect.top <= elementRect.top + map.mapAreaRect.y : layerRect.top + layerRect.height + legendHeight + map.margin.top >= elementRect.top + elementRect.height; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var location_3 = this.maps.getGeoLocation(this.maps.layersCollection.length - 1, mouseLocation['layerX'], mouseLocation['layerY']);\n      panArgs = {\n        cancel: false,\n        name: pan,\n        maps: map,\n        tileTranslatePoint: {},\n        translatePoint: {\n          previous: translatePoint,\n          current: new Point(x, y)\n        },\n        scale: map.scale,\n        tileZoomLevel: map.tileZoomLevel,\n        latitude: location_3['latitude'],\n        longitude: location_3['longitude']\n      };\n      map.trigger(pan, panArgs);\n\n      if (!panArgs.cancel) {\n        if (panningXDirection && panningYDirection) {\n          map.translatePoint = new Point(x, y);\n          this.applyTransform();\n        } else if (panningXDirection) {\n          map.translatePoint = new Point(x, map.translatePoint.y);\n          this.applyTransform();\n        } else if (panningYDirection) {\n          map.translatePoint = new Point(map.translatePoint.x, y);\n          this.applyTransform();\n        }\n      }\n\n      this.maps.zoomNotApplied = false;\n    } else if (this.maps.tileZoomLevel > 1) {\n      x = map.tileTranslatePoint.x - xDifference;\n      y = map.tileTranslatePoint.y - yDifference;\n      this.distanceX = x - map.tileTranslatePoint.x;\n      this.distanceY = y - map.tileTranslatePoint.y;\n      map.tileTranslatePoint.x = x;\n      map.tileTranslatePoint.y = y;\n\n      if (map.tileTranslatePoint.y > -10 && yDifference < 0 || map.tileTranslatePoint.y < -((Math.pow(2, this.maps.tileZoomLevel) - 2) * 256) && yDifference > 0) {\n        map.tileTranslatePoint.x = x + xDifference;\n        map.tileTranslatePoint.y = y + yDifference;\n      }\n\n      map.translatePoint.x = (map.tileTranslatePoint.x - xDifference) / map.scale;\n      map.translatePoint.y = (map.tileTranslatePoint.y - yDifference) / map.scale; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var location_4 = this.maps.getTileGeoLocation(mouseLocation['layerX'], mouseLocation['layerY']);\n      panArgs = {\n        cancel: false,\n        name: pan,\n        maps: map,\n        tileTranslatePoint: {\n          previous: prevTilePoint,\n          current: map.tileTranslatePoint\n        },\n        translatePoint: {\n          previous: translatePoint,\n          current: map.translatePoint\n        },\n        scale: map.scale,\n        tileZoomLevel: map.tileZoomLevel,\n        latitude: location_4['latitude'],\n        longitude: location_4['longitude']\n      };\n      map.trigger(pan, panArgs);\n      map.mapLayerPanel.generateTiles(map.tileZoomLevel, map.tileTranslatePoint, 'Pan');\n      this.applyTransform();\n    }\n\n    map.zoomTranslatePoint = map.translatePoint;\n    this.mouseDownPoints = this.mouseMovePoints;\n    this.maps.zoomNotApplied = false;\n    this.isSingleClick = false;\n  };\n\n  Zoom.prototype.toAlignSublayer = function () {\n    this.maps.translatePoint.x = !isNullOrUndefined(this.distanceX) ? this.maps.translatePoint.x - this.distanceX / this.maps.scale : this.maps.translatePoint.x;\n    this.maps.translatePoint.y = !isNullOrUndefined(this.distanceY) ? this.maps.translatePoint.y - this.distanceY / this.maps.scale : this.maps.translatePoint.y;\n    this.applyTransform(false);\n  };\n\n  Zoom.prototype.toolBarZooming = function (zoomFactor, type) {\n    var _this = this;\n\n    var map = this.maps;\n    map.initialCheck = false;\n    map.defaultState = type === 'Reset' && zoomFactor === 1 && !(map.zoomSettings.resetToInitial && map.applyZoomReset) || type === 'ZoomOut' && zoomFactor === 1;\n    var prevLevel = map.tileZoomLevel;\n    var scale = map.previousScale = map.scale;\n    map.markerZoomedState = false;\n    map.zoomPersistence = map.enablePersistence;\n    map.mapScaleValue = zoomFactor;\n    var maxZoom = map.zoomSettings.maxZoom;\n    var minZoom = map.zoomSettings.minZoom;\n    var size = map.mapAreaRect;\n    var translatePoint = map.previousPoint = map.translatePoint;\n    var prevTilePoint = map.tileTranslatePoint;\n    map.previousProjection = map.projectionType;\n    zoomFactor = type === 'ZoomOut' ? Math.round(zoomFactor) === 1 ? 1 : zoomFactor : zoomFactor;\n    zoomFactor = type === 'Reset' ? 1 : Math.round(zoomFactor) === 0 ? 1 : zoomFactor;\n    zoomFactor = minZoom > zoomFactor && type === 'ZoomIn' ? minZoom + 1 : zoomFactor;\n    var zoomArgs;\n\n    if (!map.isTileMap && (type === 'ZoomIn' ? zoomFactor >= minZoom && zoomFactor <= maxZoom : zoomFactor >= minZoom || map.isReset)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var min = map.baseMapRectBounds['min']; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      var max = map.baseMapRectBounds['max'];\n      var mapWidth = Math.abs(max['x'] - min['x']);\n      var mapHeight = Math.abs(min['y'] - max['y']);\n      var translatePointX = translatePoint.x - (size.width / scale - size.width / zoomFactor) / 2;\n      var translatePointY = translatePoint.y - (size.height / scale - size.height / zoomFactor) / 2;\n      var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * zoomFactor;\n      translatePointX = currentHeight < map.mapAreaRect.height ? size.x + (-min['x'] + (size.width / 2 - mapWidth / 2)) : translatePointX;\n      translatePointY = currentHeight < map.mapAreaRect.height ? size.y + (-min['y'] + (size.height / 2 - mapHeight / 2)) : translatePointY;\n      map.translatePoint = new Point(translatePointX, translatePointY);\n      map.zoomTranslatePoint = map.translatePoint;\n      map.scale = zoomFactor;\n      this.triggerZoomEvent(prevTilePoint, prevLevel, type);\n      this.applyTransform(true);\n    } else if (map.isTileMap && (zoomFactor >= minZoom && zoomFactor <= maxZoom || map.isReset)) {\n      var tileZoomFactor = prevLevel < minZoom && !map.isReset ? minZoom : zoomFactor;\n      map.scale = Math.pow(2, tileZoomFactor - 1);\n      map.tileZoomLevel = tileZoomFactor;\n\n      if (map.previousScale !== map.scale || map.isReset) {\n        map.zoomSettings.zoomFactor = zoomFactor;\n        var position = {\n          x: map.availableSize.width / 2,\n          y: map.availableSize.height / 2\n        };\n        this.getTileTranslatePosition(prevLevel, tileZoomFactor, position, type);\n\n        if (map.zoomSettings.resetToInitial && map.applyZoomReset && type === 'Reset' || type === 'ZoomOut' && map.zoomSettings.resetToInitial && map.applyZoomReset && tileZoomFactor <= map.initialZoomLevel) {\n          map.initialCheck = true;\n          map.zoomPersistence = false;\n          map.tileTranslatePoint.x = map.initialTileTranslate.x;\n          map.tileTranslatePoint.y = map.initialTileTranslate.y;\n          tileZoomFactor = map.tileZoomLevel = map.mapScaleValue = map.initialZoomLevel;\n        }\n\n        this.triggerZoomEvent(prevTilePoint, prevLevel, type);\n        map.translatePoint.y = (map.tileTranslatePoint.y - 0.01 * map.mapScaleValue) / map.scale;\n        map.translatePoint.x = (map.tileTranslatePoint.x - 0.01 * map.mapScaleValue) / map.scale;\n\n        if (document.getElementById(this.maps.element.id + '_LayerIndex_1')) {\n          document.getElementById(this.maps.element.id + '_LayerIndex_1').style.display = 'none';\n        }\n\n        if (document.querySelector('.GroupElement')) {\n          document.querySelector('.GroupElement').style.display = 'none';\n        }\n\n        this.markerLineAnimation(map);\n        map.mapLayerPanel.generateTiles(tileZoomFactor, map.tileTranslatePoint, type);\n        var element1 = document.getElementById(this.maps.element.id + '_tiles');\n        var animationDuration = this.maps.layersCollection[0].animationDuration;\n        setTimeout(function () {\n          if (type === 'ZoomOut' || type === 'Reset') {// element1.removeChild(element1.children[element1.childElementCount - 1]);\n            // element1.childElementCount ? element1.removeChild(element1.children[element1.childElementCount - 1]) : element1;\n          }\n\n          _this.applyTransform(true);\n\n          if (document.getElementById(_this.maps.element.id + '_LayerIndex_1')) {\n            document.getElementById(_this.maps.element.id + '_LayerIndex_1').style.display = 'block';\n          }\n        }, animationDuration);\n      }\n\n      this.maps.zoomNotApplied = false;\n    }\n  };\n\n  Zoom.prototype.createZoomingToolbars = function () {\n    var map = this.maps;\n    this.toolBarGroup = map.renderer.createGroup({\n      id: map.element.id + '_Zooming_KitCollection',\n      opacity: map.theme.toLowerCase() === 'fluentuidark' ? 0.6 : 0.3\n    });\n    var kitHeight = 16;\n    var kitWidth = 16;\n    var xSpacing = 15;\n    var ySpacing = 15;\n    var padding = 20;\n    var orientation = map.zoomSettings.toolBarOrientation;\n    var toolbarsCollection = map.zoomSettings.toolbars;\n    var shadowElement = '<filter id=\"chart_shadow\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/>';\n    shadowElement += '<feOffset dx=\"-3\" dy=\"4\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"1\"/>';\n    shadowElement += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n    var toolBarLength = map.zoomSettings.toolbars.length;\n    var toolWidth = map.zoomSettings.toolBarOrientation === 'Horizontal' ? toolBarLength * kitWidth + toolBarLength * padding : kitWidth * 2;\n    var toolHeight = map.zoomSettings.toolBarOrientation === 'Horizontal' ? kitHeight * 2 : toolBarLength * kitHeight + toolBarLength * padding;\n    this.toolBarGroup.appendChild(map.renderer.drawRectangle(new RectOption(map.element.id + '_Zooming_Rect', 'transparent', {\n      color: 'transparent',\n      width: 1\n    }, 1, new Rect(0, 0, toolWidth, toolHeight), 0, 0)));\n    var defElement = map.renderer.createDefs();\n    defElement.innerHTML = shadowElement;\n    this.toolBarGroup.appendChild(defElement);\n    var outerElement = map.renderer.drawRectangle(new RectOption(map.element.id + '_Zooming_Rect', 'transparent', {\n      color: 'transparent',\n      width: 1\n    }, 0.1, new Rect(0, 0, toolWidth, toolHeight), 0, 0));\n    outerElement.setAttribute('filter', 'url(#chart_shadow)');\n    this.toolBarGroup.appendChild(outerElement); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var performFunction;\n\n    for (var i = 0; i < toolbarsCollection.length; i++) {\n      var toolbar_1 = toolbarsCollection[i];\n      var pathOptions = void 0;\n      var polyOptions = void 0;\n      this.currentToolbarEle = map.renderer.createGroup({\n        id: map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Group',\n        transform: 'translate( ' + xSpacing + ' ' + ySpacing + ' ) '\n      });\n      this.currentToolbarEle.setAttribute('class', 'e-maps-toolbar');\n      var fillColor = '';\n      var fill = 'transparent';\n      var direction = '';\n      var polygonDirection = '';\n      this.selectionColor = this.maps.zoomSettings.selectionColor || this.maps.themeStyle.zoomSelectionColor;\n\n      switch (toolbar_1.toLowerCase()) {\n        case 'zoom':\n          {\n            var fillColor_1 = void 0;\n            var strokeColor = void 0;\n            direction = 'M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,';\n            direction += '5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571';\n            direction = direction + 'L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,';\n\n            if (this.maps.zoomSettings.enablePanning && !this.maps.zoomSettings.enableSelectionZooming) {\n              fillColor_1 = fill;\n              strokeColor = this.maps.themeStyle.zoomFillColor;\n            } else if (this.maps.zoomSettings.enablePanning && this.maps.zoomSettings.enableSelectionZooming) {\n              fillColor_1 = fill;\n              strokeColor = this.maps.themeStyle.zoomFillColor;\n            } else if (!this.maps.zoomSettings.enablePanning && !this.maps.zoomSettings.enableSelectionZooming) {\n              fillColor_1 = fill;\n              strokeColor = this.maps.themeStyle.zoomFillColor;\n            } else {\n              fillColor_1 = this.selectionColor;\n              strokeColor = this.selectionColor;\n            }\n\n            this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, fillColor_1, 1, strokeColor, 1, 1, null, direction + '4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z')));\n            this.zoomElements = this.currentToolbarEle;\n            this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n            break;\n          }\n\n        case 'zoomin':\n          direction = 'M 8, 0 L 8, 16 M 0, 8 L 16, 8';\n          this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Path', fill, 3, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction)));\n          this.zoomInElements = this.currentToolbarEle;\n          this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n          break;\n\n        case 'zoomout':\n          direction = 'M 0, 8 L 16, 8';\n          this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, fill, 3, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction)));\n          this.zoomOutElements = this.currentToolbarEle;\n          this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n          break;\n\n        case 'pan':\n          {\n            var color = void 0;\n            direction = 'M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,';\n            direction += '11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z';\n\n            if (this.maps.zoomSettings.enablePanning && this.maps.zoomModule.isDragZoom) {\n              color = '#737373';\n            } else if (!this.maps.zoomSettings.enablePanning) {\n              color = '#737373';\n              this.currentToolbarEle.setAttribute('class', '');\n            } else {\n              color = this.selectionColor;\n            }\n\n            this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, color, 1, color, 1, 1, null, direction)));\n            this.panColor = color;\n            this.panElements = this.currentToolbarEle;\n            this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n            break;\n          }\n\n        case 'reset':\n          direction = 'M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,';\n          direction += '1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,';\n          direction += '13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,';\n          this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, this.fillColor, null, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction + '3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z')));\n          this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n          break;\n      }\n\n      this.currentToolbarEle.appendChild(map.renderer.drawCircle(new CircleOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Rect', fill, {\n        color: this.maps.themeStyle.zoomFillColor,\n        width: 1\n      }, 1, 8, 8, 16, '')));\n      xSpacing = orientation === 'Horizontal' ? xSpacing + (kitWidth + padding) : xSpacing;\n      ySpacing = orientation === 'Horizontal' ? ySpacing : ySpacing + (kitHeight + padding);\n      this.toolBarGroup.appendChild(this.currentToolbarEle);\n    }\n  };\n\n  Zoom.prototype.performToolBarAction = function (e) {\n    var target = e.target;\n    e.stopImmediatePropagation();\n    var isTouch = e.pointerType === 'touch' || e.pointerType === '2' || e.type.indexOf('touch') > -1;\n    var toolbar = target.id.split('_Zooming_ToolBar_')[1].split('_')[0];\n\n    if (isTouch) {\n      this.handled = true;\n      this.performZoomingByToolBar(toolbar);\n    } else if ((e.type === 'mousedown' || e.type === 'pointerdown') && !this.handled) {\n      this.handled = false;\n      this.performZoomingByToolBar(toolbar);\n    } else {\n      this.handled = false;\n    }\n  };\n  /**\n   * @param {string} type - Specifies the type.\n   * @returns {void}\n   * @private\n   */\n\n\n  Zoom.prototype.performZoomingByToolBar = function (type) {\n    var map = this.maps;\n    map.isReset = false;\n\n    switch (type.toLowerCase()) {\n      case 'zoom':\n        this.panColor = this.fillColor;\n        this.zoomColor = this.selectionColor;\n        this.applySelection(this.zoomElements, this.selectionColor);\n        this.applySelection(this.panElements, this.fillColor);\n        break;\n\n      case 'pan':\n        if (!this.maps.zoomSettings.enablePanning) {\n          this.panColor = '#737373';\n        } else {\n          this.panColor = this.selectionColor;\n        }\n\n        this.zoomColor = this.fillColor;\n\n        if (!this.maps.zoomSettings.enablePanning) {\n          this.applySelection(this.zoomElements, this.selectionColor);\n          this.applySelection(this.panElements, this.panColor);\n        } else {\n          this.applySelection(this.zoomElements, this.fillColor);\n          this.applySelection(this.panElements, this.panColor);\n        }\n\n        break;\n\n      case 'zoomin':\n        map.staticMapZoom = map.tileZoomLevel;\n\n        if (map.staticMapZoom > 0 && map.staticMapZoom < 22) {\n          map.staticMapZoom += 1;\n        }\n\n        this.toolBarZooming((map.isTileMap ? map.tileZoomLevel : map.scale) + 1, 'ZoomIn');\n        break;\n\n      case 'zoomout':\n        map.staticMapZoom = map.tileZoomLevel;\n        map.markerCenterLatitude = null;\n        map.markerCenterLongitude = null;\n        this.toolBarZooming((map.isTileMap ? map.tileZoomLevel : map.scale) - 1, 'ZoomOut');\n        break;\n\n      case 'reset':\n        map.staticMapZoom = map.zoomSettings.enable ? map.zoomSettings.zoomFactor : 0;\n        map.markerCenterLatitude = null;\n        map.markerCenterLongitude = null;\n        this.toolBarZooming(1, 'Reset');\n\n        if (!this.maps.zoomSettings.enablePanning) {\n          this.applySelection(this.zoomElements, this.selectionColor);\n          this.applySelection(this.panElements, '#737373');\n        } else {\n          this.applySelection(this.zoomElements, this.fillColor);\n          this.applySelection(this.panElements, this.selectionColor);\n        }\n\n    }\n\n    this.panningStyle(type.toLowerCase());\n  };\n\n  Zoom.prototype.panningStyle = function (toolbar) {\n    var svg = getElementByID(this.maps.element.id + '_svg');\n\n    if (toolbar === 'pan' || this.isPanning) {\n      svg.setAttribute('class', 'e-maps-panning');\n    } else {\n      svg.setAttribute('class', '');\n    }\n  };\n\n  Zoom.prototype.applySelection = function (elements, color) {\n    if (!elements) {\n      return;\n    }\n\n    var childElement;\n\n    for (var i = 0; i < elements.childElementCount; i++) {\n      childElement = elements.childNodes[i];\n\n      if (childElement.tagName !== 'circle') {\n        childElement.setAttribute('fill', color);\n        childElement.setAttribute('stroke', color);\n      }\n    }\n  };\n\n  Zoom.prototype.showTooltip = function (e) {\n    var text = e.target.id.split('_Zooming_ToolBar_')[1].split('_')[0];\n\n    if (!this.isTouch) {\n      createTooltip('EJ2_Map_Toolbar_Tip', this.maps.getLocalizedLabel(text), e.pageY + 10, e.pageX + 10, '10px');\n    }\n  };\n\n  Zoom.prototype.removeTooltip = function () {\n    if (getElementByID('EJ2_Map_Toolbar_Tip')) {\n      remove(getElementByID('EJ2_Map_Toolbar_Tip'));\n    }\n  };\n\n  Zoom.prototype.alignToolBar = function () {\n    var map = this.maps;\n    var padding = 10;\n    var element = createElement('div', {\n      id: map.element.id + '_ToolBar',\n      styles: 'position:absolute;z-index:2'\n    });\n    var rectSVGObject = map.renderer.createSvg({\n      id: map.element.id + '_Zooming_ToolBar',\n      width: 10,\n      height: 10\n    });\n    rectSVGObject.appendChild(this.toolBarGroup);\n    element.appendChild(rectSVGObject);\n\n    if (getElementByID(map.element.id + '_Secondary_Element')) {\n      getElementByID(map.element.id + '_Secondary_Element').appendChild(element);\n    }\n\n    var toolBarSize = this.toolBarGroup.getBoundingClientRect();\n    rectSVGObject.setAttribute('height', (toolBarSize.height + padding / 2).toString());\n    rectSVGObject.setAttribute('width', (toolBarSize.width + padding / 2).toString());\n    var size = !isNullOrUndefined(map.totalRect) ? map.totalRect : map.mapAreaRect;\n    var x = 0;\n    var y = 0;\n\n    switch (map.zoomSettings.verticalAlignment) {\n      case 'Near':\n        y = size.y;\n        break;\n\n      case 'Center':\n        y = size.height / 2 - toolBarSize.height / 2;\n        break;\n\n      case 'Far':\n        y = size.height - toolBarSize.height - padding;\n        break;\n    }\n\n    switch (map.zoomSettings.horizontalAlignment) {\n      case 'Near':\n        x = size.x;\n        break;\n\n      case 'Center':\n        x = size.width / 2 - toolBarSize.width / 2;\n        break;\n\n      case 'Far':\n        x = size.width - toolBarSize.width - padding;\n        break;\n    }\n\n    var extraPosition = map.getExtraPosition();\n    element.style.left = x + extraPosition.x + 'px';\n    element.style.top = y + extraPosition.y + 'px';\n    var color = this.maps.zoomSettings.highlightColor || this.maps.themeStyle.zoomSelectionColor;\n    var css = ' .e-maps-toolbar:hover > circle { stroke:' + color + '; } .e-maps-toolbar:hover > path { fill: ' + color + ' ;  stroke: ' + color + '; }' + '.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } ' + '.e-maps-popup-close { display: block; opacity: 0; }';\n    var style = document.createElement('style');\n    style.appendChild(document.createTextNode(css));\n    element.appendChild(style);\n  };\n  /**\n   * To bind events.\n   *\n   * @param {Element} element - Specifies the element.\n   * @param {any} process - Specifies the process.\n   * @returns {void}\n   * @private\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Zoom.prototype.wireEvents = function (element, process) {\n    EventHandler.add(element, Browser.touchStartEvent, process, this);\n    EventHandler.add(element, 'mouseover', this.showTooltip, this);\n    EventHandler.add(element, 'mouseout', this.removeTooltip, this);\n  };\n\n  Zoom.prototype.mapMouseWheel = function (e) {\n    if (this.maps.zoomSettings.enable && this.maps.zoomSettings.mouseWheelZoom) {\n      var map = this.maps;\n      var size = map.availableSize;\n      map.markerZoomedState = false;\n      map.zoomPersistence = map.enablePersistence;\n      var position = this.getMousePosition(e.pageX, e.pageY);\n      var prevLevel = map.tileZoomLevel;\n      var prevScale = map.scale;\n      var delta = 1;\n      var staticMaxZoomLevel = 22; // google map maximum zoom level value\n\n      var value = map.isTileMap ? prevLevel : prevScale;\n\n      if (position.x > map.mapAreaRect.x && position.x < map.mapAreaRect.x + map.mapAreaRect.width && position.y > map.mapAreaRect.y && position.y < map.mapAreaRect.y + map.mapAreaRect.height) {\n        e.preventDefault();\n        var direction = this.browserName === 'mozilla' && !this.isPointer ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        -e.detail / 3 > 0 ? 'ZoomIn' : 'ZoomOut' : e.wheelDelta / 120 > 0 ? 'ZoomIn' : 'ZoomOut';\n\n        if (direction === 'ZoomIn') {\n          map.mapScaleValue = value + delta;\n          map.staticMapZoom = map.tileZoomLevel;\n\n          if (map.staticMapZoom > 0 && map.staticMapZoom < staticMaxZoomLevel) {\n            map.staticMapZoom += 1;\n          }\n\n          this.performZooming(position, value + delta, direction);\n        } else {\n          map.mapScaleValue = value - delta;\n          map.staticMapZoom = map.tileZoomLevel;\n\n          if (map.mapScaleValue === 1) {\n            map.markerCenterLatitude = null;\n            map.markerCenterLongitude = null;\n          }\n\n          if (map.staticMapZoom > 1 && map.staticMapZoom < staticMaxZoomLevel) {\n            map.staticMapZoom -= 1;\n          }\n\n          this.performZooming(position, value - delta, direction);\n        }\n      }\n    }\n  };\n\n  Zoom.prototype.doubleClick = function (e) {\n    var pageX = e.pageX;\n    var pageY = e.pageY;\n    var target = e.target;\n\n    if (this.maps.zoomSettings.enable && this.maps.zoomSettings.doubleClickZoom && !(e.target['id'].indexOf('_Zooming_') > -1)) {\n      var position = this.getMousePosition(pageX, pageY);\n      var map = this.maps;\n      var size = map.availableSize;\n      var prevLevel = map.tileZoomLevel;\n      var prevScale = map.scale;\n      map.mapScaleValue = map.mapScaleValue + 1;\n      var value = map.isTileMap ? prevLevel : prevScale;\n\n      if (position.x > map.mapAreaRect.x && position.x < map.mapAreaRect.x + map.mapAreaRect.width && position.y > map.mapAreaRect.y && position.y < map.mapAreaRect.y + map.mapAreaRect.height) {\n        this.performZooming(position, value + 1, 'ZoomIn');\n      }\n    }\n  };\n\n  Zoom.prototype.mouseDownHandler = function (e) {\n    var pageX;\n    var pageY;\n    var target;\n    var touches = null;\n    var element = e.target;\n\n    if (e.type === 'touchstart') {\n      this.isTouch = true;\n      touches = e.touches;\n      target = e.target;\n      pageX = touches[0].clientX;\n      pageY = touches[0].clientY;\n    } else {\n      pageX = e.pageX;\n      pageY = e.pageY;\n      target = e.target;\n    }\n\n    if (!this.maps.zoomSettings.enablePanning) {\n      this.isPanning = this.panColor !== this.selectionColor ? this.maps.zoomSettings.enablePanning : this.zoomColor === this.selectionColor;\n    } else {\n      this.isPanning = this.panColor === this.selectionColor ? this.maps.zoomSettings.enablePanning : this.zoomColor !== this.selectionColor;\n    }\n\n    this.mouseDownLatLong = {\n      x: pageX,\n      y: pageY\n    };\n    this.rectZoomingStart = !this.isPanning && this.maps.zoomSettings.enable;\n    this.mouseDownPoints = this.getMousePosition(pageX, pageY);\n\n    if (this.isTouch) {\n      this.firstMove = true;\n      this.pinchFactor = this.maps.scale;\n      this.fingers = touches.length;\n    }\n\n    this.isSingleClick = true;\n  };\n\n  Zoom.prototype.mouseMoveHandler = function (e) {\n    var pageX;\n    var pageY;\n    var map = this.maps;\n    var touchArg;\n    var target;\n    var touches = null;\n    var zoom = this.maps.zoomSettings;\n\n    if (e.type === 'touchmove') {\n      this.isTouch = true;\n      target = e.target;\n      touches = e.touches;\n      pageX = touches[0].clientX;\n      pageY = touches[0].clientY;\n    } else {\n      pageX = e.pageX;\n      pageY = e.pageY;\n      target = e.target;\n    }\n\n    if (getElementByID(map.element.id + '_Zooming_KitCollection')) {\n      if (target.id.indexOf('_Zooming_') > -1) {\n        getElementByID(map.element.id + '_Zooming_KitCollection').setAttribute('opacity', '1');\n\n        if (document.getElementById(map.element.id + '_Zooming_ToolBar_Pan_Group')) {\n          if (!this.maps.zoomSettings.enablePanning) {\n            if (target.id.indexOf('_Zooming_ToolBar') > -1 || target.id.indexOf('_Zooming_Rect') > -1) {\n              getElementByID(map.element.id + '_Zooming_ToolBar_Pan_Rect').setAttribute('opacity', map.theme.toLowerCase() === 'fluentuidark' ? '0.6' : '0.3');\n              getElementByID(map.element.id + '_Zooming_ToolBar_Pan').setAttribute('opacity', map.theme.toLowerCase() === 'fluentuidark' ? '0.6' : '0.3');\n            }\n          }\n        }\n      } else {\n        getElementByID(map.element.id + '_Zooming_KitCollection').setAttribute('opacity', map.theme.toLowerCase() === 'fluentuidark' ? '0.6' : '0.3');\n\n        if (!this.maps.zoomSettings.enablePanning && document.getElementById(map.element.id + '_Zooming_ToolBar_Pan_Group')) {\n          getElementByID(map.element.id + '_Zooming_ToolBar_Pan_Rect').setAttribute('opacity', '1');\n          getElementByID(map.element.id + '_Zooming_ToolBar_Pan').setAttribute('opacity', '1');\n        }\n      }\n    }\n\n    if (this.isTouch) {\n      if (this.maps.zoomSettings.pinchZooming) {\n        if (this.firstMove && touches.length === 2) {\n          this.rectZoomingStart = false;\n          this.updateInteraction();\n          this.touchStartList = targetTouches(e);\n        } else if (touches.length === 2 && this.touchStartList.length === 2) {\n          this.touchMoveList = targetTouches(e);\n          e.preventDefault();\n          this.rectZoomingStart = false;\n          this.performPinchZooming(e);\n        }\n\n        this.firstMove = false;\n      }\n    }\n\n    this.mouseMovePoints = this.getMousePosition(pageX, pageY);\n    var targetId = e.target['id'];\n    var targetEle = e.target;\n\n    if (zoom.enable && this.isPanning && (Browser.isDevice && touches.length >= 1 || !Browser.isDevice)) {\n      e.preventDefault();\n      this.maps.element.style.cursor = 'pointer';\n      this.mouseMoveLatLong = {\n        x: pageX,\n        y: pageY\n      };\n\n      if (this.mouseDownLatLong['x'] !== this.mouseMoveLatLong['x'] && this.mouseDownLatLong['y'] !== this.mouseMoveLatLong['y']) {\n        if (this.maps.zoomSettings.enablePanning) {\n          this.panning('None', null, null, e);\n        }\n\n        this.mouseDownLatLong['x'] = pageX;\n        this.mouseDownLatLong['y'] = pageY;\n      }\n    }\n\n    if (this.isTouch ? touches.length === 1 && this.rectZoomingStart : this.rectZoomingStart) {\n      e.preventDefault();\n\n      if (this.maps.zoomSettings.enableSelectionZooming) {\n        this.drawZoomRectangle();\n      }\n    }\n  };\n\n  Zoom.prototype.mouseUpHandler = function (e) {\n    var isDragZoom;\n    var map = this.maps;\n    this.rectZoomingStart = false;\n    this.isPanning = false;\n    this.isSingleClick = this.isSingleClick ? true : false;\n    this.isTouch = false;\n    this.touchStartList = [];\n    this.touchMoveList = [];\n    this.lastScale = 1;\n    this.maps.element.style.cursor = 'auto';\n\n    if ((!isNullOrUndefined(this.distanceX) || !isNullOrUndefined(this.distanceY)) && !isNullOrUndefined(this.currentLayer) && this.currentLayer.type === 'SubLayer') {\n      this.toAlignSublayer();\n      this.distanceX = this.distanceY = null;\n    }\n\n    var zoomRectElement = getElementByID(this.maps.element.id + '_Selection_Rect_Zooming');\n\n    if (zoomRectElement && this.maps.zoomSettings.enable && this.maps.zoomSettings.enableSelectionZooming) {\n      isDragZoom = true;\n      remove(zoomRectElement);\n      this.performRectZooming();\n    }\n\n    this.mouseMoveLatLong = {\n      x: 0,\n      y: 0\n    };\n    this.mouseDownLatLong = {\n      x: 0,\n      y: 0\n    };\n  };\n\n  Zoom.prototype.mouseCancelHandler = function (e) {\n    this.isPanning = false;\n    this.isTouch = false;\n    this.rectZoomingStart = false;\n    var zoomRectElement = getElementByID(this.maps.element.id + '_Selection_Rect_Zooming');\n\n    if (zoomRectElement && this.maps.zoomSettings.enable) {\n      remove(zoomRectElement);\n      this.performRectZooming();\n    }\n  };\n  /**\n   * To handle the click event for maps.\n   *\n   * @param {PointerEvent} e - Specifies the pointer event.\n   * @returns {void}\n   */\n\n\n  Zoom.prototype.click = function (e) {\n    var map = this.maps;\n\n    if (map.markerModule && map.markerModule.sameMarkerData.length > 0 || e.target['id'].indexOf('MarkerIndex') > -1 && e.target['id'].indexOf('cluster') === -1) {\n      return null;\n    }\n\n    if (this.isSingleClick && map.zoomSettings.zoomOnClick && !(e.target['id'].indexOf('_Zooming_') > -1) && !map.zoomSettings.doubleClickZoom && this.zoomColor !== this.selectionColor) {\n      var pageX = e.pageX;\n      var pageY = e.pageY;\n      var position = this.getMousePosition(pageX, pageY);\n      var prevLevel = map.tileZoomLevel;\n      var prevScale = map.scale;\n      map.mapScaleValue = map.mapScaleValue + 1;\n      var value = map.isTileMap ? prevLevel : prevScale;\n\n      if (position.x > map.mapAreaRect.x && position.x < map.mapAreaRect.x + map.mapAreaRect.width && position.y > map.mapAreaRect.y && position.y < map.mapAreaRect.y + map.mapAreaRect.height) {\n        this.performZooming(position, value + 1, 'ZoomIn');\n      }\n    }\n  };\n\n  Zoom.prototype.getMousePosition = function (pageX, pageY) {\n    var map = this.maps;\n    var elementRect = map.element.getBoundingClientRect();\n    var pageXOffset = map.element.ownerDocument.defaultView.pageXOffset;\n    var pageYOffset = map.element.ownerDocument.defaultView.pageYOffset;\n    var clientTop = map.element.ownerDocument.documentElement.clientTop;\n    var clientLeft = map.element.ownerDocument.documentElement.clientLeft;\n    var positionX = elementRect.left + pageXOffset - clientLeft;\n    var positionY = elementRect.top + pageYOffset - clientTop;\n    return new Point(Math.abs(pageX - positionX), Math.abs(pageY - positionY));\n  };\n\n  Zoom.prototype.addEventListener = function () {\n    if (this.maps.isDestroyed) {\n      return;\n    }\n\n    EventHandler.add(this.maps.element, this.wheelEvent, this.mapMouseWheel, this);\n    EventHandler.add(this.maps.element, 'click', this.click, this);\n    EventHandler.add(this.maps.element, 'dblclick', this.doubleClick, this);\n    this.maps.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n    this.maps.on(Browser.touchStartEvent, this.mouseDownHandler, this);\n    this.maps.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n    EventHandler.add(this.maps.element, this.cancelEvent, this.mouseCancelHandler, this);\n  };\n\n  Zoom.prototype.removeEventListener = function () {\n    if (this.maps.isDestroyed) {\n      return;\n    }\n\n    EventHandler.remove(this.maps.element, this.wheelEvent, this.mapMouseWheel);\n    EventHandler.remove(this.maps.element, 'click', this.click);\n    EventHandler.remove(this.maps.element, 'dblclick', this.doubleClick);\n    this.maps.off(Browser.touchMoveEvent, this.mouseMoveHandler);\n    this.maps.off(Browser.touchStartEvent, this.mouseDownHandler);\n    this.maps.off(Browser.touchEndEvent, this.mouseUpHandler);\n    this.maps.off(this.cancelEvent, this.mouseCancelHandler);\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} - Returns the module name.\n   */\n\n\n  Zoom.prototype.getModuleName = function () {\n    return 'Zoom';\n  };\n  /**\n   * To destroy the zoom.\n   *\n   * @param {Maps} maps - Specifies the instance of the maps.\n   * @returns {void}\n   * @private\n   */\n\n\n  Zoom.prototype.destroy = function (maps) {\n    this.removeEventListener();\n    /**\n     * Destroy method performed here\n     */\n  };\n\n  return Zoom;\n}();\n\nexport { Zoom };","map":{"version":3,"sources":["C:/Users/vinay/Desktop/world-map-dashboard/world-map/node_modules/@syncfusion/ej2-maps/src/maps/user-interaction/zoom.js"],"names":["Point","getElementByID","PathOption","Rect","convertGeoToPoint","CircleOption","convertTileLatLongToPoint","RectOption","createTooltip","calculateScale","getTouchCenter","getTouches","targetTouches","MapLocation","zoomAnimate","smoothTranslate","measureText","textTrim","clusterTemplate","marker","markerTemplate","removeElement","getElement","clusterSeparate","markerColorChoose","markerShapeChoose","isNullOrUndefined","EventHandler","Browser","remove","createElement","changeBorderWidth","markerRendering","pan","getValueFromObject","Zoom","maps","isPanning","mouseEnter","isTouch","rectZoomingStart","pinchRect","browserName","info","name","isPointer","handled","pinchFactor","startTouches","shapeZoomLocation","intersect","mouseDownLatLong","x","y","mouseMoveLatLong","isSingleClick","wheelEvent","cancelEvent","selectionColor","zoomSettings","fillColor","color","addEventListener","groupElements","prototype","performZooming","position","newZoomFactor","type","_this","map","previousProjection","projectionType","defaultState","initialCheck","markerZoomedState","zoomPersistence","enablePersistence","prevLevel","tileZoomLevel","scale","previousScale","maxZoom","minZoom","prevTilePoint","tileTranslatePoint","isTileMap","availSize","mapAreaRect","minBounds","baseMapRectBounds","maxBounds","mapTotalWidth","Math","abs","mapTotalHeight","point","translatePoint","translatePointX","width","translatePointY","height","currentHeight","triggerZoomEvent","applyTransform","getTileTranslatePosition","zoomFactor","pow","resetToInitial","applyZoomReset","initialZoomLevel","initialTileTranslate","mapScaleValue","document","querySelector","style","display","getElementById","element","id","markerLineAnimation","mapLayerPanel","generateTiles","element1","animationDuration","layersCollection","setTimeout","zoomNotApplied","zoomArgs","cancel","previous","previousPoint","current","trigger","currentLevel","tileDefaultSize","padding","bounds","availableSize","prevSize","totalSize","performRectZooming","isDragZoom","size","zoomRect","zoomingRect","zoomCalculationFactor","round","setInteraction","newInteraction","lastScale","interaction","updateInteraction","fingers","performPinchZooming","e","touchStartList","touchMoveList","touchCenter","newScale","min","max","newTileFactor","drawZoomRectangle","down","mouseDownPoints","move","mouseMovePoints","border","elementRect","getBoundingClientRect","rectSVGObject","renderer","createSvg","rectOption","appendChild","drawRectangle","animateTransform","animate","duration","currentLayer","setAttribute","layerIndex","templateCount","layer","zoomshapelocation","i","markerStyle","collection","zoomShapeCollection","layerCollectionEle","i_1","childElementCount","layerElement","childNodes","tagName","index","indexOf","parseFloat","split","factor","calculateFactor","j","currentEle","children","length","insertBefore","navigationLineModule","renderNavigation","zoomTranslatePoint","markerTranslates","markerAnimation","k","markerTranslate","layerIndex_1","parseInt","dataIndex","markerIndex","markerSettings","markerSelectionValues","dataSource","x_1","initialMarkerSelection","markerSelection","selectionSettings","groupElement","markerModule","sameMarkerData","mapsTooltipModule","tooltipTargetID","mapsTooltip","tooltipElement","x_2","getAttribute","y_1","svgTooltip","location","enableAnimation","childElement","bubbleTransform","bubleIndex","l","bubbleModule","bubbleCollection","centerX","centerY","currentX","currentY","zoomLabelPositions","dataLabelModule","dataLabelCollections","labelIndex","zoomshapewidth","push","dataLabelTranslate","dataLabel","layers","dataLabelSettings","labelX","labelY","zoomtext","textStyle","zoomtextSize","rectElement","rectX","rectY","arrangeTemplate","processTemplate","templateFn","nullCount","markerCounts","markerTemplateCounts","markerSVGObject","createGroup","class","mapsAreaRect","markerTemplateElements","className","styles","currentLayers","markerDatas","Array","forEach","call","data","markerNullCount","eventArgs","template","fill","colorValuePath","shapeValuePath","imageUrl","imageUrlValuePath","shape","MarkerArgs","lati","latitudeValuePath","Number","long","longitudeValuePath","offset","visible","markerID","location_1","animate_1","zoomModule","transPoint","isNaN","markerDataLength","markerClusterSettings","allowClustering","svgObject","markerTemplateElement","datalabelTemplateElemement","labelCollection","zoomelement","text","trimmedLable","zoomtrimLabel","labelPath","shapeIndex","label","layerEle","templateOffset","layerOffset","elementOffset","parentElement","x_3","left","y_2","top","start","end","xpositionEnds","xpositionStart","textLocations","rightWidth","leftWidth","heightTop","heightBottom","smartLabelMode","innerHTML","dataLabelShape","intersectionAction","m","difference","lng","lat","location_2","baseLayerIndex","layerType","staticMapOffset","staticMapOffsetWidth","transform","lineElement","visibility","panning","direction","xDifference","yDifference","mouseLocation","panArgs","mergeCluster","legendElement","legendHeight","getClientRects","layerRect","panningXDirection","margin","panningYDirection","location_3","getGeoLocation","latitude","longitude","distanceX","distanceY","location_4","getTileGeoLocation","toAlignSublayer","toolBarZooming","isReset","mapWidth","mapHeight","tileZoomFactor","createZoomingToolbars","toolBarGroup","opacity","theme","toLowerCase","kitHeight","kitWidth","xSpacing","ySpacing","orientation","toolBarOrientation","toolbarsCollection","toolbars","shadowElement","toolBarLength","toolWidth","toolHeight","defElement","createDefs","outerElement","performFunction","toolbar_1","pathOptions","polyOptions","currentToolbarEle","polygonDirection","themeStyle","zoomSelectionColor","fillColor_1","strokeColor","enablePanning","enableSelectionZooming","zoomFillColor","drawPath","zoomElements","wireEvents","performToolBarAction","zoomInElements","zoomOutElements","panColor","panElements","drawCircle","target","stopImmediatePropagation","pointerType","toolbar","performZoomingByToolBar","zoomColor","applySelection","staticMapZoom","markerCenterLatitude","markerCenterLongitude","enable","panningStyle","svg","elements","showTooltip","getLocalizedLabel","pageY","pageX","removeTooltip","alignToolBar","toolBarSize","toString","totalRect","verticalAlignment","horizontalAlignment","extraPosition","getExtraPosition","highlightColor","css","createTextNode","process","add","touchStartEvent","mapMouseWheel","mouseWheelZoom","getMousePosition","prevScale","delta","staticMaxZoomLevel","value","preventDefault","detail","wheelDelta","doubleClick","doubleClickZoom","mouseDownHandler","touches","clientX","clientY","firstMove","mouseMoveHandler","touchArg","zoom","pinchZooming","targetId","targetEle","isDevice","cursor","mouseUpHandler","zoomRectElement","mouseCancelHandler","click","zoomOnClick","pageXOffset","ownerDocument","defaultView","pageYOffset","clientTop","documentElement","clientLeft","positionX","positionY","isDestroyed","on","touchMoveEvent","touchEndEvent","removeEventListener","off","getModuleName","destroy"],"mappings":"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","sourcesContent":["import { Point, getElementByID, PathOption, Rect, convertGeoToPoint, CircleOption, convertTileLatLongToPoint } from '../utils/helper';\nimport { RectOption, createTooltip, calculateScale, getTouchCenter, getTouches, targetTouches } from '../utils/helper';\nimport { MapLocation, zoomAnimate, smoothTranslate, measureText, textTrim, clusterTemplate, marker } from '../utils/helper';\nimport { markerTemplate, removeElement, getElement, clusterSeparate, markerColorChoose } from '../utils/helper';\nimport { markerShapeChoose } from '../utils/helper';\nimport { isNullOrUndefined, EventHandler, Browser, remove, createElement } from '@syncfusion/ej2-base';\nimport { changeBorderWidth, markerRendering } from '../index';\nimport { pan } from '../model/constants';\nimport { getValueFromObject } from '../utils/helper';\n/**\n * Zoom module used to process the zoom for maps\n */\nvar Zoom = /** @class */ (function () {\n    function Zoom(maps) {\n        this.isPanning = false;\n        this.mouseEnter = false;\n        this.isTouch = false;\n        this.rectZoomingStart = false;\n        this.pinchRect = new Rect(0, 0, 0, 0);\n        this.browserName = Browser.info.name;\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        this.isPointer = Browser.isPointer;\n        this.handled = false;\n        this.pinchFactor = 1;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.startTouches = [];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.shapeZoomLocation = [];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.intersect = [];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.mouseDownLatLong = { x: 0, y: 0 };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.mouseMoveLatLong = { x: 0, y: 0 };\n        /**\n         * @private\n         */\n        this.isSingleClick = false;\n        this.maps = maps;\n        this.wheelEvent = this.browserName === 'mozilla' ? (this.isPointer ? 'mousewheel' : 'DOMMouseScroll') : 'mousewheel';\n        this.cancelEvent = this.isPointer ? 'pointerleave' : 'mouseleave';\n        this.selectionColor = this.maps.zoomSettings.selectionColor;\n        this.fillColor = this.maps.zoomSettings.color;\n        this.addEventListener();\n        this.groupElements = [];\n    }\n    /**\n     * To perform zooming for maps\n     *\n     * @param {Point} position - Specifies the position.\n     * @param {number} newZoomFactor - Specifies the zoom factor.\n     * @param {string} type - Specifies the type.\n     * @returns {void}\n     */\n    Zoom.prototype.performZooming = function (position, newZoomFactor, type) {\n        var _this = this;\n        var map = this.maps;\n        map.previousProjection = map.projectionType;\n        map.defaultState = false;\n        map.initialCheck = false;\n        map.markerZoomedState = false;\n        map.zoomPersistence = map.enablePersistence;\n        var prevLevel = map.tileZoomLevel;\n        var scale = map.previousScale = map.scale;\n        var maxZoom = map.zoomSettings.maxZoom;\n        var minZoom = map.zoomSettings.minZoom;\n        newZoomFactor = (minZoom > newZoomFactor && type === 'ZoomIn') ? minZoom + 1 : newZoomFactor;\n        var prevTilePoint = map.tileTranslatePoint;\n        if ((!map.isTileMap) && (type === 'ZoomIn' ? newZoomFactor >= minZoom && newZoomFactor <= maxZoom : newZoomFactor >= minZoom)) {\n            var availSize = map.mapAreaRect;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var minBounds = map.baseMapRectBounds['min'];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var maxBounds = map.baseMapRectBounds['max'];\n            var mapTotalWidth = Math.abs(minBounds['x'] - maxBounds['x']);\n            var mapTotalHeight = Math.abs(minBounds['y'] - maxBounds['y']);\n            var point = map.translatePoint;\n            var translatePointX = point.x - (((availSize.width / scale) - (availSize.width / newZoomFactor)) / (availSize.width / position.x));\n            var translatePointY = point.y - (((availSize.height / scale) - (availSize.height / newZoomFactor)) / (availSize.height / position.y));\n            var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * newZoomFactor;\n            translatePointX = (currentHeight < map.mapAreaRect.height) ? (availSize.x + ((-(minBounds['x'])) + ((availSize.width / 2) - (mapTotalWidth / 2)))) : translatePointX;\n            translatePointY = (currentHeight < map.mapAreaRect.height) ? (availSize.y + ((-(minBounds['y'])) + ((availSize.height / 2) - (mapTotalHeight / 2)))) : translatePointY;\n            map.translatePoint = new Point(translatePointX, translatePointY);\n            map.scale = newZoomFactor;\n            this.triggerZoomEvent(prevTilePoint, prevLevel, type);\n            this.applyTransform();\n        }\n        else if ((map.isTileMap) && (newZoomFactor >= minZoom && newZoomFactor <= maxZoom)) {\n            this.getTileTranslatePosition(prevLevel, newZoomFactor, position, type);\n            map.tileZoomLevel = newZoomFactor;\n            map.zoomSettings.zoomFactor = newZoomFactor;\n            map.scale = Math.pow(2, newZoomFactor - 1);\n            if (type === 'ZoomOut' && map.zoomSettings.resetToInitial && map.applyZoomReset && newZoomFactor <= map.initialZoomLevel) {\n                map.initialCheck = true;\n                map.zoomPersistence = false;\n                map.tileTranslatePoint.x = map.initialTileTranslate.x;\n                map.tileTranslatePoint.y = map.initialTileTranslate.y;\n                newZoomFactor = map.tileZoomLevel = map.mapScaleValue = map.initialZoomLevel;\n                map.scale = Math.pow(2, newZoomFactor - 1);\n            }\n            map.translatePoint.y = (map.tileTranslatePoint.y - (0.01 * map.mapScaleValue)) / map.scale;\n            map.translatePoint.x = (map.tileTranslatePoint.x - (0.01 * map.mapScaleValue)) / map.scale;\n            this.triggerZoomEvent(prevTilePoint, prevLevel, type);\n            if (document.querySelector('.GroupElement')) {\n                document.querySelector('.GroupElement').style.display = 'none';\n            }\n            if (document.getElementById(this.maps.element.id + '_LayerIndex_1')) {\n                document.getElementById(this.maps.element.id + '_LayerIndex_1').style.display = 'none';\n            }\n            this.markerLineAnimation(map);\n            map.mapLayerPanel.generateTiles(newZoomFactor, map.tileTranslatePoint, type + 'wheel', null, position);\n            var element1 = document.getElementById(this.maps.element.id + '_tiles');\n            var animationDuration = this.maps.layersCollection[0].animationDuration;\n            setTimeout(function () {\n                // if (type === 'ZoomOut') {\n                //     element1.removeChild(element1.children[element1.childElementCount - 1]);\n                //     if (element1.childElementCount) {\n                //         element1.removeChild(element1.children[element1.childElementCount - 1]);\n                //     } else {\n                //         element1 = element1;\n                //     }\n                // }\n                _this.applyTransform();\n                if (document.getElementById(_this.maps.element.id + '_LayerIndex_1')) {\n                    document.getElementById(_this.maps.element.id + '_LayerIndex_1').style.display = 'block';\n                }\n            }, animationDuration);\n        }\n        this.maps.zoomNotApplied = false;\n    };\n    Zoom.prototype.triggerZoomEvent = function (prevTilePoint, prevLevel, type) {\n        var map = this.maps;\n        var zoomArgs;\n        if (!map.isTileMap) {\n            zoomArgs = {\n                cancel: false, name: 'zoom', type: type, maps: map,\n                tileTranslatePoint: {}, translatePoint: { previous: map.previousPoint, current: map.translatePoint },\n                tileZoomLevel: {}, scale: { previous: map.previousScale, current: map.scale }\n            };\n        }\n        else {\n            zoomArgs = {\n                cancel: false, name: 'zoom', type: type, maps: map,\n                tileTranslatePoint: { previous: prevTilePoint, current: map.tileTranslatePoint }, translatePoint: { previous: map.previousPoint, current: map.translatePoint },\n                tileZoomLevel: { previous: prevLevel, current: map.tileZoomLevel }, scale: { previous: map.previousScale, current: map.scale }\n            };\n        }\n        map.trigger('zoom', zoomArgs);\n    };\n    Zoom.prototype.getTileTranslatePosition = function (prevLevel, currentLevel, position, type) {\n        var map = this.maps;\n        var tileDefaultSize = 256;\n        var padding = type === 'ZoomOut' ? 10 : (type === 'Reset' && currentLevel > 1) ? 0 : 10;\n        var bounds = map.availableSize;\n        var prevSize = Math.pow(2, prevLevel) * 256;\n        var totalSize = Math.pow(2, currentLevel) * 256;\n        var x = ((position.x - map.tileTranslatePoint.x) / prevSize) * 100;\n        var y = ((position.y - map.tileTranslatePoint.y) / prevSize) * 100;\n        map.tileTranslatePoint.x = (currentLevel === 1) ? (bounds.width / 2) - ((tileDefaultSize * 2) / 2) :\n            position.x - ((x * totalSize) / 100);\n        map.tileTranslatePoint.y = (currentLevel === 1) ? ((bounds.height / 2) - ((tileDefaultSize * 2) / 2) + (padding * 2)) :\n            position.y - ((y * totalSize) / 100);\n    };\n    Zoom.prototype.performRectZooming = function () {\n        this.isDragZoom = true;\n        var map = this.maps;\n        var size = map.availableSize;\n        map.previousProjection = map.projectionType;\n        var prevLevel = map.tileZoomLevel;\n        var prevTilePoint = map.tileTranslatePoint;\n        var zoomRect = this.zoomingRect;\n        var maxZoom = map.zoomSettings.maxZoom;\n        var minZoom = map.zoomSettings.minZoom;\n        if (zoomRect.height > 0 && zoomRect.width > 0) {\n            var x = this.zoomingRect.x + (this.zoomingRect.width / 2);\n            var y = this.zoomingRect.y + (this.zoomingRect.height / 2);\n            var zoomCalculationFactor = void 0;\n            if (!map.isTileMap) {\n                var scale = map.previousScale = map.scale;\n                zoomCalculationFactor = scale + Math.round((((size.width / zoomRect.width) + (size.height / zoomRect.height)) / 2));\n                var translatePoint = map.previousPoint = map.translatePoint;\n                var translatePointX = translatePoint.x - (((size.width / scale) - (size.width / zoomCalculationFactor)) / (size.width / x));\n                var translatePointY = translatePoint.y - (((size.height / scale) - (size.height / zoomCalculationFactor)) / (size.height / y));\n                map.translatePoint = new Point(translatePointX, translatePointY);\n                map.scale = zoomCalculationFactor;\n                this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n            }\n            else {\n                zoomCalculationFactor = prevLevel + (Math.round(prevLevel + (((size.width / zoomRect.width) + (size.height / zoomRect.height)) / 2)));\n                zoomCalculationFactor = (zoomCalculationFactor >= minZoom && zoomCalculationFactor <= maxZoom) ? zoomCalculationFactor : maxZoom;\n                map.zoomSettings.zoomFactor = zoomCalculationFactor;\n                this.getTileTranslatePosition(prevLevel, zoomCalculationFactor, { x: x, y: y });\n                map.tileZoomLevel = zoomCalculationFactor;\n                map.translatePoint.x = (map.tileTranslatePoint.x - (0.5 * Math.pow(2, zoomCalculationFactor))) /\n                    (Math.pow(2, zoomCalculationFactor));\n                map.translatePoint.y = (map.tileTranslatePoint.y - (0.5 * Math.pow(2, zoomCalculationFactor))) /\n                    (Math.pow(2, zoomCalculationFactor));\n                map.scale = (Math.pow(2, zoomCalculationFactor));\n                this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n                map.mapLayerPanel.generateTiles(zoomCalculationFactor, map.tileTranslatePoint);\n            }\n            map.mapScaleValue = zoomCalculationFactor;\n            this.applyTransform(true);\n            this.maps.zoomNotApplied = false;\n            this.zoomingRect = null;\n        }\n    };\n    Zoom.prototype.setInteraction = function (newInteraction) {\n        this.lastScale = 1;\n        this.interaction = newInteraction;\n    };\n    Zoom.prototype.updateInteraction = function () {\n        if (this.fingers === 2) {\n            this.setInteraction('zoom');\n        }\n        else {\n            this.setInteraction(null);\n        }\n    };\n    Zoom.prototype.performPinchZooming = function (e) {\n        var map = this.maps;\n        var prevLevel = map.tileZoomLevel;\n        var availSize = map.mapAreaRect;\n        map.previousScale = map.scale;\n        map.previousPoint = map.translatePoint;\n        var prevTilePoint = map.tileTranslatePoint;\n        var scale = calculateScale(this.touchStartList, this.touchMoveList);\n        var touchCenter = getTouchCenter(getTouches(this.touchMoveList, this.maps));\n        var newScale = scale / this.lastScale;\n        this.lastScale = scale;\n        this.pinchFactor *= newScale;\n        this.pinchFactor = Math.min(this.maps.zoomSettings.maxZoom, Math.max(this.pinchFactor, this.maps.zoomSettings.minZoom));\n        var zoomCalculationFactor = this.pinchFactor;\n        var zoomArgs;\n        if (!map.isTileMap) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var minBounds = map.baseMapRectBounds['min'];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var maxBounds = map.baseMapRectBounds['max'];\n            var mapTotalHeight = Math.abs(minBounds['y'] - maxBounds['y']);\n            var mapTotalWidth = Math.abs(minBounds['x'] - maxBounds['x']);\n            var translatePoint = map.translatePoint;\n            var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * zoomCalculationFactor;\n            var translatePointX = translatePoint.x - (((availSize.width / map.scale) - (availSize.width / zoomCalculationFactor)) / (availSize.width / touchCenter.x));\n            var translatePointY = translatePoint.y - (((availSize.height / map.scale) - (availSize.height / zoomCalculationFactor)) / (availSize.height / touchCenter.y));\n            translatePointX = (currentHeight < map.mapAreaRect.height) ? (availSize.x + ((-(minBounds['x'])) + ((availSize.width / 2) - (mapTotalWidth / 2)))) : translatePointX;\n            translatePointY = (currentHeight < map.mapAreaRect.height) ? (availSize.y + ((-(minBounds['y'])) + ((availSize.height / 2) - (mapTotalHeight / 2)))) : translatePointY;\n            map.translatePoint = new Point(translatePointX, translatePointY);\n            map.scale = zoomCalculationFactor;\n            this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n        }\n        else {\n            var newTileFactor = zoomCalculationFactor;\n            this.getTileTranslatePosition(prevLevel, newTileFactor, { x: touchCenter.x, y: touchCenter.y });\n            map.tileZoomLevel = newTileFactor;\n            map.translatePoint.x = (map.tileTranslatePoint.x - (0.5 * Math.pow(2, newTileFactor))) /\n                (Math.pow(2, newTileFactor));\n            map.translatePoint.y = (map.tileTranslatePoint.y - (0.5 * Math.pow(2, newTileFactor))) /\n                (Math.pow(2, newTileFactor));\n            map.scale = (Math.pow(2, newTileFactor));\n            this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n            map.mapLayerPanel.generateTiles(newTileFactor, map.tileTranslatePoint);\n        }\n        this.applyTransform();\n    };\n    Zoom.prototype.drawZoomRectangle = function () {\n        var map = this.maps;\n        var down = this.mouseDownPoints;\n        var move = this.mouseMovePoints;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var border = { width: 1, color: '#009900' };\n        var width = Math.abs(move.x - down.x);\n        var height = Math.abs(move.y - down.y);\n        var x = ((move.x > down.x) ? down.x : down.x - width);\n        var y = ((move.y > down.y) ? down.y : down.y - height);\n        var elementRect = getElementByID(map.element.id).getBoundingClientRect();\n        if ((x > map.mapAreaRect.x && x < (map.mapAreaRect.x + map.mapAreaRect.width)) &&\n            (y > map.mapAreaRect.y) && (y < map.mapAreaRect.y + map.mapAreaRect.height)) {\n            this.zoomingRect = new Rect(x, y, width, height);\n            var rectSVGObject = map.renderer.createSvg({\n                id: map.element.id + '_Selection_Rect_Zooming',\n                width: map.availableSize.width,\n                height: map.availableSize.height\n            });\n            var rectOption = new RectOption(map.element.id + '_ZoomRect', '#d3d3d3', border, 0.5, this.zoomingRect, 0, 0, '', '3');\n            rectSVGObject.appendChild(map.renderer.drawRectangle(rectOption));\n            getElementByID(map.element.id + '_Secondary_Element').appendChild(rectSVGObject);\n        }\n    };\n    /**\n     * To animate the zooming process\n     *\n     * @param {Element} element - Specifies the element\n     * @param {boolean} animate - Specifies the boolean value\n     * @param {number} x - Specifies the x value\n     * @param {number} y - Specifies the y value\n     * @param {number} scale - Specifies the scale value\n     * @returns {void}\n     */\n    Zoom.prototype.animateTransform = function (element, animate, x, y, scale) {\n        var duration = this.currentLayer.animationDuration;\n        if (!animate || duration === 0 || this.maps.isTileMap) {\n            element.setAttribute('transform', 'scale(' + (scale) + ') translate( ' + x + ' ' + y + ' )');\n            return;\n        }\n        if (!this.maps.isTileMap) {\n            zoomAnimate(element, 0, duration, new MapLocation(x, y), scale, this.maps.mapAreaRect, this.maps);\n        }\n    };\n    Zoom.prototype.applyTransform = function (animate) {\n        var layerIndex;\n        this.templateCount = 0;\n        var layer;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var zoomshapelocation;\n        var i;\n        var markerStyle;\n        var scale = this.maps.scale;\n        var x = this.maps.translatePoint.x;\n        var y = this.maps.translatePoint.y;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var collection = [];\n        this.maps.zoomShapeCollection = [];\n        if (document.getElementById(this.maps.element.id + '_mapsTooltip')) {\n            removeElement(this.maps.element.id + '_mapsTooltip');\n        }\n        if (this.layerCollectionEle) {\n            for (var i_1 = 0; i_1 < this.layerCollectionEle.childElementCount; i_1++) {\n                var layerElement = this.layerCollectionEle.childNodes[i_1];\n                if (layerElement.tagName === 'g') {\n                    this.templateCount++;\n                    this.index = layerElement.id.indexOf('_LayerIndex_') > -1 && parseFloat(layerElement.id.split('_LayerIndex_')[1].split('_')[0]);\n                    this.currentLayer = this.maps.layersCollection[this.index];\n                    var factor = this.maps.mapLayerPanel.calculateFactor(this.currentLayer);\n                    for (var j = 0; j < layerElement.childElementCount; j++) {\n                        var currentEle = layerElement.childNodes[j];\n                        if (!(currentEle.id.indexOf('_Markers_Group') > -1) && (!(currentEle.id.indexOf('_bubble_Group') > -1))\n                            && (!(currentEle.id.indexOf('_dataLableIndex_Group') > -1))) {\n                            if (this.maps.isTileMap && (currentEle.id.indexOf('_line_Group') > -1)) {\n                                currentEle.remove();\n                                if (layerElement.children.length > 0 && layerElement.children[0]) {\n                                    layerElement.insertBefore(this.maps.navigationLineModule.renderNavigation(this.currentLayer, this.maps.tileZoomLevel, this.index), layerElement.children[0]);\n                                }\n                                else {\n                                    layerElement.appendChild(this.maps.navigationLineModule.renderNavigation(this.currentLayer, this.maps.tileZoomLevel, this.index));\n                                }\n                            }\n                            else {\n                                changeBorderWidth(currentEle, this.index, scale, this.maps);\n                                this.maps.zoomTranslatePoint = this.maps.translatePoint;\n                                this.animateTransform(currentEle, animate, x, y, scale);\n                                this.shapeZoomLocation = currentEle.childNodes;\n                            }\n                        }\n                        else if (currentEle.id.indexOf('_Markers_Group') > -1) {\n                            if (!this.isPanning) {\n                                this.markerTranslates(currentEle.childNodes[0], factor, x, y, scale, 'Marker', layerElement, animate);\n                            }\n                            currentEle = layerElement.childNodes[j];\n                            var markerAnimation = void 0;\n                            if (!isNullOrUndefined(currentEle) && currentEle.id.indexOf('Markers') !== -1) {\n                                for (var k = 0; k < currentEle.childElementCount; k++) {\n                                    this.markerTranslate(currentEle.childNodes[k], factor, x, y, scale, 'Marker', animate);\n                                    var layerIndex_1 = parseInt(currentEle.childNodes[k]['id'].split('_LayerIndex_')[1].split('_')[0], 10);\n                                    var dataIndex = parseInt(currentEle.childNodes[k]['id'].split('_dataIndex_')[1].split('_')[0], 10);\n                                    var markerIndex = parseInt(currentEle.childNodes[k]['id'].split('_MarkerIndex_')[1].split('_')[0], 10);\n                                    markerAnimation = this.currentLayer.markerSettings[markerIndex].animationDuration > 0;\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    var markerSelectionValues = this.currentLayer.markerSettings[markerIndex].dataSource[dataIndex];\n                                    for (var x_1 = 0; x_1 < this.currentLayer.markerSettings[markerIndex].initialMarkerSelection.length; x_1++) {\n                                        if (this.currentLayer.markerSettings[markerIndex].initialMarkerSelection[x_1]['latitude'] ===\n                                            markerSelectionValues['latitude'] ||\n                                            this.currentLayer.markerSettings[markerIndex].initialMarkerSelection[x_1]['longitude'] ===\n                                                markerSelectionValues['longitude']) {\n                                            this.maps.markerSelection(this.currentLayer.markerSettings[markerIndex].selectionSettings, this.maps, currentEle.children[k], this.currentLayer.markerSettings[markerIndex].dataSource[dataIndex]);\n                                        }\n                                    }\n                                    if ((this.currentLayer.animationDuration > 0 || (this.maps.layersCollection[0].animationDuration > 0 && this.currentLayer.type === 'SubLayer')) && !this.isPanning) {\n                                        if (this.maps.isTileMap) {\n                                            var groupElement = document.querySelector('.GroupElement');\n                                            if (groupElement && !(document.querySelector('.ClusterGroupElement')) && markerAnimation) {\n                                                groupElement.style.display = 'none';\n                                            }\n                                        }\n                                        else {\n                                            markerStyle = 'visibility:hidden';\n                                            currentEle.setAttribute('style', markerStyle);\n                                        }\n                                    }\n                                }\n                                if (this.isPanning && this.maps.markerModule.sameMarkerData.length > 0) {\n                                    clusterSeparate(this.maps.markerModule.sameMarkerData, this.maps, currentEle, true);\n                                }\n                                else if (this.maps.markerModule.sameMarkerData.length > 0) {\n                                    this.maps.markerModule.sameMarkerData = [];\n                                    if (document.getElementById(this.maps.element.id + '_mapsTooltip')) {\n                                        removeElement(this.maps.element.id + '_mapsTooltip');\n                                    }\n                                }\n                                if (document.getElementById(this.maps.element.id + '_mapsTooltip') && this.maps.mapsTooltipModule.tooltipTargetID.indexOf('_MarkerIndex_')\n                                    && !this.isPanning) {\n                                    var mapsTooltip = this.maps.mapsTooltipModule;\n                                    var tooltipElement = currentEle.querySelector('#' + mapsTooltip.tooltipTargetID);\n                                    if (!isNullOrUndefined(tooltipElement)) {\n                                        if (tooltipElement['style']['visibility'] === 'hidden') {\n                                            removeElement(this.maps.element.id + '_mapsTooltip');\n                                        }\n                                        else {\n                                            var x_2 = parseFloat(tooltipElement.getAttribute('transform').split('(')[1].split(')')[0].split(' ')[1]);\n                                            var y_1 = parseFloat(tooltipElement.getAttribute('transform').split('(')[1].split(')')[0].split(' ')[2]);\n                                            if (this.maps.isTileMap) {\n                                                x_2 += +getElement(this.maps.element.id + '_tile_parent')['style']['left'].split('px')[0];\n                                                y_1 += +getElement(this.maps.element.id + '_tile_parent')['style']['top'].split('px')[0];\n                                            }\n                                            mapsTooltip.svgTooltip.location.x = x_2;\n                                            mapsTooltip.svgTooltip.location.y = y_1;\n                                            mapsTooltip.svgTooltip.enableAnimation = false;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else if (currentEle.id.indexOf('_bubble_Group') > -1) {\n                            var childElement = void 0;\n                            for (var k = 0; k < currentEle.childElementCount; k++) {\n                                childElement = currentEle.childNodes[k];\n                                var bubbleTransform = childElement.getAttribute('transform');\n                                layerIndex = parseFloat(childElement.id.split('_LayerIndex_')[1].split('_')[0]);\n                                var bubleIndex = parseFloat(childElement.id.split('_BubbleIndex_')[1].split('_')[0]);\n                                var dataIndex = parseFloat(childElement.id.split('_BubbleIndex_')[1].split('_')[2]);\n                                for (var l = 0; l < this.maps.bubbleModule.bubbleCollection.length; l++) {\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    var bubbleCollection = this.maps.bubbleModule.bubbleCollection[l];\n                                    if (bubbleCollection['LayerIndex'] === layerIndex && bubbleCollection['BubbleIndex'] === bubleIndex &&\n                                        bubbleCollection['DataIndex'] === dataIndex) {\n                                        var centerX = bubbleCollection['center']['x'];\n                                        var centerY = bubbleCollection['center']['y'];\n                                        var currentX = ((centerX + x) * scale);\n                                        var currentY = ((centerY + y) * scale);\n                                        var duration = this.currentLayer.animationDuration;\n                                        if (!animate || duration === 0) {\n                                            childElement.setAttribute('transform', 'translate( ' + currentX + ' ' + currentY + ' )');\n                                        }\n                                        else {\n                                            smoothTranslate(childElement, 0, duration, new MapLocation(currentX, currentY));\n                                        }\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        else if (currentEle.id.indexOf('_dataLableIndex_Group') > -1) {\n                            this.intersect = [];\n                            this.maps.zoomLabelPositions = [];\n                            this.maps.zoomLabelPositions = this.maps.dataLabelModule.dataLabelCollections;\n                            for (var k = 0; k < currentEle.childElementCount; k++) {\n                                if (currentEle.childNodes[k]['id'].indexOf('_LabelIndex_') > -1) {\n                                    var labelIndex = parseFloat(currentEle.childNodes[k]['id'].split('_LabelIndex_')[1].split('_')[0]);\n                                    this.zoomshapewidth = this.shapeZoomLocation[labelIndex].getBoundingClientRect();\n                                    this.maps.zoomShapeCollection.push(this.zoomshapewidth);\n                                    this.dataLabelTranslate(currentEle.childNodes[k], factor, x, y, scale, 'DataLabel', animate);\n                                    var dataLabel = this.maps.layers[this.index].dataLabelSettings;\n                                    var border = dataLabel.border;\n                                    if (k > 0 && border['width'] > 1) {\n                                        if (currentEle.childNodes[k - 1]['id'].indexOf('_rectIndex_') > -1) {\n                                            var labelX = ((this.maps.zoomLabelPositions[labelIndex]['location']['x'] + x) * scale);\n                                            var labelY = ((this.maps.zoomLabelPositions[labelIndex]['location']['y'] + y) * scale);\n                                            var zoomtext = currentEle.childNodes[k]['innerHTML'];\n                                            var style = this.maps.layers[this.index].dataLabelSettings.textStyle;\n                                            var zoomtextSize = measureText(zoomtext, style);\n                                            var padding = 5;\n                                            var rectElement = currentEle.childNodes[k - 1];\n                                            var rectX = labelX - zoomtextSize['width'] / 2;\n                                            var rectY = labelY - zoomtextSize['height'] / 2 - padding;\n                                            rectElement['setAttribute']('x', rectX);\n                                            rectElement['setAttribute']('y', rectY);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                this.maps.arrangeTemplate();\n            }\n            if (!isNullOrUndefined(this.currentLayer)) {\n                if (!animate || this.currentLayer.animationDuration === 0 || this.maps.isTileMap) {\n                    this.processTemplate(x, y, scale, this.maps);\n                }\n            }\n        }\n    };\n    Zoom.prototype.markerTranslates = function (element, factor, x, y, scale, type, layerElement, animate) {\n        var _this = this;\n        if (animate === void 0) { animate = false; }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var templateFn;\n        var nullCount = 0;\n        var markerCounts = 0;\n        var markerTemplateCounts = 0;\n        var layerIndex = parseInt((element ? element : layerElement).id.split('_LayerIndex_')[1].split('_')[0], 10);\n        var markerSVGObject = this.maps.renderer.createGroup({\n            id: this.maps.element.id + '_Markers_Group',\n            class: 'GroupElement',\n            style: 'pointer-events: auto;'\n        });\n        if (document.getElementById(markerSVGObject.id)) {\n            removeElement(markerSVGObject.id);\n        }\n        var mapsAreaRect = this.maps.mapAreaRect;\n        var markerTemplateElements = createElement('div', {\n            id: this.maps.element.id + '_LayerIndex_' + layerIndex + '_Markers_Template_Group',\n            className: 'template',\n            styles: 'overflow: hidden; position: absolute;pointer-events: none;' +\n                'top:' + mapsAreaRect.y + 'px;' +\n                'left:' + mapsAreaRect.x + 'px;' +\n                'height:' + mapsAreaRect.height + 'px;' +\n                'width:' + mapsAreaRect.width + 'px;'\n        });\n        if (document.getElementById(markerTemplateElements.id)) {\n            removeElement(markerTemplateElements.id);\n        }\n        var currentLayers = this.maps.layersCollection[layerIndex];\n        currentLayers.markerSettings.map(function (markerSettings, markerIndex) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var markerDatas = markerSettings.dataSource;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            Array.prototype.forEach.call(markerDatas, function (data, dataIndex) {\n                _this.maps.markerNullCount = markerIndex >= 0 && dataIndex === 0 ? 0 : _this.maps.markerNullCount;\n                var eventArgs = {\n                    template: markerSettings.template, data: data, maps: _this.maps, marker: markerSettings,\n                    cancel: false, name: markerRendering, fill: markerSettings.fill, colorValuePath: markerSettings.colorValuePath,\n                    shapeValuePath: markerSettings.shapeValuePath, height: markerSettings.height,\n                    width: markerSettings.width, imageUrl: markerSettings.imageUrl, imageUrlValuePath: markerSettings.imageUrlValuePath, shape: markerSettings.shape,\n                    border: markerSettings.border\n                };\n                eventArgs = markerShapeChoose(eventArgs, data);\n                eventArgs = markerColorChoose(eventArgs, data);\n                _this.maps.trigger('markerRendering', eventArgs, function (MarkerArgs) {\n                    if (markerSettings.shapeValuePath !== eventArgs.shapeValuePath) {\n                        eventArgs = markerShapeChoose(eventArgs, data);\n                    }\n                    if (markerSettings.colorValuePath !== eventArgs.colorValuePath) {\n                        eventArgs = markerColorChoose(eventArgs, data);\n                    }\n                    var lati = (!isNullOrUndefined(markerSettings.latitudeValuePath)) ?\n                        Number(getValueFromObject(data, markerSettings.latitudeValuePath)) : !isNullOrUndefined(data['latitude']) ?\n                        parseFloat(data['latitude']) : !isNullOrUndefined(data['Latitude']) ? data['Latitude'] : 0;\n                    var long = (!isNullOrUndefined(markerSettings.longitudeValuePath)) ?\n                        Number(getValueFromObject(data, markerSettings.longitudeValuePath)) : !isNullOrUndefined(data['longitude']) ?\n                        parseFloat(data['longitude']) : !isNullOrUndefined(data['Longitude']) ? data['Longitude'] : 0;\n                    var offset = markerSettings.offset;\n                    if (!eventArgs.cancel && markerSettings.visible && !isNullOrUndefined(long) && !isNullOrUndefined(lati)) {\n                        var markerID = _this.maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_'\n                            + markerIndex + '_dataIndex_' + dataIndex;\n                        var location_1 = (_this.maps.isTileMap) ? convertTileLatLongToPoint(new MapLocation(long, lati), _this.maps.tileZoomLevel, _this.maps.tileTranslatePoint, true) : convertGeoToPoint(lati, long, factor, currentLayers, _this.maps);\n                        var animate_1 = currentLayers.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n                        var transPoint = { x: x, y: y };\n                        if (eventArgs.template && (!isNaN(location_1.x) && !isNaN(location_1.y))) {\n                            markerTemplateCounts++;\n                            markerTemplate(eventArgs, templateFn, markerID, data, markerIndex, markerTemplateElements, location_1, transPoint, scale, offset, _this.maps);\n                        }\n                        else if (!eventArgs.template && (!isNaN(location_1.x) && !isNaN(location_1.y))) {\n                            markerCounts++;\n                            marker(eventArgs, markerSettings, markerDatas, dataIndex, location_1, transPoint, markerID, offset, scale, _this.maps, markerSVGObject);\n                        }\n                    }\n                    nullCount += (!isNaN(lati) && !isNaN(long)) ? 0 : 1;\n                    markerTemplateCounts += (eventArgs.cancel) ? 1 : 0;\n                    markerCounts += (eventArgs.cancel) ? 1 : 0;\n                    _this.maps.markerNullCount = (!isNullOrUndefined(lati) || !isNullOrUndefined(long))\n                        ? _this.maps.markerNullCount : _this.maps.markerNullCount + 1;\n                    var markerDataLength = markerDatas.length - _this.maps.markerNullCount;\n                    if (markerSVGObject.childElementCount === (markerDatas.length - markerTemplateCounts - nullCount) && (type !== 'Template')) {\n                        layerElement.appendChild(markerSVGObject);\n                        if (currentLayers.markerClusterSettings.allowClustering) {\n                            _this.maps.svgObject.appendChild(markerSVGObject);\n                            _this.maps.element.appendChild(_this.maps.svgObject);\n                            clusterTemplate(currentLayers, markerSVGObject, _this.maps, layerIndex, markerSVGObject, layerElement, true, true);\n                        }\n                    }\n                    if (markerTemplateElements.childElementCount === (markerDatas.length - markerCounts - nullCount) && getElementByID(_this.maps.element.id + '_Secondary_Element')) {\n                        getElementByID(_this.maps.element.id + '_Secondary_Element').appendChild(markerTemplateElements);\n                        if (scale >= 1) {\n                            if (currentLayers.markerClusterSettings.allowClustering) {\n                                clusterTemplate(currentLayers, markerTemplateElements, _this.maps, layerIndex, markerSVGObject, layerElement, false, true);\n                            }\n                        }\n                    }\n                });\n            });\n        });\n    };\n    /**\n     * To translate the layer template elements\n     *\n     * @param {number} x - Specifies the x value\n     * @param {number} y - Specifies the y value\n     * @param {number} scale - Specifies the scale value\n     * @param {Maps} maps - Specifies the maps value\n     * @returns {void}\n     * @private\n     */\n    Zoom.prototype.processTemplate = function (x, y, scale, maps) {\n        for (var i = 0; i < this.templateCount; i++) {\n            var factor = maps.mapLayerPanel.calculateFactor(this.currentLayer);\n            var markerTemplateElement = getElementByID(maps.element.id + '_LayerIndex_' +\n                i + '_Markers_Template_Group');\n            var datalabelTemplateElemement = getElementByID(maps.element.id + '_LayerIndex_'\n                + i + '_Label_Template_Group');\n            if ((!isNullOrUndefined(markerTemplateElement)) && markerTemplateElement.childElementCount > 0) {\n                for (var k = 0; k < markerTemplateElement.childElementCount; k++) {\n                    this.markerTranslate(markerTemplateElement.childNodes[k], factor, x, y, scale, 'Template');\n                }\n            }\n            if ((!isNullOrUndefined(datalabelTemplateElemement)) && datalabelTemplateElemement.childElementCount > 0) {\n                for (var k = 0; k < datalabelTemplateElemement.childElementCount; k++) {\n                    this.dataLabelTranslate(datalabelTemplateElemement.childNodes[k], factor, x, y, scale, 'Template');\n                }\n            }\n        }\n    };\n    Zoom.prototype.dataLabelTranslate = function (element, factor, x, y, scale, type, animate) {\n        if (animate === void 0) { animate = false; }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var labelCollection = this.maps.dataLabelModule.dataLabelCollections;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var zoomelement = element.getBoundingClientRect();\n        var text;\n        var trimmedLable;\n        var style = this.maps.layers[this.index].dataLabelSettings.textStyle;\n        var zoomtext;\n        var zoomtextSize;\n        var zoomtrimLabel;\n        var labelPath = this.maps.layers[this.index].dataLabelSettings.labelPath;\n        var layerIndex = parseFloat(element.id.split('_LayerIndex_')[1].split('_')[0]);\n        var shapeIndex = parseFloat(element.id.split('_shapeIndex_')[1].split('_')[0]);\n        var labelIndex;\n        if (element.id.indexOf('_LabelIndex_') > -1) {\n            labelIndex = parseFloat(element.id.split('_LabelIndex_')[1].split('_')[0]);\n        }\n        var duration = this.currentLayer.animationDuration;\n        for (var l = 0; l < labelCollection.length; l++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var label = labelCollection[l];\n            if (label['layerIndex'] === layerIndex && label['shapeIndex'] === shapeIndex\n                && label['labelIndex'] === labelIndex) {\n                var labelX = label['location']['x'];\n                var labelY = label['location']['y'];\n                if (type === 'Template') {\n                    var layerEle = getElementByID(this.maps.element.id + '_Layer_Collections');\n                    labelX = ((Math.abs(this.maps.baseMapRectBounds['min']['x'] - labelX)) * scale);\n                    labelY = ((Math.abs(this.maps.baseMapRectBounds['min']['y'] - labelY)) * scale);\n                    var templateOffset = element.getBoundingClientRect();\n                    var layerOffset = layerEle.getBoundingClientRect();\n                    var elementOffset = element.parentElement.getBoundingClientRect();\n                    var x_3 = ((labelX) + (layerOffset.left - elementOffset.left) - (templateOffset.width / 2));\n                    var y_2 = ((labelY) + (layerOffset.top - elementOffset.top) - (templateOffset.height / 2));\n                    element.style.left = x_3 + 'px';\n                    element.style.top = y_2 + 'px';\n                }\n                else {\n                    labelX = ((labelX + x) * scale);\n                    labelY = ((labelY + y) * scale);\n                    zoomtext = label['dataLabelText'];\n                    zoomtextSize = measureText(zoomtext, style);\n                    var start = labelY - zoomtextSize['height'] / 4;\n                    var end = labelY + zoomtextSize['height'] / 4;\n                    var xpositionEnds = labelX + zoomtextSize['width'] / 2;\n                    var xpositionStart = labelX - zoomtextSize['width'] / 2;\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    var textLocations = { rightWidth: xpositionEnds, leftWidth: xpositionStart, heightTop: start, heightBottom: end };\n                    if (!animate || duration === 0) {\n                        element.setAttribute('transform', 'translate( ' + labelX + ' ' + labelY + ' )');\n                    }\n                    if (this.maps.layers[this.index].dataLabelSettings.smartLabelMode === 'Hide') {\n                        if (scale > 1) {\n                            text = (this.zoomshapewidth['width'] >= zoomtextSize['width']) ? zoomtext : '';\n                            element.innerHTML = text;\n                        }\n                        else {\n                            text = (this.maps.dataLabelShape[l] >= zoomtextSize['width']) ? zoomtext : '';\n                            element.innerHTML = text;\n                        }\n                    }\n                    if (this.maps.layers[this.index].dataLabelSettings.smartLabelMode === 'Trim') {\n                        if (scale > 1) {\n                            zoomtrimLabel = textTrim(this.zoomshapewidth['width'], zoomtext, style);\n                            text = zoomtrimLabel;\n                            element.innerHTML = text;\n                        }\n                        else {\n                            zoomtrimLabel = textTrim(this.maps.dataLabelShape[l], zoomtext, style);\n                            text = zoomtrimLabel;\n                            element.innerHTML = text;\n                        }\n                    }\n                    if (this.maps.layers[this.index].dataLabelSettings.intersectionAction === 'Hide') {\n                        for (var m = 0; m < this.intersect.length; m++) {\n                            if (!isNullOrUndefined(this.intersect[m])) {\n                                if (textLocations['leftWidth'] > this.intersect[m]['rightWidth']\n                                    || textLocations['rightWidth'] < this.intersect[m]['leftWidth']\n                                    || textLocations['heightTop'] > this.intersect[m]['heightBottom']\n                                    || textLocations['heightBottom'] < this.intersect[m]['heightTop']) {\n                                    text = !isNullOrUndefined(text) ? text : zoomtext;\n                                    element.innerHTML = text;\n                                }\n                                else {\n                                    text = '';\n                                    element.innerHTML = text;\n                                    break;\n                                }\n                            }\n                        }\n                        this.intersect.push(textLocations);\n                    }\n                    if (this.maps.layers[this.index].dataLabelSettings.intersectionAction === 'Trim') {\n                        for (var j = 0; j < this.intersect.length; j++) {\n                            if (!isNullOrUndefined(this.intersect[j])) {\n                                if (textLocations['rightWidth'] < this.intersect[j]['leftWidth']\n                                    || textLocations['leftWidth'] > this.intersect[j]['rightWidth']\n                                    || textLocations['heightBottom'] < this.intersect[j]['heightTop']\n                                    || textLocations['heightTop'] > this.intersect[j]['heightBottom']) {\n                                    trimmedLable = !isNullOrUndefined(text) ? text : zoomtext;\n                                    if (scale > 1) {\n                                        trimmedLable = textTrim(this.zoomshapewidth['width'], trimmedLable, style);\n                                    }\n                                    element.innerHTML = trimmedLable;\n                                }\n                                else {\n                                    if (textLocations['leftWidth'] > this.intersect[j]['leftWidth']) {\n                                        var width = this.intersect[j]['rightWidth'] - textLocations['leftWidth'];\n                                        var difference = width - (textLocations['rightWidth'] - textLocations['leftWidth']);\n                                        text = !isNullOrUndefined(text) ? text : zoomtext;\n                                        trimmedLable = textTrim(difference, text, style);\n                                        element.innerHTML = trimmedLable;\n                                        break;\n                                    }\n                                    if (textLocations['leftWidth'] < this.intersect[j]['leftWidth']) {\n                                        var width = textLocations['rightWidth'] - this.intersect[j]['leftWidth'];\n                                        var difference = Math.abs(width - (textLocations['rightWidth'] - textLocations['leftWidth']));\n                                        text = !isNullOrUndefined(text) ? text : zoomtext;\n                                        trimmedLable = textTrim(difference, text, style);\n                                        element.innerHTML = trimmedLable;\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        this.intersect.push(textLocations);\n                        if (isNullOrUndefined(trimmedLable)) {\n                            trimmedLable = textTrim(this.zoomshapewidth['width'], zoomtext, style);\n                            element.innerHTML = trimmedLable;\n                        }\n                    }\n                    else {\n                        smoothTranslate(element, 0, duration, new MapLocation(labelX, labelY));\n                    }\n                }\n            }\n        }\n    };\n    Zoom.prototype.markerTranslate = function (element, factor, x, y, scale, type, animate) {\n        if (animate === void 0) { animate = false; }\n        var layerIndex = parseInt(element.id.split('_LayerIndex_')[1].split('_')[0], 10);\n        var markerIndex = parseInt(element.id.split('_MarkerIndex_')[1].split('_')[0], 10);\n        var dataIndex = parseInt(element.id.split('_dataIndex_')[1].split('_')[0], 10);\n        var layer = this.maps.layersCollection[layerIndex];\n        var marker = layer.markerSettings[markerIndex];\n        if (!isNullOrUndefined(marker) && !isNullOrUndefined(marker.dataSource) && !isNullOrUndefined(marker.dataSource[dataIndex])) {\n            var lng = (!isNullOrUndefined(marker.longitudeValuePath)) ?\n                Number(getValueFromObject(marker.dataSource[dataIndex], marker.longitudeValuePath)) :\n                !isNullOrUndefined(marker.dataSource[dataIndex]['longitude']) ? parseFloat(marker.dataSource[dataIndex]['longitude']) :\n                    !isNullOrUndefined(marker.dataSource[dataIndex]['Latitude']) ? parseFloat(marker.dataSource[dataIndex]['Latitude']) : 0;\n            var lat = (!isNullOrUndefined(marker.latitudeValuePath)) ?\n                Number(getValueFromObject(marker.dataSource[dataIndex], marker.latitudeValuePath)) :\n                !isNullOrUndefined(marker.dataSource[dataIndex]['latitude']) ? parseFloat(marker.dataSource[dataIndex]['latitude']) :\n                    !isNullOrUndefined(marker.dataSource[dataIndex]['Latitude']) ? parseFloat(marker.dataSource[dataIndex]['Latitude']) : 0;\n            var duration = this.currentLayer.animationDuration;\n            var location_2 = (this.maps.isTileMap) ? convertTileLatLongToPoint(new Point(lng, lat), this.maps.tileZoomLevel, this.maps.tileTranslatePoint, true) : convertGeoToPoint(lat, lng, factor, layer, this.maps);\n            if (this.maps.isTileMap) {\n                if (type === 'Template') {\n                    var templateOffset = element.getBoundingClientRect();\n                    element.style.left = ((location_2.x - (templateOffset.width / 2)) + marker.offset.x) + 'px';\n                    element.style.top = ((location_2.y - (templateOffset.height / 2)) + marker.offset.y) + 'px';\n                    if (this.maps.layers[this.maps.baseLayerIndex].layerType === 'GoogleStaticMap') {\n                        var staticMapOffset = getElementByID(this.maps.element.id + '_StaticGoogleMap').getBoundingClientRect();\n                        var staticMapOffsetWidth = 640;\n                        if (element['style']['display'] !== 'none') {\n                            if ((staticMapOffset['x'] > templateOffset['x'] || staticMapOffset['x'] + staticMapOffsetWidth < templateOffset['x'] + templateOffset['width'])\n                                && (staticMapOffset['y'] > templateOffset['y'] || staticMapOffset['y'] + staticMapOffset['height'] < templateOffset['y'] + templateOffset['height'])) {\n                                element['style']['display'] = 'none';\n                            }\n                            else if ((staticMapOffset['x'] > templateOffset['x'] || staticMapOffset['x'] + staticMapOffsetWidth < templateOffset['x'] + templateOffset['width'])) {\n                                element['style']['display'] = 'none';\n                            }\n                        }\n                    }\n                }\n                else {\n                    location_2.x += marker.offset.x;\n                    location_2.y += marker.offset.y;\n                    element.setAttribute('transform', 'translate( ' + location_2.x + ' ' + location_2.y + ' )');\n                }\n            }\n            else {\n                if (type === 'Template') {\n                    if (duration > 0) {\n                        location_2.x = ((Math.abs(this.maps.baseMapRectBounds['min']['x'] - location_2.x)) * scale);\n                        location_2.y = ((Math.abs(this.maps.baseMapRectBounds['min']['y'] - location_2.y)) * scale);\n                        var layerOffset = getElementByID(this.maps.element.id + '_Layer_Collections').getBoundingClientRect();\n                        var elementOffset = element.parentElement.getBoundingClientRect();\n                        element.style.left = (((location_2.x) + (layerOffset.left - elementOffset.left)) + marker.offset.x) + 'px';\n                        element.style.top = (((location_2.y) + (layerOffset.top - elementOffset.top)) + marker.offset.y) + 'px';\n                        element.style.transform = 'translate(-50%, -50%)';\n                    }\n                    else {\n                        var elementOffset = element.getBoundingClientRect();\n                        element.style.left = ((location_2.x + x) * scale) + marker.offset.x - this.maps.mapAreaRect.x - (elementOffset.width / 2) + 'px';\n                        element.style.top = ((location_2.y + y) * scale) + marker.offset.y - this.maps.mapAreaRect.y - (elementOffset.height / 2) + 'px';\n                    }\n                }\n                else {\n                    location_2.x = (((location_2.x + x) * scale) + marker.offset.x);\n                    location_2.y = (((location_2.y + y) * scale) + marker.offset.y);\n                    if (!animate || duration === 0) {\n                        element.setAttribute('transform', 'translate( ' + location_2.x + ' ' + location_2.y + ' )');\n                    }\n                    else {\n                        smoothTranslate(element, 0, duration, location_2);\n                    }\n                }\n            }\n        }\n    };\n    Zoom.prototype.markerLineAnimation = function (map) {\n        if (map.isTileMap) {\n            for (var i = 0; i < map.layersCollection.length; i++) {\n                var markerTemplateElement = getElementByID(this.maps.element.id + '_LayerIndex_' + i + '_Markers_Template_Group');\n                var lineElement = getElementByID(this.maps.element.id + '_LayerIndex_' + i + '_line_Group');\n                if (!isNullOrUndefined(markerTemplateElement)) {\n                    markerTemplateElement.style.visibility = 'hidden';\n                }\n                if (!isNullOrUndefined(lineElement)) {\n                    lineElement.style.visibility = 'hidden';\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Zoom.prototype.panning = function (direction, xDifference, yDifference, mouseLocation) {\n        var map = this.maps;\n        var panArgs;\n        var down = this.mouseDownPoints;\n        var move = this.mouseMovePoints;\n        var scale = map.scale;\n        map.markerZoomedState = false;\n        map.zoomPersistence = map.enablePersistence;\n        map.defaultState = false;\n        map.initialCheck = false;\n        var translatePoint = map.translatePoint;\n        var prevTilePoint = map.tileTranslatePoint;\n        var x;\n        var y;\n        xDifference = !isNullOrUndefined(xDifference) ? xDifference : (down.x - move.x);\n        yDifference = !isNullOrUndefined(yDifference) ? yDifference : (down.y - move.y);\n        this.maps.mergeCluster();\n        if (!map.isTileMap) {\n            var legendElement = document.getElementById(map.element.id + '_Legend_Group');\n            var legendHeight = !isNullOrUndefined(legendElement) ? legendElement.getClientRects()[0].height : 0;\n            x = translatePoint.x - xDifference / scale;\n            y = translatePoint.y - yDifference / scale;\n            var layerRect = getElementByID(map.element.id + '_Layer_Collections').getBoundingClientRect();\n            var elementRect = getElementByID(map.element.id + '_svg').getBoundingClientRect();\n            var panningXDirection = ((xDifference < 0 ? layerRect.left <= (elementRect.left + map.mapAreaRect.x) :\n                ((layerRect.left + layerRect.width) >= (elementRect.left + elementRect.width) + map.mapAreaRect.x + map.margin.left)));\n            var panningYDirection = ((yDifference < 0 ? layerRect.top <= (elementRect.top + map.mapAreaRect.y) :\n                ((layerRect.top + layerRect.height + legendHeight + map.margin.top) >= (elementRect.top + elementRect.height))));\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var location_3 = this.maps.getGeoLocation(this.maps.layersCollection.length - 1, mouseLocation['layerX'], mouseLocation['layerY']);\n            panArgs = {\n                cancel: false, name: pan, maps: map,\n                tileTranslatePoint: {}, translatePoint: { previous: translatePoint, current: new Point(x, y) },\n                scale: map.scale, tileZoomLevel: map.tileZoomLevel, latitude: location_3['latitude'], longitude: location_3['longitude']\n            };\n            map.trigger(pan, panArgs);\n            if (!panArgs.cancel) {\n                if (panningXDirection && panningYDirection) {\n                    map.translatePoint = new Point(x, y);\n                    this.applyTransform();\n                }\n                else if (panningXDirection) {\n                    map.translatePoint = new Point(x, map.translatePoint.y);\n                    this.applyTransform();\n                }\n                else if (panningYDirection) {\n                    map.translatePoint = new Point(map.translatePoint.x, y);\n                    this.applyTransform();\n                }\n            }\n            this.maps.zoomNotApplied = false;\n        }\n        else if (this.maps.tileZoomLevel > 1) {\n            x = map.tileTranslatePoint.x - xDifference;\n            y = map.tileTranslatePoint.y - yDifference;\n            this.distanceX = x - map.tileTranslatePoint.x;\n            this.distanceY = y - map.tileTranslatePoint.y;\n            map.tileTranslatePoint.x = x;\n            map.tileTranslatePoint.y = y;\n            if ((map.tileTranslatePoint.y > -10 && yDifference < 0) || ((map.tileTranslatePoint.y < -((Math.pow(2, this.maps.tileZoomLevel) - 2) * 256) && yDifference > 0))) {\n                map.tileTranslatePoint.x = x + xDifference;\n                map.tileTranslatePoint.y = y + yDifference;\n            }\n            map.translatePoint.x = (map.tileTranslatePoint.x - xDifference) / map.scale;\n            map.translatePoint.y = (map.tileTranslatePoint.y - yDifference) / map.scale;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var location_4 = this.maps.getTileGeoLocation(mouseLocation['layerX'], mouseLocation['layerY']);\n            panArgs = {\n                cancel: false, name: pan, maps: map,\n                tileTranslatePoint: { previous: prevTilePoint, current: map.tileTranslatePoint },\n                translatePoint: { previous: translatePoint, current: map.translatePoint }, scale: map.scale,\n                tileZoomLevel: map.tileZoomLevel, latitude: location_4['latitude'], longitude: location_4['longitude']\n            };\n            map.trigger(pan, panArgs);\n            map.mapLayerPanel.generateTiles(map.tileZoomLevel, map.tileTranslatePoint, 'Pan');\n            this.applyTransform();\n        }\n        map.zoomTranslatePoint = map.translatePoint;\n        this.mouseDownPoints = this.mouseMovePoints;\n        this.maps.zoomNotApplied = false;\n        this.isSingleClick = false;\n    };\n    Zoom.prototype.toAlignSublayer = function () {\n        this.maps.translatePoint.x = !isNullOrUndefined(this.distanceX) ? (this.maps.translatePoint.x -\n            (this.distanceX / this.maps.scale)) : this.maps.translatePoint.x;\n        this.maps.translatePoint.y = !isNullOrUndefined(this.distanceY) ? this.maps.translatePoint.y -\n            (this.distanceY / this.maps.scale) : this.maps.translatePoint.y;\n        this.applyTransform(false);\n    };\n    Zoom.prototype.toolBarZooming = function (zoomFactor, type) {\n        var _this = this;\n        var map = this.maps;\n        map.initialCheck = false;\n        map.defaultState = ((type === 'Reset' && zoomFactor === 1 && !(map.zoomSettings.resetToInitial && map.applyZoomReset))\n            || (type === 'ZoomOut' && zoomFactor === 1));\n        var prevLevel = map.tileZoomLevel;\n        var scale = map.previousScale = map.scale;\n        map.markerZoomedState = false;\n        map.zoomPersistence = map.enablePersistence;\n        map.mapScaleValue = zoomFactor;\n        var maxZoom = map.zoomSettings.maxZoom;\n        var minZoom = map.zoomSettings.minZoom;\n        var size = map.mapAreaRect;\n        var translatePoint = map.previousPoint = map.translatePoint;\n        var prevTilePoint = map.tileTranslatePoint;\n        map.previousProjection = map.projectionType;\n        zoomFactor = (type === 'ZoomOut') ? (Math.round(zoomFactor) === 1 ? 1 : zoomFactor) : zoomFactor;\n        zoomFactor = (type === 'Reset') ? 1 : (Math.round(zoomFactor) === 0) ? 1 : zoomFactor;\n        zoomFactor = (minZoom > zoomFactor && type === 'ZoomIn') ? minZoom + 1 : zoomFactor;\n        var zoomArgs;\n        if ((!map.isTileMap) && (type === 'ZoomIn' ? zoomFactor >= minZoom && zoomFactor <= maxZoom : zoomFactor >= minZoom\n            || map.isReset)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var min = map.baseMapRectBounds['min'];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var max = map.baseMapRectBounds['max'];\n            var mapWidth = Math.abs(max['x'] - min['x']);\n            var mapHeight = Math.abs(min['y'] - max['y']);\n            var translatePointX = translatePoint.x - (((size.width / scale) - (size.width / zoomFactor)) / 2);\n            var translatePointY = translatePoint.y - (((size.height / scale) - (size.height / zoomFactor)) / 2);\n            var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * zoomFactor;\n            translatePointX = (currentHeight < map.mapAreaRect.height) ? (size.x + ((-(min['x'])) + ((size.width / 2) - (mapWidth / 2))))\n                : translatePointX;\n            translatePointY = (currentHeight < map.mapAreaRect.height) ? (size.y + ((-(min['y'])) + ((size.height / 2) - (mapHeight / 2))))\n                : translatePointY;\n            map.translatePoint = new Point(translatePointX, translatePointY);\n            map.zoomTranslatePoint = map.translatePoint;\n            map.scale = zoomFactor;\n            this.triggerZoomEvent(prevTilePoint, prevLevel, type);\n            this.applyTransform(true);\n        }\n        else if ((map.isTileMap) && ((zoomFactor >= minZoom && zoomFactor <= maxZoom) || map.isReset)) {\n            var tileZoomFactor = prevLevel < minZoom && !map.isReset ? minZoom : zoomFactor;\n            map.scale = Math.pow(2, tileZoomFactor - 1);\n            map.tileZoomLevel = tileZoomFactor;\n            if (map.previousScale !== map.scale || map.isReset) {\n                map.zoomSettings.zoomFactor = zoomFactor;\n                var position = { x: map.availableSize.width / 2, y: map.availableSize.height / 2 };\n                this.getTileTranslatePosition(prevLevel, tileZoomFactor, position, type);\n                if (map.zoomSettings.resetToInitial && map.applyZoomReset && type === 'Reset' || (type === 'ZoomOut' && map.zoomSettings.resetToInitial && map.applyZoomReset && tileZoomFactor <= map.initialZoomLevel)) {\n                    map.initialCheck = true;\n                    map.zoomPersistence = false;\n                    map.tileTranslatePoint.x = map.initialTileTranslate.x;\n                    map.tileTranslatePoint.y = map.initialTileTranslate.y;\n                    tileZoomFactor = map.tileZoomLevel = map.mapScaleValue = map.initialZoomLevel;\n                }\n                this.triggerZoomEvent(prevTilePoint, prevLevel, type);\n                map.translatePoint.y = (map.tileTranslatePoint.y - (0.01 * map.mapScaleValue)) / map.scale;\n                map.translatePoint.x = (map.tileTranslatePoint.x - (0.01 * map.mapScaleValue)) / map.scale;\n                if (document.getElementById(this.maps.element.id + '_LayerIndex_1')) {\n                    document.getElementById(this.maps.element.id + '_LayerIndex_1').style.display = 'none';\n                }\n                if (document.querySelector('.GroupElement')) {\n                    document.querySelector('.GroupElement').style.display = 'none';\n                }\n                this.markerLineAnimation(map);\n                map.mapLayerPanel.generateTiles(tileZoomFactor, map.tileTranslatePoint, type);\n                var element1 = document.getElementById(this.maps.element.id + '_tiles');\n                var animationDuration = this.maps.layersCollection[0].animationDuration;\n                setTimeout(function () {\n                    if (type === 'ZoomOut' || type === 'Reset') {\n                        // element1.removeChild(element1.children[element1.childElementCount - 1]);\n                        // element1.childElementCount ? element1.removeChild(element1.children[element1.childElementCount - 1]) : element1;\n                    }\n                    _this.applyTransform(true);\n                    if (document.getElementById(_this.maps.element.id + '_LayerIndex_1')) {\n                        document.getElementById(_this.maps.element.id + '_LayerIndex_1').style.display = 'block';\n                    }\n                }, animationDuration);\n            }\n            this.maps.zoomNotApplied = false;\n        }\n    };\n    Zoom.prototype.createZoomingToolbars = function () {\n        var map = this.maps;\n        this.toolBarGroup = map.renderer.createGroup({\n            id: map.element.id + '_Zooming_KitCollection',\n            opacity: map.theme.toLowerCase() === 'fluentuidark' ? 0.6 : 0.3\n        });\n        var kitHeight = 16;\n        var kitWidth = 16;\n        var xSpacing = 15;\n        var ySpacing = 15;\n        var padding = 20;\n        var orientation = map.zoomSettings.toolBarOrientation;\n        var toolbarsCollection = map.zoomSettings.toolbars;\n        var shadowElement = '<filter id=\"chart_shadow\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/>';\n        shadowElement += '<feOffset dx=\"-3\" dy=\"4\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"1\"/>';\n        shadowElement += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n        var toolBarLength = map.zoomSettings.toolbars.length;\n        var toolWidth = (map.zoomSettings.toolBarOrientation === 'Horizontal') ? (toolBarLength * kitWidth) + (toolBarLength * padding) : (kitWidth * 2);\n        var toolHeight = (map.zoomSettings.toolBarOrientation === 'Horizontal') ? (kitHeight * 2) : (toolBarLength * kitHeight) + (toolBarLength * padding);\n        this.toolBarGroup.appendChild(map.renderer.drawRectangle(new RectOption(map.element.id + '_Zooming_Rect', 'transparent', { color: 'transparent', width: 1 }, 1, new Rect(0, 0, toolWidth, toolHeight), 0, 0)));\n        var defElement = map.renderer.createDefs();\n        defElement.innerHTML = shadowElement;\n        this.toolBarGroup.appendChild(defElement);\n        var outerElement = map.renderer.drawRectangle(new RectOption(map.element.id + '_Zooming_Rect', 'transparent', { color: 'transparent', width: 1 }, 0.1, new Rect(0, 0, toolWidth, toolHeight), 0, 0));\n        outerElement.setAttribute('filter', 'url(#chart_shadow)');\n        this.toolBarGroup.appendChild(outerElement);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var performFunction;\n        for (var i = 0; i < toolbarsCollection.length; i++) {\n            var toolbar_1 = toolbarsCollection[i];\n            var pathOptions = void 0;\n            var polyOptions = void 0;\n            this.currentToolbarEle = map.renderer.createGroup({\n                id: map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Group',\n                transform: 'translate( ' + xSpacing + ' ' + ySpacing + ' ) '\n            });\n            this.currentToolbarEle.setAttribute('class', 'e-maps-toolbar');\n            var fillColor = '';\n            var fill = 'transparent';\n            var direction = '';\n            var polygonDirection = '';\n            this.selectionColor = this.maps.zoomSettings.selectionColor || this.maps.themeStyle.zoomSelectionColor;\n            switch (toolbar_1.toLowerCase()) {\n                case 'zoom': {\n                    var fillColor_1 = void 0;\n                    var strokeColor = void 0;\n                    direction = 'M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,';\n                    direction += '5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571';\n                    direction = direction + 'L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,';\n                    if (this.maps.zoomSettings.enablePanning && !this.maps.zoomSettings.enableSelectionZooming) {\n                        fillColor_1 = fill;\n                        strokeColor = this.maps.themeStyle.zoomFillColor;\n                    }\n                    else if (this.maps.zoomSettings.enablePanning && this.maps.zoomSettings.enableSelectionZooming) {\n                        fillColor_1 = fill;\n                        strokeColor = this.maps.themeStyle.zoomFillColor;\n                    }\n                    else if (!this.maps.zoomSettings.enablePanning && !this.maps.zoomSettings.enableSelectionZooming) {\n                        fillColor_1 = fill;\n                        strokeColor = this.maps.themeStyle.zoomFillColor;\n                    }\n                    else {\n                        fillColor_1 = this.selectionColor;\n                        strokeColor = this.selectionColor;\n                    }\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, fillColor_1, 1, strokeColor, 1, 1, null, direction + '4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z')));\n                    this.zoomElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                }\n                case 'zoomin':\n                    direction = 'M 8, 0 L 8, 16 M 0, 8 L 16, 8';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Path', fill, 3, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction)));\n                    this.zoomInElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                case 'zoomout':\n                    direction = 'M 0, 8 L 16, 8';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, fill, 3, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction)));\n                    this.zoomOutElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                case 'pan': {\n                    var color = void 0;\n                    direction = 'M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,';\n                    direction += '11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z';\n                    if (this.maps.zoomSettings.enablePanning && this.maps.zoomModule.isDragZoom) {\n                        color = '#737373';\n                    }\n                    else if (!this.maps.zoomSettings.enablePanning) {\n                        color = '#737373';\n                        this.currentToolbarEle.setAttribute('class', '');\n                    }\n                    else {\n                        color = this.selectionColor;\n                    }\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, color, 1, color, 1, 1, null, direction)));\n                    this.panColor = color;\n                    this.panElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                }\n                case 'reset':\n                    direction = 'M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,';\n                    direction += '1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,';\n                    direction += '13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, this.fillColor, null, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction + '3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z')));\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n            }\n            this.currentToolbarEle.appendChild(map.renderer.drawCircle(new CircleOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Rect', fill, { color: this.maps.themeStyle.zoomFillColor, width: 1 }, 1, 8, 8, 16, '')));\n            xSpacing = (orientation === 'Horizontal') ? (xSpacing + (kitWidth + padding)) : xSpacing;\n            ySpacing = (orientation === 'Horizontal') ? ySpacing : (ySpacing + (kitHeight + padding));\n            this.toolBarGroup.appendChild(this.currentToolbarEle);\n        }\n    };\n    Zoom.prototype.performToolBarAction = function (e) {\n        var target = e.target;\n        e.stopImmediatePropagation();\n        var isTouch = e.pointerType === 'touch' || e.pointerType === '2' || (e.type.indexOf('touch') > -1);\n        var toolbar = target.id.split('_Zooming_ToolBar_')[1].split('_')[0];\n        if (isTouch) {\n            this.handled = true;\n            this.performZoomingByToolBar(toolbar);\n        }\n        else if ((e.type === 'mousedown' || e.type === 'pointerdown') && !this.handled) {\n            this.handled = false;\n            this.performZoomingByToolBar(toolbar);\n        }\n        else {\n            this.handled = false;\n        }\n    };\n    /**\n     * @param {string} type - Specifies the type.\n     * @returns {void}\n     * @private\n     */\n    Zoom.prototype.performZoomingByToolBar = function (type) {\n        var map = this.maps;\n        map.isReset = false;\n        switch (type.toLowerCase()) {\n            case 'zoom':\n                this.panColor = this.fillColor;\n                this.zoomColor = this.selectionColor;\n                this.applySelection(this.zoomElements, this.selectionColor);\n                this.applySelection(this.panElements, this.fillColor);\n                break;\n            case 'pan':\n                if (!this.maps.zoomSettings.enablePanning) {\n                    this.panColor = '#737373';\n                }\n                else {\n                    this.panColor = this.selectionColor;\n                }\n                this.zoomColor = this.fillColor;\n                if (!this.maps.zoomSettings.enablePanning) {\n                    this.applySelection(this.zoomElements, this.selectionColor);\n                    this.applySelection(this.panElements, this.panColor);\n                }\n                else {\n                    this.applySelection(this.zoomElements, this.fillColor);\n                    this.applySelection(this.panElements, this.panColor);\n                }\n                break;\n            case 'zoomin':\n                map.staticMapZoom = map.tileZoomLevel;\n                if (map.staticMapZoom > 0 && map.staticMapZoom < 22) {\n                    map.staticMapZoom += 1;\n                }\n                this.toolBarZooming((map.isTileMap ? map.tileZoomLevel : map.scale) + 1, 'ZoomIn');\n                break;\n            case 'zoomout':\n                map.staticMapZoom = map.tileZoomLevel;\n                map.markerCenterLatitude = null;\n                map.markerCenterLongitude = null;\n                this.toolBarZooming((map.isTileMap ? map.tileZoomLevel : map.scale) - 1, 'ZoomOut');\n                break;\n            case 'reset':\n                map.staticMapZoom = map.zoomSettings.enable ? map.zoomSettings.zoomFactor : 0;\n                map.markerCenterLatitude = null;\n                map.markerCenterLongitude = null;\n                this.toolBarZooming(1, 'Reset');\n                if (!this.maps.zoomSettings.enablePanning) {\n                    this.applySelection(this.zoomElements, this.selectionColor);\n                    this.applySelection(this.panElements, '#737373');\n                }\n                else {\n                    this.applySelection(this.zoomElements, this.fillColor);\n                    this.applySelection(this.panElements, this.selectionColor);\n                }\n        }\n        this.panningStyle(type.toLowerCase());\n    };\n    Zoom.prototype.panningStyle = function (toolbar) {\n        var svg = getElementByID(this.maps.element.id + '_svg');\n        if (toolbar === 'pan' || this.isPanning) {\n            svg.setAttribute('class', 'e-maps-panning');\n        }\n        else {\n            svg.setAttribute('class', '');\n        }\n    };\n    Zoom.prototype.applySelection = function (elements, color) {\n        if (!elements) {\n            return;\n        }\n        var childElement;\n        for (var i = 0; i < elements.childElementCount; i++) {\n            childElement = elements.childNodes[i];\n            if (childElement.tagName !== 'circle') {\n                childElement.setAttribute('fill', color);\n                childElement.setAttribute('stroke', color);\n            }\n        }\n    };\n    Zoom.prototype.showTooltip = function (e) {\n        var text = e.target.id.split('_Zooming_ToolBar_')[1].split('_')[0];\n        if (!this.isTouch) {\n            createTooltip('EJ2_Map_Toolbar_Tip', this.maps.getLocalizedLabel(text), (e.pageY + 10), (e.pageX + 10), '10px');\n        }\n    };\n    Zoom.prototype.removeTooltip = function () {\n        if (getElementByID('EJ2_Map_Toolbar_Tip')) {\n            remove(getElementByID('EJ2_Map_Toolbar_Tip'));\n        }\n    };\n    Zoom.prototype.alignToolBar = function () {\n        var map = this.maps;\n        var padding = 10;\n        var element = createElement('div', { id: map.element.id + '_ToolBar', styles: 'position:absolute;z-index:2' });\n        var rectSVGObject = map.renderer.createSvg({\n            id: map.element.id + '_Zooming_ToolBar', width: 10, height: 10\n        });\n        rectSVGObject.appendChild(this.toolBarGroup);\n        element.appendChild(rectSVGObject);\n        if (getElementByID(map.element.id + '_Secondary_Element')) {\n            getElementByID(map.element.id + '_Secondary_Element').appendChild(element);\n        }\n        var toolBarSize = this.toolBarGroup.getBoundingClientRect();\n        rectSVGObject.setAttribute('height', (toolBarSize.height + padding / 2).toString());\n        rectSVGObject.setAttribute('width', (toolBarSize.width + padding / 2).toString());\n        var size = !isNullOrUndefined(map.totalRect) ? map.totalRect : map.mapAreaRect;\n        var x = 0;\n        var y = 0;\n        switch (map.zoomSettings.verticalAlignment) {\n            case 'Near':\n                y = size.y;\n                break;\n            case 'Center':\n                y = (size.height / 2) - (toolBarSize.height / 2);\n                break;\n            case 'Far':\n                y = (size.height - toolBarSize.height) - padding;\n                break;\n        }\n        switch (map.zoomSettings.horizontalAlignment) {\n            case 'Near':\n                x = size.x;\n                break;\n            case 'Center':\n                x = (size.width / 2) - (toolBarSize.width / 2);\n                break;\n            case 'Far':\n                x = (size.width - toolBarSize.width) - padding;\n                break;\n        }\n        var extraPosition = map.getExtraPosition();\n        element.style.left = x + extraPosition.x + 'px';\n        element.style.top = y + extraPosition.y + 'px';\n        var color = this.maps.zoomSettings.highlightColor || this.maps.themeStyle.zoomSelectionColor;\n        var css = ' .e-maps-toolbar:hover > circle { stroke:' + color + '; } .e-maps-toolbar:hover > path { fill: ' + color + ' ;  stroke: ' + color + '; }' +\n            '.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } ' +\n            '.e-maps-popup-close { display: block; opacity: 0; }';\n        var style = document.createElement('style');\n        style.appendChild(document.createTextNode(css));\n        element.appendChild(style);\n    };\n    /**\n     * To bind events.\n     *\n     * @param {Element} element - Specifies the element.\n     * @param {any} process - Specifies the process.\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Zoom.prototype.wireEvents = function (element, process) {\n        EventHandler.add(element, Browser.touchStartEvent, process, this);\n        EventHandler.add(element, 'mouseover', this.showTooltip, this);\n        EventHandler.add(element, 'mouseout', this.removeTooltip, this);\n    };\n    Zoom.prototype.mapMouseWheel = function (e) {\n        if (this.maps.zoomSettings.enable && this.maps.zoomSettings.mouseWheelZoom) {\n            var map = this.maps;\n            var size = map.availableSize;\n            map.markerZoomedState = false;\n            map.zoomPersistence = map.enablePersistence;\n            var position = this.getMousePosition(e.pageX, e.pageY);\n            var prevLevel = map.tileZoomLevel;\n            var prevScale = map.scale;\n            var delta = 1;\n            var staticMaxZoomLevel = 22; // google map maximum zoom level value\n            var value = (map.isTileMap) ? prevLevel : prevScale;\n            if (((position.x > map.mapAreaRect.x) && (position.x < (map.mapAreaRect.x + map.mapAreaRect.width))) &&\n                (position.y > map.mapAreaRect.y) && position.y < (map.mapAreaRect.y + map.mapAreaRect.height)) {\n                e.preventDefault();\n                var direction = (this.browserName === 'mozilla' && !this.isPointer) ?\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    -(e.detail) / 3 > 0 ? 'ZoomIn' : 'ZoomOut' : (e.wheelDelta / 120) > 0 ? 'ZoomIn' : 'ZoomOut';\n                if (direction === 'ZoomIn') {\n                    map.mapScaleValue = value + delta;\n                    map.staticMapZoom = map.tileZoomLevel;\n                    if (map.staticMapZoom > 0 && map.staticMapZoom < staticMaxZoomLevel) {\n                        map.staticMapZoom += 1;\n                    }\n                    this.performZooming(position, (value + delta), direction);\n                }\n                else {\n                    map.mapScaleValue = value - delta;\n                    map.staticMapZoom = map.tileZoomLevel;\n                    if (map.mapScaleValue === 1) {\n                        map.markerCenterLatitude = null;\n                        map.markerCenterLongitude = null;\n                    }\n                    if (map.staticMapZoom > 1 && map.staticMapZoom < staticMaxZoomLevel) {\n                        map.staticMapZoom -= 1;\n                    }\n                    this.performZooming(position, (value - delta), direction);\n                }\n            }\n        }\n    };\n    Zoom.prototype.doubleClick = function (e) {\n        var pageX = e.pageX;\n        var pageY = e.pageY;\n        var target = e.target;\n        if (this.maps.zoomSettings.enable && this.maps.zoomSettings.doubleClickZoom\n            && !(e.target['id'].indexOf('_Zooming_') > -1)) {\n            var position = this.getMousePosition(pageX, pageY);\n            var map = this.maps;\n            var size = map.availableSize;\n            var prevLevel = map.tileZoomLevel;\n            var prevScale = map.scale;\n            map.mapScaleValue = map.mapScaleValue + 1;\n            var value = (map.isTileMap) ? prevLevel : prevScale;\n            if (((position.x > map.mapAreaRect.x) && (position.x < (map.mapAreaRect.x + map.mapAreaRect.width))) &&\n                (position.y > map.mapAreaRect.y) && position.y < (map.mapAreaRect.y + map.mapAreaRect.height)) {\n                this.performZooming(position, (value + 1), 'ZoomIn');\n            }\n        }\n    };\n    Zoom.prototype.mouseDownHandler = function (e) {\n        var pageX;\n        var pageY;\n        var target;\n        var touches = null;\n        var element = e.target;\n        if (e.type === 'touchstart') {\n            this.isTouch = true;\n            touches = e.touches;\n            target = e.target;\n            pageX = touches[0].clientX;\n            pageY = touches[0].clientY;\n        }\n        else {\n            pageX = e.pageX;\n            pageY = e.pageY;\n            target = e.target;\n        }\n        if (!this.maps.zoomSettings.enablePanning) {\n            this.isPanning = this.panColor !== this.selectionColor ? this.maps.zoomSettings.enablePanning\n                : this.zoomColor === this.selectionColor;\n        }\n        else {\n            this.isPanning = this.panColor === this.selectionColor ? this.maps.zoomSettings.enablePanning\n                : this.zoomColor !== this.selectionColor;\n        }\n        this.mouseDownLatLong = { x: pageX, y: pageY };\n        this.rectZoomingStart = ((!this.isPanning) && this.maps.zoomSettings.enable);\n        this.mouseDownPoints = this.getMousePosition(pageX, pageY);\n        if (this.isTouch) {\n            this.firstMove = true;\n            this.pinchFactor = this.maps.scale;\n            this.fingers = touches.length;\n        }\n        this.isSingleClick = true;\n    };\n    Zoom.prototype.mouseMoveHandler = function (e) {\n        var pageX;\n        var pageY;\n        var map = this.maps;\n        var touchArg;\n        var target;\n        var touches = null;\n        var zoom = this.maps.zoomSettings;\n        if (e.type === 'touchmove') {\n            this.isTouch = true;\n            target = e.target;\n            touches = e.touches;\n            pageX = touches[0].clientX;\n            pageY = touches[0].clientY;\n        }\n        else {\n            pageX = e.pageX;\n            pageY = e.pageY;\n            target = e.target;\n        }\n        if (getElementByID(map.element.id + '_Zooming_KitCollection')) {\n            if (target.id.indexOf('_Zooming_') > -1) {\n                getElementByID(map.element.id + '_Zooming_KitCollection').setAttribute('opacity', '1');\n                if (document.getElementById(map.element.id + '_Zooming_ToolBar_Pan_Group')) {\n                    if (!this.maps.zoomSettings.enablePanning) {\n                        if (target.id.indexOf('_Zooming_ToolBar') > -1 || target.id.indexOf('_Zooming_Rect') > -1) {\n                            getElementByID(map.element.id + '_Zooming_ToolBar_Pan_Rect').setAttribute('opacity', map.theme.toLowerCase() === 'fluentuidark' ? '0.6' : '0.3');\n                            getElementByID(map.element.id + '_Zooming_ToolBar_Pan').setAttribute('opacity', map.theme.toLowerCase() === 'fluentuidark' ? '0.6' : '0.3');\n                        }\n                    }\n                }\n            }\n            else {\n                getElementByID(map.element.id + '_Zooming_KitCollection').setAttribute('opacity', map.theme.toLowerCase() === 'fluentuidark' ? '0.6' : '0.3');\n                if (!this.maps.zoomSettings.enablePanning && document.getElementById(map.element.id + '_Zooming_ToolBar_Pan_Group')) {\n                    getElementByID(map.element.id + '_Zooming_ToolBar_Pan_Rect').setAttribute('opacity', '1');\n                    getElementByID(map.element.id + '_Zooming_ToolBar_Pan').setAttribute('opacity', '1');\n                }\n            }\n        }\n        if (this.isTouch) {\n            if (this.maps.zoomSettings.pinchZooming) {\n                if (this.firstMove && touches.length === 2) {\n                    this.rectZoomingStart = false;\n                    this.updateInteraction();\n                    this.touchStartList = targetTouches(e);\n                }\n                else if (touches.length === 2 && this.touchStartList.length === 2) {\n                    this.touchMoveList = targetTouches(e);\n                    e.preventDefault();\n                    this.rectZoomingStart = false;\n                    this.performPinchZooming(e);\n                }\n                this.firstMove = false;\n            }\n        }\n        this.mouseMovePoints = this.getMousePosition(pageX, pageY);\n        var targetId = e.target['id'];\n        var targetEle = e.target;\n        if (zoom.enable && this.isPanning && ((Browser.isDevice && touches.length >= 1) || !Browser.isDevice)) {\n            e.preventDefault();\n            this.maps.element.style.cursor = 'pointer';\n            this.mouseMoveLatLong = { x: pageX, y: pageY };\n            if ((this.mouseDownLatLong['x'] !== this.mouseMoveLatLong['x']) && (this.mouseDownLatLong['y'] !== this.mouseMoveLatLong['y'])) {\n                if (this.maps.zoomSettings.enablePanning) {\n                    this.panning('None', null, null, e);\n                }\n                this.mouseDownLatLong['x'] = pageX;\n                this.mouseDownLatLong['y'] = pageY;\n            }\n        }\n        if (this.isTouch ? (touches.length === 1 && this.rectZoomingStart) : this.rectZoomingStart) {\n            e.preventDefault();\n            if (this.maps.zoomSettings.enableSelectionZooming) {\n                this.drawZoomRectangle();\n            }\n        }\n    };\n    Zoom.prototype.mouseUpHandler = function (e) {\n        var isDragZoom;\n        var map = this.maps;\n        this.rectZoomingStart = false;\n        this.isPanning = false;\n        this.isSingleClick = this.isSingleClick ? true : false;\n        this.isTouch = false;\n        this.touchStartList = [];\n        this.touchMoveList = [];\n        this.lastScale = 1;\n        this.maps.element.style.cursor = 'auto';\n        if ((!isNullOrUndefined(this.distanceX) || !isNullOrUndefined(this.distanceY)) && (!isNullOrUndefined(this.currentLayer) && this.currentLayer.type === 'SubLayer')) {\n            this.toAlignSublayer();\n            this.distanceX = this.distanceY = null;\n        }\n        var zoomRectElement = getElementByID(this.maps.element.id + '_Selection_Rect_Zooming');\n        if (zoomRectElement && this.maps.zoomSettings.enable && this.maps.zoomSettings.enableSelectionZooming) {\n            isDragZoom = true;\n            remove(zoomRectElement);\n            this.performRectZooming();\n        }\n        this.mouseMoveLatLong = { x: 0, y: 0 };\n        this.mouseDownLatLong = { x: 0, y: 0 };\n    };\n    Zoom.prototype.mouseCancelHandler = function (e) {\n        this.isPanning = false;\n        this.isTouch = false;\n        this.rectZoomingStart = false;\n        var zoomRectElement = getElementByID(this.maps.element.id + '_Selection_Rect_Zooming');\n        if (zoomRectElement && this.maps.zoomSettings.enable) {\n            remove(zoomRectElement);\n            this.performRectZooming();\n        }\n    };\n    /**\n     * To handle the click event for maps.\n     *\n     * @param {PointerEvent} e - Specifies the pointer event.\n     * @returns {void}\n     */\n    Zoom.prototype.click = function (e) {\n        var map = this.maps;\n        if ((map.markerModule && map.markerModule.sameMarkerData.length > 0) ||\n            (e.target['id'].indexOf('MarkerIndex') > -1 && e.target['id'].indexOf('cluster') === -1)) {\n            return null;\n        }\n        if (this.isSingleClick && map.zoomSettings.zoomOnClick && !(e.target['id'].indexOf('_Zooming_') > -1) && !map.zoomSettings.doubleClickZoom\n            && (this.zoomColor !== this.selectionColor)) {\n            var pageX = e.pageX;\n            var pageY = e.pageY;\n            var position = this.getMousePosition(pageX, pageY);\n            var prevLevel = map.tileZoomLevel;\n            var prevScale = map.scale;\n            map.mapScaleValue = map.mapScaleValue + 1;\n            var value = (map.isTileMap) ? prevLevel : prevScale;\n            if (((position.x > map.mapAreaRect.x) && (position.x < (map.mapAreaRect.x + map.mapAreaRect.width))) &&\n                (position.y > map.mapAreaRect.y) && position.y < (map.mapAreaRect.y + map.mapAreaRect.height)) {\n                this.performZooming(position, (value + 1), 'ZoomIn');\n            }\n        }\n    };\n    Zoom.prototype.getMousePosition = function (pageX, pageY) {\n        var map = this.maps;\n        var elementRect = map.element.getBoundingClientRect();\n        var pageXOffset = map.element.ownerDocument.defaultView.pageXOffset;\n        var pageYOffset = map.element.ownerDocument.defaultView.pageYOffset;\n        var clientTop = map.element.ownerDocument.documentElement.clientTop;\n        var clientLeft = map.element.ownerDocument.documentElement.clientLeft;\n        var positionX = elementRect.left + pageXOffset - clientLeft;\n        var positionY = elementRect.top + pageYOffset - clientTop;\n        return new Point(Math.abs(pageX - positionX), Math.abs(pageY - positionY));\n    };\n    Zoom.prototype.addEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.maps.element, this.wheelEvent, this.mapMouseWheel, this);\n        EventHandler.add(this.maps.element, 'click', this.click, this);\n        EventHandler.add(this.maps.element, 'dblclick', this.doubleClick, this);\n        this.maps.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n        this.maps.on(Browser.touchStartEvent, this.mouseDownHandler, this);\n        this.maps.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n        EventHandler.add(this.maps.element, this.cancelEvent, this.mouseCancelHandler, this);\n    };\n    Zoom.prototype.removeEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.maps.element, this.wheelEvent, this.mapMouseWheel);\n        EventHandler.remove(this.maps.element, 'click', this.click);\n        EventHandler.remove(this.maps.element, 'dblclick', this.doubleClick);\n        this.maps.off(Browser.touchMoveEvent, this.mouseMoveHandler);\n        this.maps.off(Browser.touchStartEvent, this.mouseDownHandler);\n        this.maps.off(Browser.touchEndEvent, this.mouseUpHandler);\n        this.maps.off(this.cancelEvent, this.mouseCancelHandler);\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} - Returns the module name.\n     */\n    Zoom.prototype.getModuleName = function () {\n        return 'Zoom';\n    };\n    /**\n     * To destroy the zoom.\n     *\n     * @param {Maps} maps - Specifies the instance of the maps.\n     * @returns {void}\n     * @private\n     */\n    Zoom.prototype.destroy = function (maps) {\n        this.removeEventListener();\n        /**\n         * Destroy method performed here\n         */\n    };\n    return Zoom;\n}());\nexport { Zoom };\n"]},"metadata":{},"sourceType":"module"}