{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\n/* eslint-disable radix */\n\n/* eslint-disable max-len */\n\n/* eslint-disable valid-jsdoc */\n\n/**\n * Maps Component file\n */\n\n\nimport { Component, NotifyPropertyChanges, Property, Ajax } from '@syncfusion/ej2-base';\nimport { EventHandler, Browser, isNullOrUndefined, createElement, setValue, extend } from '@syncfusion/ej2-base';\nimport { Event, remove, L10n, Collection, Internationalization, Complex } from '@syncfusion/ej2-base';\nimport { SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { Size, createSvg, Point, removeElement, triggerShapeEvent, showTooltip, checkShapeDataFields, getMousePosition, calculateSize } from './utils/helper';\nimport { getElement, removeClass, getTranslate, triggerItemSelectionEvent, mergeSeparateCluster, customizeStyle, querySelector } from './utils/helper';\nimport { createStyle } from './utils/helper';\nimport { ZoomSettings, LegendSettings } from './model/base';\nimport { LayerSettings, TitleSettings, Border, Margin, MapsAreaSettings, Annotation, CenterPosition } from './model/base';\nimport { Marker } from './layers/marker';\nimport { load, click, loaded, doubleClick, resize, shapeSelected, zoomIn } from './model/constants';\nimport { getThemeStyle } from './model/theme';\nimport { BingMap } from './layers/bing-map';\nimport { LayerPanel } from './layers/layer-panel';\nimport { Rect, RectOption, measureText, getElementByID, MapAjax, processResult, getElementsByClassName } from '../maps/utils/helper';\nimport { findPosition, textTrim, TextOption, renderTextElement, convertGeoToPoint, calculateZoomLevel } from '../maps/utils/helper';\nimport { Annotations } from '../maps/user-interaction/annotation';\nimport { MarkerSettings } from './index';\nimport { changeBorderWidth } from './index';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\n/**\n * Represents the Maps control.\n * ```html\n * <div id=\"maps\"/>\n * <script>\n *   var maps = new Maps();\n *   maps.appendTo(\"#maps\");\n * </script>\n * ```\n */\n\nvar Maps =\n/** @class */\nfunction (_super) {\n  __extends(Maps, _super);\n  /**\n   * Constructor for creating the widget\n   *\n   * @param {MapsModel} options Specifies the options\n   * @param {string | HTMLElement} element Specifies the element\n   */\n\n\n  function Maps(options, element) {\n    var _this = _super.call(this, options, element) || this;\n    /**\n     * Check layer whether is geometry or tile\n     *\n     * @private\n     */\n\n\n    _this.isTileMap = false;\n    /**\n     * Resize the map\n     */\n\n    _this.isResize = false;\n    /** @private */\n\n    _this.baseSize = new Size(0, 0);\n    /** @public */\n\n    _this.translatePoint = new Point(0, 0);\n    /** @private */\n\n    _this.baseTranslatePoint = new Point(0, 0);\n    /** @public */\n\n    _this.zoomTranslatePoint = new Point(0, 0);\n    /** @private */\n\n    _this.markerZoomedState = true;\n    /** @private */\n\n    _this.zoomPersistence = false;\n    /** @private */\n\n    _this.defaultState = true;\n    /** @private */\n\n    _this.centerPositionChanged = false;\n    /** @private */\n\n    _this.isTileMapSubLayer = false;\n    /** @private */\n\n    _this.markerNullCount = 0;\n    /** @private */\n\n    _this.tileTranslatePoint = new Point(0, 0);\n    /** @private */\n\n    _this.baseTileTranslatePoint = new Point(0, 0);\n    /** @private */\n    // eslint-disable-next-line @typescript-eslint/ban-types\n\n    _this.isDevice = false;\n    /** @private */\n\n    _this.staticMapZoom = _this.zoomSettings.enable ? _this.zoomSettings.zoomFactor : 0;\n    /** @private */\n\n    _this.zoomNotApplied = false;\n    /** @public */\n\n    _this.dataLabelShape = [];\n    _this.zoomShapeCollection = [];\n    _this.zoomLabelPositions = [];\n    _this.mouseDownEvent = {\n      x: null,\n      y: null\n    };\n    _this.mouseClickEvent = {\n      x: null,\n      y: null\n    };\n    /** @private */\n\n    _this.selectedElementId = [];\n    /** @private */\n\n    _this.selectedMarkerElementId = [];\n    /** @private */\n\n    _this.selectedBubbleElementId = [];\n    /** @private */\n\n    _this.selectedNavigationElementId = [];\n    /** @private */\n\n    _this.selectedLegendElementId = [];\n    /** @private */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    _this.legendSelectionCollection = [];\n    /** @private */\n\n    _this.shapeSelections = true;\n    /** @private */\n\n    _this.legendSelection = true;\n    /** @private */\n\n    _this.toggledLegendId = [];\n    /** @private */\n\n    _this.toggledShapeElementId = [];\n    /** @private */\n\n    _this.checkInitialRender = true;\n    /** @private */\n\n    _this.initialTileTranslate = new Point(0, 0);\n    /** @private */\n\n    _this.initialCheck = true;\n    /** @private */\n\n    _this.applyZoomReset = false;\n    /** @private */\n\n    _this.markerClusterExpandCheck = false;\n    /** @private */\n\n    _this.markerClusterExpand = false;\n    /** @private */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    _this.shapeSelectionItem = [];\n    setValue('mergePersistData', _this.mergePersistMapsData, _this);\n    return _this;\n  }\n\n  Object.defineProperty(Maps.prototype, \"isShapeSelected\", {\n    /**\n     *\n     * Specifies whether the shape is selected in the maps or not.\n     *\n     * @returns {boolean} - Returns the boolean value.\n     */\n    get: function () {\n      return this.mapSelect;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * To manage persist maps data\n   *\n   * @returns {void}\n   */\n\n  Maps.prototype.mergePersistMapsData = function () {\n    var data; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var windowData;\n\n    try {\n      windowData = window.localStorage;\n    } catch (e) {\n      windowData = null;\n    }\n\n    if (!isNullOrUndefined(windowData)) {\n      data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n    }\n\n    if (!(isNullOrUndefined(data) || data === '')) {\n      var dataObj = JSON.parse(data);\n      var keys = Object.keys(dataObj);\n      this.isProtectedOnChange = true;\n\n      for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n\n        if (typeof this[key] === 'object' && !isNullOrUndefined(this[key])) {\n          extend(this[key], dataObj[key]);\n        } else {\n          this[key] = dataObj[key];\n        }\n      }\n\n      this.isProtectedOnChange = false;\n    }\n  };\n  /**\n   * Gets the localized label by locale keyword.\n   *\n   * @param  {string} key - Specifies the key\n   * @returns {string} - Returns the string value\n   */\n\n\n  Maps.prototype.getLocalizedLabel = function (key) {\n    return this.localeObject.getConstant(key);\n  };\n  /**\n   * Initializing pre-required values.\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.preRender = function () {\n    this.isDevice = Browser.isDevice;\n    this.initPrivateVariable();\n    this.allowServerDataBinding = false;\n    this.unWireEVents();\n    this.wireEVents();\n    this.setCulture();\n  };\n\n  Maps.prototype.renderElements = function () {\n    this.trigger(load, {\n      maps: this\n    });\n    this.createSVG();\n    this.findBaseAndSubLayers();\n    this.createSecondaryElement();\n    this.addTabIndex();\n    this.themeStyle = getThemeStyle(this.theme);\n    this.renderBorder();\n    this.renderTitle(this.titleSettings, 'title', null, null);\n    this.renderArea();\n    this.processRequestJsonData();\n    this.renderComplete();\n  };\n  /**\n   * To Initialize the control rendering.\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.render = function () {\n    this.renderElements();\n  };\n\n  Maps.prototype.processRequestJsonData = function () {\n    var _this = this;\n\n    var length = this.layersCollection.length - 1;\n    this.serverProcess = {\n      request: 0,\n      response: 0\n    };\n    var queryModule;\n    var localAjax;\n    var ajaxModule;\n    var dataModule;\n    Array.prototype.forEach.call(this.layersCollection, function (layer, layerIndex) {\n      if (layer.shapeData instanceof DataManager) {\n        _this.serverProcess['request']++;\n        dataModule = layer.shapeData;\n        queryModule = layer.query instanceof Query ? layer.query : new Query(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var dataManager = dataModule.executeQuery(queryModule); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        dataManager.then(function (e) {\n          _this.processResponseJsonData('DataManager', e, layer, 'ShapeData');\n        });\n      } else if (layer.shapeData instanceof MapAjax || layer.shapeData) {\n        if (!isNullOrUndefined(layer.shapeData['dataOptions'])) {\n          _this.processAjaxRequest(layer, layer.shapeData, 'ShapeData');\n        }\n      }\n\n      if (layer.dataSource instanceof DataManager) {\n        _this.serverProcess['request']++;\n        dataModule = layer.dataSource;\n        queryModule = layer.query instanceof Query ? layer.query : new Query(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        var dataManager = dataModule.executeQuery(queryModule); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        dataManager.then(function (e) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          layer.dataSource = processResult(e);\n        });\n      }\n\n      if (layer.markerSettings.length > 0) {\n        var _loop_1 = function (i) {\n          if (layer.markerSettings[i].dataSource instanceof DataManager) {\n            _this.serverProcess['request']++;\n            dataModule = layer.markerSettings[i].dataSource;\n            queryModule = layer.markerSettings[i].query instanceof Query ? layer.markerSettings[i].query : new Query(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n            var dataManager = dataModule.executeQuery(queryModule); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n            dataManager.then(function (e) {\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              layer.markerSettings[i].dataSource = processResult(e);\n            });\n          }\n        };\n\n        for (var i = 0; i < layer.markerSettings.length; i++) {\n          _loop_1(i);\n        }\n      }\n\n      if (layer.bubbleSettings.length > 0) {\n        var _loop_2 = function (i) {\n          if (layer.bubbleSettings[i].dataSource instanceof DataManager) {\n            _this.serverProcess['request']++;\n            dataModule = layer.bubbleSettings[i].dataSource;\n            queryModule = layer.bubbleSettings[i].query instanceof Query ? layer.bubbleSettings[i].query : new Query(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n            var dataManager = dataModule.executeQuery(queryModule); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n            dataManager.then(function (e) {\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              layer.bubbleSettings[i].dataSource = processResult(e);\n            });\n          }\n        };\n\n        for (var i = 0; i < layer.bubbleSettings.length; i++) {\n          _loop_2(i);\n        }\n      }\n\n      if (layer.dataSource instanceof MapAjax || !isNullOrUndefined(layer.dataSource['dataOptions'])) {\n        _this.processAjaxRequest(layer, layer.dataSource, 'DataSource');\n      }\n\n      if (_this.serverProcess['request'] === _this.serverProcess['response'] && length === layerIndex) {\n        _this.processResponseJsonData(null);\n      }\n    });\n  };\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n\n\n  Maps.prototype.processAjaxRequest = function (layer, localAjax, type) {\n    var _this = this;\n\n    this.serverProcess['request']++;\n    var ajaxModule = new Ajax(localAjax.dataOptions, localAjax.type, localAjax.async, localAjax.contentType);\n\n    ajaxModule.onSuccess = function (args) {\n      _this.processResponseJsonData('Ajax', args, layer, type);\n    };\n\n    ajaxModule.send(localAjax.sendData);\n  };\n  /**\n   * This method is used to process the JSON data to render the maps.\n   *\n   * @param {string} processType - Specifies the process type in maps.\n   * @param {any | string} data - Specifies the data for maps.\n   * @param {LayerSettings} layer - Specifies the layer for the maps.\n   * @param {string} dataType - Specifies the data type for maps.\n   * @returns {void}\n   */\n\n\n  Maps.prototype.processResponseJsonData = function (processType, data, layer, dataType) {\n    this.serverProcess['response']++;\n\n    if (processType) {\n      if (dataType === 'ShapeData') {\n        layer.shapeData = processType === 'DataManager' ? processResult(data) : JSON.parse(data);\n      } else {\n        layer.dataSource = processType === 'DataManager' ? processResult(data) : JSON.parse('[' + data + ']')[0];\n      }\n    }\n\n    if (!isNullOrUndefined(processType) && this.serverProcess['request'] === this.serverProcess['response']) {\n      var collection = this.layersCollection;\n      this.layersCollection = [];\n\n      for (var i = 0; i < collection.length; i++) {\n        if (collection[i].isBaseLayer) {\n          this.layersCollection.push(collection[i]);\n        }\n      }\n\n      for (var j = 0; j < collection.length; j++) {\n        if (!collection[j].isBaseLayer) {\n          this.layersCollection.push(collection[j]);\n        }\n      }\n\n      this.renderMap();\n    } else if (isNullOrUndefined(processType)) {\n      this.renderMap();\n    }\n  };\n\n  Maps.prototype.renderMap = function () {\n    if (this.legendModule && this.legendSettings.visible) {\n      if (!this.isTileMap) {\n        this.legendModule.renderLegend();\n      } else {\n        var layerCount = this.layersCollection.length - 1;\n\n        if (!this.layersCollection[layerCount].isBaseLayer) {\n          this.isTileMapSubLayer = true;\n          this.legendModule.renderLegend();\n        }\n      }\n    }\n\n    this.createTile();\n\n    if (this.zoomSettings.enable && this.zoomModule) {\n      this.zoomModule.createZoomingToolbars();\n    }\n\n    if (!isNullOrUndefined(this.dataLabelModule)) {\n      this.dataLabelModule.dataLabelCollections = [];\n      this.dataLabelShape = [];\n    }\n\n    this.mapLayerPanel.measureLayerPanel();\n    this.element.appendChild(this.svgObject);\n    var position = this.getExtraPosition();\n\n    for (var i = 0; i < this.layers.length; i++) {\n      if (position.x !== 0 || position.y !== 0) {\n        var markerTemplate = document.getElementById(this.element.id + '_LayerIndex_' + i + '_Markers_Template_Group');\n\n        if (!isNullOrUndefined(markerTemplate)) {\n          markerTemplate.style.top = this.mapAreaRect.y + position.y + 'px';\n          markerTemplate.style.left = this.mapAreaRect.x + position.x + 'px';\n        }\n      }\n\n      if (this.layers[i].selectionSettings && this.layers[i].selectionSettings.enable && this.layers[i].initialShapeSelection.length > 0 && this.checkInitialRender) {\n        var checkSelection = this.layers[i].selectionSettings.enableMultiSelect;\n        this.layers[i].selectionSettings.enableMultiSelect = checkSelection ? checkSelection : true;\n        var shapeSelection = this.layers[i].initialShapeSelection;\n\n        for (var j = 0; j < this.layers[i].initialShapeSelection.length; j++) {\n          this.shapeSelection(i, shapeSelection[j].shapePath, shapeSelection[j].shapeValue, true);\n        }\n\n        this.layers[i].selectionSettings.enableMultiSelect = checkSelection;\n\n        if (i === this.layers.length - 1) {\n          this.checkInitialRender = false;\n        }\n      }\n\n      for (var k = 0; k < this.layers[i].markerSettings.length; k++) {\n        if (this.layers[i].markerSettings[k].selectionSettings && this.layers[i].markerSettings[k].selectionSettings.enable && this.layers[i].markerSettings[k].initialMarkerSelection.length > 0) {\n          var markerSelectionValues = this.layers[i].markerSettings[k].initialMarkerSelection;\n\n          for (var j = 0; j < markerSelectionValues.length; j++) {\n            this.markerInitialSelection(i, k, this.layers[i].markerSettings[k], markerSelectionValues[j].latitude, markerSelectionValues[j].longitude);\n          }\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(document.getElementById(this.element.id + '_tile_parent'))) {\n      var svg = this.svgObject.getBoundingClientRect();\n      var element = document.getElementById(this.element.id);\n      var tileElement = document.getElementById(this.element.id + '_tile_parent');\n      var tileElement1 = document.getElementById(this.element.id + '_tiles');\n      var tile = tileElement.getBoundingClientRect();\n      var bottom = void 0;\n      var top_1;\n      var left = void 0;\n      left = parseFloat(tileElement.style.left) + element.offsetLeft;\n      var titleTextSize = measureText(this.titleSettings.text, this.titleSettings.textStyle);\n      var subTitleTextSize = measureText(this.titleSettings.subtitleSettings.text, this.titleSettings.subtitleSettings.textStyle);\n\n      if (this.isTileMap && this.isTileMapSubLayer && this.legendSettings.position === 'Bottom' && this.legendSettings.visible) {\n        if (this.legendSettings.mode !== 'Default') {\n          if (titleTextSize.width !== 0 && titleTextSize.height !== 0) {\n            top_1 = parseFloat(tileElement.style.top) + element.offsetTop + subTitleTextSize.height / 2 - this.legendModule.legendBorderRect.height / 2;\n          } else {\n            top_1 = parseFloat(tileElement.style.top) + element.offsetTop - this.mapAreaRect.y;\n          }\n        } else {\n          left = this.legendModule.legendBorderRect.x;\n\n          if (titleTextSize.width !== 0 && titleTextSize.height !== 0) {\n            top_1 = parseFloat(tileElement.style.top) + element.offsetTop + subTitleTextSize['height'] / 2 - this.legendModule.legendBorderRect.y;\n          } else {\n            top_1 = parseFloat(tileElement.style.top) + element.offsetTop + subTitleTextSize['height'] / 2;\n          }\n        }\n      } else {\n        bottom = svg.bottom - tile.bottom - element.offsetTop;\n        top_1 = parseFloat(tileElement.style.top) + element.offsetTop;\n      }\n\n      top_1 = bottom <= 11 ? top_1 : top_1 * 2;\n      left = bottom <= 11 ? left : left * 2;\n      tileElement.style.top = top_1 + 'px';\n      tileElement.style.left = left + 'px';\n      tileElement1.style.top = top_1 + 'px';\n      tileElement1.style.left = left + 'px';\n    }\n\n    this.arrangeTemplate();\n\n    if (this.annotationsModule) {\n      if (this.width !== '0px' && this.height !== '0px' && this.width !== '0%' && this.height !== '0%') {\n        this.annotationsModule.renderAnnotationElements();\n      }\n    }\n\n    this.element.style.outline = 'none';\n\n    for (var i = 0; i < document.getElementsByTagName('path').length - 1; i++) {\n      if (document.getElementsByTagName('path')[i].id.indexOf('shapeIndex') > -1) {\n        document.getElementsByTagName('path')[i].style.outline = 'none';\n      }\n    }\n\n    this.zoomingChange();\n    this.trigger(loaded, {\n      maps: this,\n      isResized: this.isResize\n    });\n    this.isResize = false;\n  };\n  /**\n   * To apply color to the initial selected marker\n   *\n   * @param {SelectionSettingsModel} selectionSettings - Specifies the selection settings\n   * @param {Maps} map - Specifies the instance of the maps\n   * @param {Element} targetElement - Specifies the target element\n   * @param {any} data - Specifies the data\n   * @returns {void}\n   * @private\n   */\n\n\n  Maps.prototype.markerSelection = function (selectionSettings, map, targetElement, data) {\n    var border = {\n      color: selectionSettings.border.color,\n      width: selectionSettings.border.width / map.scale\n    };\n    var markerSelectionProperties = {\n      opacity: selectionSettings.opacity,\n      fill: selectionSettings.fill,\n      border: border,\n      target: targetElement.id,\n      cancel: false,\n      data: data,\n      maps: map\n    };\n\n    if (!getElement('MarkerselectionMap')) {\n      document.body.appendChild(createStyle('MarkerselectionMap', 'MarkerselectionMapStyle', markerSelectionProperties));\n    } else {\n      customizeStyle('MarkerselectionMap', 'MarkerselectionMapStyle', markerSelectionProperties);\n    }\n\n    if (this.selectedMarkerElementId.length === 0 || selectionSettings.enableMultiSelect) {\n      if (targetElement.tagName === 'g') {\n        targetElement.children[0].setAttribute('class', 'MarkerselectionMapStyle');\n      } else {\n        targetElement.setAttribute('class', 'MarkerselectionMapStyle');\n      }\n    }\n  };\n  /**\n   * initial selection of marker\n   *\n   * @param {number} layerIndex - Specifies the layer index\n   * @param {number} markerIndex - Specifies the marker index\n   * @param {MarkerSettingsModel} markerSettings - Specifies the marker settings\n   * @param {number} latitude - Specifies hte latitude\n   * @param {number} longitude - Specifies the longitude\n   * @returns {void}\n   * @private\n   */\n\n\n  Maps.prototype.markerInitialSelection = function (layerIndex, markerIndex, markerSettings, latitude, longitude) {\n    var selectionSettings = markerSettings.selectionSettings;\n\n    if (selectionSettings.enable) {\n      for (var i = 0; i < markerSettings.dataSource['length']; i++) {\n        var data = markerSettings.dataSource[i];\n\n        if (data['latitude'] === latitude && data['longitude'] === longitude) {\n          var targetId = this.element.id + '_' + 'LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + i;\n          this.markerSelection(selectionSettings, this, getElement(targetId), data);\n        }\n      }\n    }\n  };\n  /**\n   * Render the map area border\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.renderArea = function () {\n    var width = this.mapsArea.border.width;\n    var background = this.mapsArea.background;\n\n    if (width > 0 || background || this.themeStyle.areaBackgroundColor) {\n      var mapBorder = {\n        opacity: isNullOrUndefined(this.mapsArea.border.opacity) ? 1 : this.mapsArea.border.opacity,\n        color: this.mapsArea.border.color,\n        width: this.mapsArea.border.width\n      };\n      var rect = new RectOption(this.element.id + '_MapAreaBorder', background || this.themeStyle.areaBackgroundColor, mapBorder, 1, this.mapAreaRect);\n      this.svgObject.appendChild(this.renderer.drawRectangle(rect));\n    }\n  };\n  /**\n   * To add tab index for map element\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.addTabIndex = function () {\n    this.element.setAttribute('aria-label', this.description || 'Maps Element');\n    this.element.setAttribute('tabindex', this.tabIndex.toString());\n  }; // private setSecondaryElementPosition(): void {\n  //     if (!this.isTileMap) {\n  //         let element: HTMLDivElement = getElementByID(this.element.id + '_Secondary_Element') as HTMLDivElement;\n  //         let rect: ClientRect = this.element.getBoundingClientRect();\n  //         let svgRect: ClientRect = getElementByID(this.element.id + '_svg').getBoundingClientRect();\n  //         element.style.marginLeft = Math.max(svgRect.left - rect.left, 0) + 'px';\n  //         element.style.marginTop = Math.max(svgRect.top - rect.top, 0) + 'px';\n  //     }\n  // }\n\n\n  Maps.prototype.zoomingChange = function () {\n    var left;\n    var top;\n\n    if (getElementByID(this.element.id + '_Layer_Collections') && this.zoomModule) {\n      this.zoomModule.layerCollectionEle = getElementByID(this.element.id + '_Layer_Collections');\n    }\n\n    if (this.isTileMap && getElementByID(this.element.id + '_Tile_SVG') && getElementByID(this.element.id + '_tile_parent')) {\n      var tileRect = getElementByID(this.element.id + '_tile_parent').getBoundingClientRect();\n      var tileSvgRect = getElementByID(this.element.id + '_Tile_SVG').getBoundingClientRect();\n      left = tileRect.left - tileSvgRect.left;\n      top = tileRect.top - tileSvgRect.top;\n      getElementByID(this.element.id + '_Tile_SVG_Parent').style.left = left + 'px';\n      getElementByID(this.element.id + '_Tile_SVG_Parent').style.top = top + 'px';\n      var markerTemplateElements = document.getElementsByClassName('template');\n\n      if (!isNullOrUndefined(markerTemplateElements) && markerTemplateElements.length > 0) {\n        for (var i = 0; i < markerTemplateElements.length; i++) {\n          var templateGroupEle = markerTemplateElements[i];\n          templateGroupEle.style.left = left + 'px';\n          templateGroupEle.style.top = top + 'px';\n        }\n      }\n    }\n\n    if (this.zoomSettings.zoomFactor >= 0) {\n      if (this.zoomModule && this.zoomModule.toolBarGroup && this.zoomSettings.enable) {\n        this.zoomModule.alignToolBar();\n      }\n\n      var elements = document.getElementById(this.element.id + '_Layer_Collections');\n\n      if (!isNullOrUndefined(elements) && elements.childElementCount > 0) {\n        for (var i = 0; i < elements.childNodes.length; i++) {\n          var childElement = elements.childNodes[i];\n\n          if (childElement.tagName === 'g') {\n            var layerIndex = parseFloat(childElement.id.split('_LayerIndex_')[1].split('_')[0]);\n\n            for (var j = 0; j < childElement.childNodes.length; j++) {\n              var childNode = childElement.childNodes[j];\n\n              if (!(childNode.id.indexOf('_Markers_Group') > -1) && !(childNode.id.indexOf('_bubble_Group') > -1) && !(childNode.id.indexOf('_dataLableIndex_Group') > -1)) {\n                changeBorderWidth(childNode, layerIndex, this.scale, this);\n              }\n            }\n          }\n        }\n      }\n\n      if (this.zoomModule && this.previousScale !== this.scale) {\n        this.zoomModule.applyTransform(true);\n      }\n    }\n  };\n\n  Maps.prototype.createSecondaryElement = function () {\n    if (isNullOrUndefined(document.getElementById(this.element.id + '_Secondary_Element'))) {\n      var secondaryElement = createElement('div', {\n        id: this.element.id + '_Secondary_Element',\n        styles: 'position: absolute;z-index:2;'\n      });\n      this.element.appendChild(secondaryElement);\n    }\n  };\n  /**\n   * @returns {void}\n   * @private\n   */\n\n\n  Maps.prototype.arrangeTemplate = function () {\n    if (document.getElementById(this.element.id + '_Legend_Border')) {\n      document.getElementById(this.element.id + '_Legend_Border').style.pointerEvents = 'none';\n    }\n\n    var templateElements = document.getElementsByClassName(this.element.id + '_template');\n\n    if (!isNullOrUndefined(templateElements) && templateElements.length > 0 && getElementByID(this.element.id + '_Layer_Collections') && this.layers[this.layers.length - 1].layerType !== 'OSM') {\n      for (var i = 0; i < templateElements.length; i++) {\n        var offSetLetValue = 0;\n        var offSetTopValue = 0;\n        var templateGroupEle = templateElements[i];\n\n        if (!isNullOrUndefined(templateGroupEle) && templateGroupEle.childElementCount > 0) {\n          var layerOffset = getElementByID(this.element.id + '_Layer_Collections').getBoundingClientRect();\n          var elementOffset = getElementByID(templateGroupEle.id).getBoundingClientRect();\n\n          if (templateGroupEle.id.indexOf('Marker') === -1) {\n            offSetLetValue = this.isTileMap ? 0 : layerOffset.left < elementOffset.left ? -Math.abs(elementOffset.left - layerOffset.left) : Math.abs(elementOffset.left - layerOffset.left);\n            offSetTopValue = this.isTileMap ? 0 : layerOffset.top < elementOffset.top ? -Math.abs(elementOffset.top - layerOffset.top) : Math.abs(elementOffset.top - layerOffset.top);\n          }\n\n          for (var j = 0; j < templateGroupEle.childElementCount; j++) {\n            var currentTemplate = templateGroupEle.childNodes[j];\n\n            if (currentTemplate.id.indexOf('Marker') !== -1) {\n              var elementOffset_1 = getElementByID(currentTemplate.id).getBoundingClientRect();\n              currentTemplate.style.left = parseFloat(currentTemplate.style.left) - (this.isTileMap ? 0 : elementOffset_1.width / 2) + 'px';\n              currentTemplate.style.top = parseFloat(currentTemplate.style.top) - (this.isTileMap ? 0 : elementOffset_1.height / 2) + 'px';\n            } else {\n              currentTemplate.style.left = parseFloat(currentTemplate.style.left) + offSetLetValue + 'px';\n              currentTemplate.style.top = parseFloat(currentTemplate.style.top) + offSetTopValue + 'px';\n              currentTemplate.style.transform = 'translate(-50%, -50%)';\n            }\n          }\n        }\n      }\n    }\n  };\n\n  Maps.prototype.createTile = function () {\n    var mainLayer = this.layersCollection[0];\n    var padding = 0;\n\n    if (mainLayer.isBaseLayer && (mainLayer.layerType === 'OSM' || mainLayer.layerType === 'Bing' || mainLayer.layerType === 'GoogleStaticMap' || mainLayer.layerType === 'Google')) {\n      if (mainLayer.layerType === 'Google') {\n        mainLayer.urlTemplate = 'https://mt1.google.com/vt/lyrs=m@129&hl=en&x=tileX&y=tileY&z=level';\n      }\n\n      removeElement(this.element.id + '_tile_parent');\n      removeElement(this.element.id + '_tiles');\n      removeElement('animated_tiles');\n      var ele = createElement('div', {\n        id: this.element.id + '_tile_parent',\n        styles: 'position: absolute; left: ' + this.mapAreaRect.x + 'px; right: ' + this.margin.right + 'px; top: ' + (this.mapAreaRect.y + padding) + 'px; height: ' + this.mapAreaRect.height + 'px; width: ' + this.mapAreaRect.width + 'px; overflow: hidden;'\n      });\n      var ele1 = createElement('div', {\n        id: this.element.id + '_tiles',\n        styles: 'position: absolute; left: ' + this.mapAreaRect.x + 'px;  right: ' + this.margin.right + 'px; top: ' + (this.mapAreaRect.y + padding) + 'px; height: ' + this.mapAreaRect.height + 'px; width: ' + this.mapAreaRect.width + 'px; overflow: hidden;'\n      });\n      this.element.appendChild(ele);\n      this.element.appendChild(ele1);\n    }\n  };\n  /**\n   * To initilize the private varibales of maps.\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.initPrivateVariable = function () {\n    if (this.element.id === '') {\n      var collection = document.getElementsByClassName('e-maps').length;\n      this.element.id = 'maps_control_' + collection;\n    }\n\n    this.renderer = new SvgRenderer(this.element.id);\n    this.mapLayerPanel = new LayerPanel(this);\n  };\n\n  Maps.prototype.findBaseAndSubLayers = function () {\n    var _this = this;\n\n    var baseIndex = this.baseLayerIndex;\n    var mainLayers = [];\n    var subLayers = [];\n    this.layersCollection = [];\n    Array.prototype.forEach.call(this.layers, function (layer) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      layer.type === 'Layer' ? mainLayers.push(layer) : subLayers.push(layer);\n    });\n\n    for (var i = 0; i < mainLayers.length; i++) {\n      var baseLayer = mainLayers[i];\n\n      if (baseLayer.visible && baseIndex === i) {\n        baseLayer.isBaseLayer = true;\n        this.isTileMap = baseLayer.layerType === 'Geometry' ? false : true;\n        this.layersCollection.push(baseLayer);\n        break;\n      } else if (i === mainLayers.length - 1) {\n        this.layersCollection.push(mainLayers[0]);\n        break;\n      }\n    }\n\n    subLayers.map(function (subLayer, subLayerIndex) {\n      if (subLayer.visible) {\n        _this.layersCollection.push(subLayer);\n      }\n    });\n  };\n  /**\n   * Render the map border\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Maps.prototype.renderBorder = function () {\n    var width = this.border.width;\n    var borderElement = this.svgObject.querySelector('#' + this.element.id + '_MapBorder');\n\n    if ((width > 0 || this.background || this.themeStyle.backgroundColor) && isNullOrUndefined(borderElement)) {\n      var border = {\n        opacity: isNullOrUndefined(this.border.opacity) ? 1 : this.border.opacity,\n        color: this.border.color,\n        width: this.border.width\n      };\n      var borderRect = new RectOption(this.element.id + '_MapBorder', this.background || this.themeStyle.backgroundColor, border, 1, new Rect(width / 2, width / 2, this.availableSize.width - width, this.availableSize.height - width));\n      this.svgObject.appendChild(this.renderer.drawRectangle(borderRect));\n    } else {\n      borderElement.setAttribute('fill', this.background || this.themeStyle.backgroundColor);\n    }\n  };\n  /**\n   * Render the title and subtitle\n   *\n   * @param {TitleSettingsModel} title - Specifies the title\n   * @param {string} type - Specifies the type\n   * @param {Rect} bounds - Specifies the bounds\n   * @param {Element} groupEle - Specifies the group element\n   * @returns {void}\n   * @private\n   */\n\n\n  Maps.prototype.renderTitle = function (title, type, bounds, groupEle) {\n    var style = title.textStyle;\n    var height;\n    var width = Math.abs(this.margin.left + this.margin.right - this.availableSize.width);\n    style.fontFamily = this.themeStyle.fontFamily || style.fontFamily;\n    style.fontWeight = style.fontWeight || this.themeStyle.titleFontWeight;\n    style.size = this.themeStyle.titleFontSize || style.size;\n\n    if (title.text) {\n      if (isNullOrUndefined(groupEle)) {\n        groupEle = this.renderer.createGroup({\n          id: this.element.id + '_Title_Group'\n        });\n      }\n\n      var trimmedTitle = textTrim(width, title.text, style);\n      var elementSize = measureText(trimmedTitle, style);\n      var rect = isNullOrUndefined(bounds) ? new Rect(this.margin.left, this.margin.top, this.availableSize.width, this.availableSize.height) : bounds;\n      var location_1 = findPosition(rect, title.alignment, elementSize, type);\n      var options = new TextOption(this.element.id + '_Map_' + type, location_1.x, location_1.y, 'start', trimmedTitle);\n      var titleBounds = new Rect(location_1.x, location_1.y, elementSize.width, elementSize.height);\n      var element = renderTextElement(options, style, style.color || (type === 'title' ? this.themeStyle.titleFontColor : this.themeStyle.subTitleFontColor), groupEle);\n      element.setAttribute('aria-label', this.description || title.text);\n\n      if (type === 'title' && !title.subtitleSettings.text || type === 'subtitle') {\n        height = Math.abs(titleBounds.y + this.margin.bottom - this.availableSize.height);\n        this.mapAreaRect = new Rect(this.margin.left, titleBounds.y + 10, width, height - 10);\n      }\n\n      if (type !== 'subtitle' && title.subtitleSettings.text) {\n        this.renderTitle(title.subtitleSettings, 'subtitle', titleBounds, groupEle);\n      } else {\n        this.svgObject.appendChild(groupEle);\n      }\n    } else {\n      height = Math.abs(this.margin.top + this.margin.bottom - this.availableSize.height);\n      this.mapAreaRect = new Rect(this.margin.left, this.margin.top, width, height);\n    }\n  };\n  /**\n   * To create svg element for maps\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.createSVG = function () {\n    this.removeSvg();\n    createSvg(this);\n  };\n  /**\n   * To Remove the SVG\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.removeSvg = function () {\n    removeElement(this.element.id + '_Secondary_Element');\n    removeElement(this.element.id + '_tile_parent');\n    removeElement(this.element.id + '_tiles');\n\n    if (this.svgObject) {\n      while (this.svgObject.childNodes.length > 0) {\n        this.svgObject.removeChild(this.svgObject.firstChild);\n      }\n\n      if (!this.svgObject.hasChildNodes() && this.svgObject.parentNode) {\n        remove(this.svgObject);\n      }\n    }\n\n    this.clearTemplate();\n  };\n  /**\n   * To bind event handlers for maps.\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.wireEVents = function () {\n    //let cancelEvent: string = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n    EventHandler.add(this.element, 'click', this.mapsOnClick, this); // EventHandler.add(this.element, 'contextmenu', this.mapsOnRightClick, this);\n\n    EventHandler.add(this.element, 'dblclick', this.mapsOnDoubleClick, this);\n    EventHandler.add(this.element, Browser.touchStartEvent, this.mouseDownOnMap, this);\n    EventHandler.add(this.element, Browser.touchMoveEvent, this.mouseMoveOnMap, this);\n    EventHandler.add(this.element, Browser.touchEndEvent, this.mouseEndOnMap, this);\n    EventHandler.add(this.element, 'pointerleave mouseleave', this.mouseLeaveOnMap, this);\n    EventHandler.add(this.element, 'keydown', this.keyDownHandler, this);\n    EventHandler.add(this.element, 'keyup', this.keyUpHandler, this); //  EventHandler.add(this.element, cancelEvent, this.mouseLeaveOnMap, this);\n\n    window.addEventListener(Browser.isTouch && 'orientation' in window && 'onorientationchange' in window ? 'orientationchange' : 'resize', this.mapsOnResize.bind(this));\n  };\n  /**\n   * To unbind event handlers from maps.\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.unWireEVents = function () {\n    //let cancelEvent: string = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n    EventHandler.remove(this.element, 'click', this.mapsOnClick); // EventHandler.remove(this.element, 'contextmenu', this.mapsOnRightClick);\n\n    EventHandler.remove(this.element, 'dblclick', this.mapsOnDoubleClick);\n    EventHandler.remove(this.element, Browser.touchStartEvent, this.mouseDownOnMap);\n    EventHandler.remove(this.element, Browser.touchMoveEvent, this.mouseMoveOnMap);\n    EventHandler.remove(this.element, Browser.touchEndEvent, this.mouseEndOnMap);\n    EventHandler.remove(this.element, 'pointerleave mouseleave', this.mouseLeaveOnMap);\n    EventHandler.remove(this.element, 'keydown', this.keyDownHandler);\n    EventHandler.remove(this.element, 'keyup', this.keyUpHandler); //EventHandler.remove(this.element, cancelEvent, this.mouseLeaveOnMap);\n\n    window.removeEventListener(Browser.isTouch && 'orientation' in window && 'onorientationchange' in window ? 'orientationchange' : 'resize', this.mapsOnResize);\n  };\n  /**\n   * This method is used to perform operations when mouse pointer leave from maps.\n   *\n   * @param {PointerEvent} e - Specifies the pointer event on maps.\n   * @returns {void}\n   */\n\n\n  Maps.prototype.mouseLeaveOnMap = function (e) {\n    if (document.getElementsByClassName('highlightMapStyle').length > 0 && this.legendModule) {\n      this.legendModule.removeShapeHighlightCollection();\n      removeClass(document.getElementsByClassName('highlightMapStyle')[0]);\n    }\n  };\n\n  Maps.prototype.keyUpHandler = function (event) {\n    var id = event.target['id'];\n\n    if (event.code === 'Tab' && id.indexOf('_LayerIndex_') > -1 && id.indexOf('shapeIndex') > -1) {\n      this.keyboardHighlightSelection(id, event.type);\n    } else if (id.indexOf('_LayerIndex_') === -1 && id.indexOf('shapeIndex') === -1 && getElementsByClassName('highlightMapStyle').length > 0) {\n      removeClass(getElementsByClassName('highlightMapStyle')[0]);\n\n      if (this.legendSettings.visible && this.legendModule) {\n        this.legendModule.removeShapeHighlightCollection();\n      }\n    }\n  };\n\n  Maps.prototype.keyboardHighlightSelection = function (id, key) {\n    var layerIndex = parseInt(id.split('_LayerIndex_')[1].split('_')[0], 10);\n    var shapeIndex = parseInt(id.split('_shapeIndex_')[1].split('_')[0], 10); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var shapeData = this.layers[layerIndex].shapeData['features']['length'] > shapeIndex ? this.layers[layerIndex].shapeData['features'][shapeIndex]['properties'] : null;\n    var dataIndex = parseInt(id.split('_dataIndex_')[1].split('_')[0], 10); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var data = isNullOrUndefined(dataIndex) ? null : this.layers[layerIndex].dataSource[dataIndex];\n\n    if (this.layers[layerIndex].selectionSettings.enable && key === 'keydown' && this.selectionModule) {\n      this.selectionModule.selectionsettings = this.layers[layerIndex].selectionSettings;\n      this.selectionModule.selectionType = 'Shape';\n      this.selectionModule.selectElement(event.target, layerIndex, data, shapeData);\n    } else if (this.highlightModule && this.layers[layerIndex].highlightSettings.enable && key === 'keyup' && !event.target.classList.contains('ShapeselectionMapStyle')) {\n      this.highlightModule.highlightSettings = this.layers[layerIndex].highlightSettings;\n      this.highlightModule.handleHighlight(event.target, layerIndex, data, shapeData);\n    }\n  };\n\n  Maps.prototype.keyDownHandler = function (event) {\n    var zoom = this.zoomModule;\n\n    if ((event.key === '+' || event.code === 'Equal') && zoom) {\n      zoom.performZoomingByToolBar('zoomin');\n    } else if ((event.key === '-' || event.code === 'Minus') && zoom) {\n      zoom.performZoomingByToolBar('zoomout');\n    } else if (event['keyCode'] === 82 && zoom) {\n      zoom.performZoomingByToolBar('reset');\n    } else if ((event.code === 'ArrowUp' || event.code === 'ArrowDown') && zoom) {\n      event.preventDefault();\n      zoom.mouseDownLatLong['x'] = 0;\n      zoom.mouseMoveLatLong['y'] = this.mapAreaRect.height / 7;\n      zoom.panning('None', zoom.mouseDownLatLong['x'], event.code === 'ArrowUp' ? -zoom.mouseMoveLatLong['y'] : zoom.mouseMoveLatLong['y'], event);\n      zoom.mouseDownLatLong['y'] = zoom.mouseMoveLatLong['y'];\n    } else if ((event.code === 'ArrowLeft' || event.code === 'ArrowRight') && zoom) {\n      event.preventDefault();\n      zoom.mouseDownLatLong['y'] = 0;\n      zoom.mouseMoveLatLong['x'] = this.mapAreaRect.width / 7;\n      zoom.panning('None', event.code === 'ArrowLeft' ? -zoom.mouseMoveLatLong['x'] : zoom.mouseMoveLatLong['x'], zoom.mouseDownLatLong['y'], event);\n      zoom.mouseDownLatLong['x'] = zoom.mouseMoveLatLong['x'];\n    } else if (event.code === 'Enter') {\n      var id = event.target['id'];\n      event.preventDefault();\n\n      if (this.legendModule && (id.indexOf('_Left_Page_Rect') > -1 || id.indexOf('_Right_Page_Rect') > -1)) {\n        this.legendModule.currentPage = id.indexOf('_Left_Page_') > -1 ? this.legendModule.currentPage - 1 : this.legendModule.currentPage + 1;\n        this.legendModule.legendGroup = this.renderer.createGroup({\n          id: this.element.id + '_Legend_Group'\n        });\n        this.legendModule.drawLegendItem(this.legendModule.currentPage);\n        var textContent = document.getElementById(this.element.id + '_Paging_Text').textContent;\n        var text = textContent.split('/').map(Number);\n\n        if (id.indexOf('_Left_Page_Rect') > -1) {\n          if (text[0] !== 1) {\n            event.target.focus();\n          }\n\n          event.target.style.outlineColor = text[0] - 1 !== text[1] ? '' : 'transparent';\n        } else if (id.indexOf('_Right_Page_Rect') > -1) {\n          if (text[0] !== text[1]) {\n            event.target.focus();\n          }\n\n          event.target.style.outlineColor = text[0] !== text[1] + 1 ? '' : 'transparent';\n        }\n\n        if (querySelector(this.element.id + '_Legend_Border', this.element.id)) {\n          querySelector(this.element.id + '_Legend_Border', this.element.id).style.pointerEvents = 'none';\n        }\n      }\n\n      if (id.indexOf('shapeIndex') > -1) {\n        this.keyboardHighlightSelection(id, event.type);\n      }\n    }\n  };\n  /**\n   * Gets the selected element to be maintained or not.\n   *\n   * @param {Element} targetEle - Specifies the target element\n   * @returns {boolean} - Returns the boolean value\n   * @private\n   */\n\n\n  Maps.prototype.SelectedElement = function (targetEle) {\n    var isSelect = false;\n\n    if (targetEle.getAttribute('class') === 'ShapeselectionMapStyle') {\n      isSelect = true;\n    }\n\n    return isSelect;\n  };\n  /**\n   * This method is used to perform the operations when a click operation is performed on maps.\n   *\n   * @param {PointerEvent} e - Specifies the pointer event on maps.\n   */\n\n\n  Maps.prototype.mapsOnClick = function (e) {\n    var _this = this;\n\n    var targetEle = e.target;\n    var targetId = targetEle.id;\n    var latitude = null;\n    var longitude = null;\n    this.mouseClickEvent = {\n      x: e.x,\n      y: e.y\n    };\n\n    if (targetEle.id.indexOf('_ToolBar') === -1) {\n      var latLongValue = this.getClickLocation(targetId, e.pageX, e.pageY, targetEle, e['layerX'], e['layerY']);\n\n      if (!isNullOrUndefined(latLongValue)) {\n        latitude = latLongValue.latitude;\n        longitude = latLongValue.longitude;\n      }\n\n      var eventArgs_1 = {\n        cancel: false,\n        name: click,\n        target: targetId,\n        x: e.clientX,\n        y: e.clientY,\n        latitude: latitude,\n        longitude: longitude,\n        isShapeSelected: this.SelectedElement(targetEle)\n      };\n      this.trigger('click', eventArgs_1, function (mouseArgs) {\n        if (targetEle.id.indexOf('shapeIndex') > -1) {\n          _this.mergeCluster();\n\n          if (getElement(_this.element.id + '_mapsTooltip') && _this.mapsTooltipModule.tooltipTargetID.indexOf('_MarkerIndex_') > -1) {\n            removeElement(_this.element.id + '_mapsTooltip');\n          }\n        }\n\n        if (_this.markerModule) {\n          _this.markerModule.markerClusterClick(e);\n        }\n\n        if (!eventArgs_1.cancel) {\n          _this.notify(click, targetEle);\n        }\n\n        if (!eventArgs_1.cancel && targetEle.id.indexOf('shapeIndex') !== -1) {\n          var layerIndex = parseInt(targetEle.id.split('_LayerIndex_')[1].split('_')[0], 10);\n          var shapeSelectedEventArgs = triggerShapeEvent(targetId, _this.layers[layerIndex].selectionSettings, _this, shapeSelected);\n\n          if (!shapeSelectedEventArgs.cancel && _this.selectionModule && !isNullOrUndefined(_this.shapeSelected)) {\n            customizeStyle(_this.selectionModule.selectionType + 'selectionMap', _this.selectionModule.selectionType + 'selectionMapStyle', shapeSelectedEventArgs);\n          } else if (shapeSelectedEventArgs.cancel && _this.selectionModule && isNullOrUndefined(shapeSelectedEventArgs['data'])) {\n            removeClass(targetEle);\n\n            _this.selectionModule.removedSelectionList(targetEle);\n          }\n        }\n      });\n    }\n  };\n\n  Maps.prototype.getClickLocation = function (targetId, pageX, pageY, targetElement, x, y) {\n    var layerIndex = 0;\n    var latLongValue;\n\n    if (targetId.indexOf('_LayerIndex_') !== -1 && !this.isTileMap && parseInt(this.mouseDownEvent['x']) === parseInt(this.mouseClickEvent['x']) && parseInt(this.mouseDownEvent['y']) === parseInt(this.mouseClickEvent['y'])) {\n      layerIndex = parseFloat(targetId.split('_LayerIndex_')[1].split('_')[0]);\n\n      if (this.layers[layerIndex].geometryType === 'Normal') {\n        if (targetId.indexOf('_shapeIndex_') > -1) {\n          var location_2 = getMousePosition(pageX, pageY, targetElement.parentElement);\n          var minLongitude = Math.abs(-this.baseMapBounds.longitude.min * this.mapLayerPanel.currentFactor);\n          var minLatitude = Math.abs(this.baseMapBounds.latitude.max * this.mapLayerPanel.currentFactor);\n          latLongValue = {\n            latitude: Math.abs(this.baseMapBounds.latitude.max - location_2.y / this.mapLayerPanel.currentFactor),\n            longitude: Math.abs(location_2.x / this.mapLayerPanel.currentFactor + this.baseMapBounds.longitude.min)\n          };\n\n          if (this.baseMapBounds.longitude.min < 0 && minLongitude > location_2.x) {\n            latLongValue.longitude = -latLongValue.longitude;\n          }\n\n          if (this.baseMapBounds.latitude.min < 0 && minLatitude > location_2.y) {\n            latLongValue.latitude = -latLongValue.latitude;\n          }\n        } else if (targetId.indexOf('_MarkerIndex_') > -1 && this.markerModule) {\n          var markerIndex = parseInt(targetId.split('_MarkerIndex_')[1].split('_')[0], 10);\n          var dataIndex = parseInt(targetId.split('_dataIndex_')[1].split('_')[0], 10);\n\n          if (!isNaN(markerIndex) && !isNaN(dataIndex)) {\n            var dataObject = this.layers[layerIndex].markerSettings[markerIndex].dataSource[dataIndex];\n            latLongValue = {\n              latitude: dataObject['latitude'],\n              longitude: dataObject.longitude\n            };\n          } else {\n            latLongValue = {\n              latitude: null,\n              longitude: null\n            };\n          }\n        } else {\n          latLongValue = {\n            latitude: null,\n            longitude: null\n          };\n        }\n      } else {\n        latLongValue = this.getGeoLocation(layerIndex, x, y);\n      }\n    } else if (this.isTileMap && parseInt(this.mouseDownEvent['x']) === parseInt(this.mouseClickEvent['x']) && parseInt(this.mouseDownEvent['y']) === parseInt(this.mouseClickEvent['y'])) {\n      latLongValue = this.getTileGeoLocation(x, y);\n    }\n\n    return latLongValue;\n  };\n  /**\n   * This method is used to perform operations when mouse click on maps.\n   *\n   * @param {PointerEvent} e - Specifies the pointer event on maps.\n   * @returns {boolean} - Returns the boolean value\n   */\n\n\n  Maps.prototype.mouseEndOnMap = function (e) {\n    var targetEle = e.target;\n    var targetId = targetEle.id;\n    var pageX;\n    var latitude = null;\n    var longitude = null;\n    var pageY;\n    var target;\n    var touchArg;\n    var rect = this.element.getBoundingClientRect();\n    var element = e.target;\n\n    if (e.type.indexOf('touch') !== -1) {\n      this.isTouch = true;\n      touchArg = e;\n      pageX = touchArg.changedTouches[0].pageX;\n      pageY = touchArg.changedTouches[0].pageY;\n      target = touchArg.target;\n      this.mouseClickEvent = {\n        x: pageX,\n        y: pageY\n      };\n    } else {\n      this.isTouch = e.pointerType === 'touch';\n      pageX = e.pageX;\n      pageY = e.pageY;\n      target = e.target;\n    }\n\n    if (this.isTouch) {\n      if (targetEle.id.indexOf('_ToolBar') === -1) {\n        var latLongValue = this.getClickLocation(targetId, pageX, pageY, targetEle, pageX, pageY);\n\n        if (!isNullOrUndefined(latLongValue)) {\n          latitude = latLongValue.latitude;\n          longitude = latLongValue.longitude;\n        }\n\n        var eventArgs = {\n          cancel: false,\n          name: click,\n          target: targetId,\n          x: e.clientX,\n          y: e.clientY,\n          latitude: latitude,\n          longitude: longitude,\n          isShapeSelected: this.SelectedElement(targetEle)\n        }; // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n        this.trigger('click', eventArgs, function (mouseArgs) {});\n      }\n\n      this.titleTooltip(e, pageX, pageY, true);\n\n      if (!isNullOrUndefined(this.legendModule)) {\n        this.legendTooltip(e, e.pageX, e.pageY, true);\n      }\n    }\n\n    this.notify(Browser.touchEndEvent, e);\n\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n\n    return false;\n  };\n  /**\n   * This method is used to perform operations when mouse is clicked down on maps.\n   *\n   * @param {PointerEvent} e - Specifies the pointer event on maps\n   * @returns {void}\n   */\n\n\n  Maps.prototype.mouseDownOnMap = function (e) {\n    var pageX;\n    var pageY;\n    var target;\n    var touchArg;\n    this.mouseDownEvent = {\n      x: e.x,\n      y: e.y\n    };\n\n    if (e.type.indexOf('touch') !== -1 && e.changedTouches) {\n      this.mouseDownEvent = {\n        x: e.changedTouches[0].pageX,\n        y: e.changedTouches[0].pageY\n      };\n    }\n\n    var rect = this.element.getBoundingClientRect();\n    var element = e.target;\n\n    if (element.id.indexOf('_ToolBar') === -1) {\n      var markerModule = this.markerModule;\n\n      if (element.id.indexOf('shapeIndex') > -1 || element.id.indexOf('Tile') > -1) {\n        this.mergeCluster();\n      }\n\n      if (markerModule) {\n        markerModule.markerClick(e);\n        markerModule.markerClusterClick(e);\n      }\n\n      if (this.bubbleModule) {\n        this.bubbleModule.bubbleClick(e);\n      }\n    }\n\n    this.notify(Browser.touchStartEvent, e);\n  };\n  /**\n   * Merges the marker clusters.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Maps.prototype.mergeCluster = function () {\n    if (this.markerModule && this.markerModule.sameMarkerData.length > 0 && (this.zoomModule ? this.zoomModule.isSingleClick : true)) {\n      mergeSeparateCluster(this.markerModule.sameMarkerData, this, getElement(this.element.id + '_Markers_Group'));\n      this.markerModule.sameMarkerData = [];\n    }\n  };\n  /**\n   * This method is used to perform operations when performing the double click operation on maps.\n   *\n   * @param {PointerEvent} e - Specifies the pointer event.\n   */\n\n\n  Maps.prototype.mapsOnDoubleClick = function (e) {\n    this.notify('dblclick', e);\n    var targetElement = e.target;\n    var targetId = targetElement.id;\n    var layerIndex = 0;\n    var latLongValue;\n    var latitude = null;\n    var longitude = null;\n\n    if (targetElement.id.indexOf('_ToolBar') === -1) {\n      if (targetElement.id.indexOf('_LayerIndex_') !== -1 && !this.isTileMap && this.mouseDownEvent['x'] === e.clientX && this.mouseDownEvent['y'] === e.clientY) {\n        layerIndex = parseFloat(targetElement.id.split('_LayerIndex_')[1].split('_')[0]);\n        latLongValue = this.getGeoLocation(layerIndex, e['layerX'], e['layerY']);\n        latitude = latLongValue['latitude'];\n        longitude = latLongValue['longitude'];\n      } else if (this.isTileMap && this.mouseDownEvent['x'] === e.clientX && this.mouseDownEvent['y'] === e.clientY) {\n        latLongValue = this.getTileGeoLocation(e['layerX'], e['layerY']);\n        latitude = latLongValue['latitude'];\n        longitude = latLongValue['longitude'];\n      }\n\n      var doubleClickArgs = {\n        cancel: false,\n        name: doubleClick,\n        x: e.clientX,\n        y: e.clientY,\n        target: targetId,\n        latitude: latitude,\n        longitude: longitude,\n        isShapeSelected: null\n      };\n      this.trigger('doubleClick', doubleClickArgs);\n    }\n  };\n  /**\n   * This method is used to perform operations while performing mouse over on maps.\n   *\n   * @param {PointerEvent} e - Specifies the pointer event on maps.\n   * @returns {void}\n   */\n\n\n  Maps.prototype.mouseMoveOnMap = function (e) {\n    var pageX;\n    var pageY;\n    var touchArg;\n    var target;\n    var touches = null;\n    target = e.type === 'touchmove' ? e.target : target = e.target; // if (target.id.indexOf('shapeIndex') !== -1 && !this.highlightSettings.enable) {\n    //     triggerShapeEvent(target.id, this.highlightSettings, this, shapeHighlight);\n    // }\n\n    if (this.markerModule) {\n      this.markerModule.markerMove(e);\n      this.markerModule.markerClusterMouseMove(e);\n    }\n\n    if (this.bubbleModule) {\n      this.bubbleModule.bubbleMove(e);\n    }\n\n    this.onMouseMove(e);\n    this.notify(Browser.touchMoveEvent, e);\n  };\n  /**\n   * This method is used to perform operations when mouse move event is performed on maps.\n   *\n   * @param {PointerEvent} e - Specifies the pointer event on maps.\n   * @returns {void}\n   */\n\n\n  Maps.prototype.onMouseMove = function (e) {\n    var element = e.target;\n    var pageX;\n    var pageY;\n    var target;\n    var touchArg;\n\n    if (!this.isTouch) {\n      this.titleTooltip(e, e.pageX, e.pageY);\n\n      if (!isNullOrUndefined(this.legendModule)) {\n        this.legendTooltip(e, e.pageX, e.pageY, true);\n      }\n    }\n\n    return false;\n  };\n\n  Maps.prototype.legendTooltip = function (event, x, y, isTouch) {\n    var targetId = event.target.id;\n    var legendText;\n    var page = this.legendModule.currentPage;\n    var legendIndex = event.target.id.split('_Index_')[1];\n    var collection;\n    page = this.legendModule.totalPages.length <= this.legendModule.currentPage ? this.legendModule.totalPages.length - 1 : this.legendModule.currentPage < 0 ? 0 : this.legendModule.currentPage;\n    var count = this.legendModule.totalPages.length !== 0 ? this.legendModule.totalPages[page]['Collection'].length : this.legendModule.totalPages.length;\n\n    for (var i = 0; i < count; i++) {\n      collection = this.legendModule.totalPages[page]['Collection'][i];\n      legendText = collection['DisplayText'];\n      targetId = event.target['id'];\n      legendIndex = event.target['id'].split('_Index_')[1];\n\n      if (targetId === this.element.id + '_Legend_Text_Index_' + legendIndex && event.target.textContent.indexOf('...') > -1 && collection['idIndex'] === parseInt(legendIndex, 10)) {\n        showTooltip(legendText, this.legendSettings.textStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_Legend_Text_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n      }\n    }\n\n    if (targetId !== this.element.id + '_Legend_Text_Index_' + legendIndex) {\n      removeElement(this.element.id + '_EJ2_Legend_Text_Tooltip');\n    }\n  };\n\n  Maps.prototype.titleTooltip = function (event, x, y, isTouch) {\n    var targetId = event.target.id;\n\n    if (targetId === this.element.id + '_LegendTitle' && event.target.textContent.indexOf('...') > -1) {\n      showTooltip(this.legendSettings.title.text, this.legendSettings.titleStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_LegendTitle_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n    } else {\n      removeElement(this.element.id + '_EJ2_LegendTitle_Tooltip');\n    }\n\n    if (targetId === this.element.id + '_Map_title' && event.target.textContent.indexOf('...') > -1) {\n      showTooltip(this.titleSettings.text, this.titleSettings.textStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_Title_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n    } else {\n      removeElement(this.element.id + '_EJ2_Title_Tooltip');\n    }\n  };\n  /*\n   /**\n   * This method is used to perform operations while resizing the window.\n   *\n   * @param e - Specifies the arguments of window resize event.\n   */\n\n\n  Maps.prototype.mapsOnResize = function (e) {\n    var _this = this;\n\n    this.isResize = this.isReset = true;\n    var args = {\n      cancel: false,\n      name: resize,\n      previousSize: this.availableSize,\n      currentSize: calculateSize(this),\n      maps: this\n    };\n    this.trigger(resize, args);\n\n    if (!args.cancel) {\n      if (this.resizeTo) {\n        clearTimeout(this.resizeTo);\n      }\n\n      if (!isNullOrUndefined(this.element) && this.element.classList.contains('e-maps')) {\n        this.resizeTo = setTimeout(function () {\n          _this.unWireEVents();\n\n          _this.createSVG();\n\n          _this.refreshing = true;\n\n          _this.wireEVents();\n\n          _this.render();\n        }, 500);\n      }\n    }\n\n    return false;\n  };\n  /**\n   * This method is used to zoom the map by specifying the center position.\n   *\n   * @param {number} centerPosition - Specifies the center position\n   * @param {number} centerPosition.latitude - Specifies the latitude value for the center position\n   * @param {number} centerPosition.longitude - Specifies the longitude value for the center position\n   * @param {number} zoomFactor - Specifies the zoom factor for maps.\n   * @returns {void}\n   */\n\n\n  Maps.prototype.zoomByPosition = function (centerPosition, zoomFactor) {\n    var factor = this.mapLayerPanel.calculateFactor(this.layersCollection[0]);\n    var position;\n    var size = this.mapAreaRect;\n\n    if (!this.isTileMap && this.zoomModule) {\n      if (!isNullOrUndefined(centerPosition)) {\n        position = convertGeoToPoint(centerPosition.latitude, centerPosition.longitude, factor, this.layersCollection[0], this);\n        var mapRect = document.getElementById(this.element.id + '_Layer_Collections').getBoundingClientRect();\n        var svgRect = this.svgObject.getBoundingClientRect();\n        var xDiff = Math.abs(mapRect.left - svgRect.left) / this.scale;\n        var yDiff = Math.abs(mapRect.top - svgRect.top) / this.scale;\n        var x = this.translatePoint.x + xDiff;\n        var y = this.translatePoint.y + yDiff;\n        this.scale = zoomFactor;\n        this.translatePoint.x = ((mapRect.left < svgRect.left ? x : 0) + size.width / 2 - position.x * zoomFactor) / zoomFactor;\n        this.translatePoint.y = ((mapRect.top < svgRect.top ? y : 0) + size.height / 2 - position.y * zoomFactor) / zoomFactor;\n        this.zoomModule.applyTransform();\n      } else {\n        position = {\n          x: size.width / 2,\n          y: size.height / 2\n        };\n        this.zoomModule.performZooming(position, zoomFactor, zoomFactor > this.scale ? 'ZoomIn' : 'ZoomOut');\n      }\n    } else if (this.zoomModule) {\n      this.tileZoomLevel = zoomFactor;\n      this.tileTranslatePoint = this.mapLayerPanel['panTileMap'](this.availableSize.width, this.availableSize.height, {\n        x: centerPosition.longitude,\n        y: centerPosition.latitude\n      });\n      this.mapLayerPanel.generateTiles(zoomFactor, this.tileTranslatePoint, null, new BingMap(this));\n    }\n  };\n  /**\n   * This method is used to perform panning by specifying the direction.\n   *\n   * @param {PanDirection} direction - Specifies the direction in which the panning is performed.\n   * @param {PointerEvent | TouchEvent} mouseLocation - Specifies the location of the mouse pointer in maps.\n   */\n\n\n  Maps.prototype.panByDirection = function (direction, mouseLocation) {\n    var xDiff = 0;\n    var yDiff = 0;\n\n    switch (direction) {\n      case 'Left':\n        xDiff = -(this.mapAreaRect.width / 7);\n        break;\n\n      case 'Right':\n        xDiff = this.mapAreaRect.width / 7;\n        break;\n\n      case 'Top':\n        yDiff = -(this.mapAreaRect.height / 7);\n        break;\n\n      case 'Bottom':\n        yDiff = this.mapAreaRect.height / 7;\n        break;\n    }\n\n    if (this.zoomModule) {\n      this.zoomModule.panning(direction, xDiff, yDiff, mouseLocation);\n    }\n  };\n  /**\n   * This method is used to add the layers dynamically to the maps.\n   *\n   * @param {Object} layer - Specifies the layer for the maps.\n   */\n\n\n  Maps.prototype.addLayer = function (layer) {\n    this.layers.push(new LayerSettings(this.layers[0], 'layers', layer));\n    this.refresh();\n  };\n  /**\n   * This method is used to remove a layer from map.\n   *\n   * @param {number} index - Specifies the index number of the layer to be removed.\n   * @returns {void}\n   */\n\n\n  Maps.prototype.removeLayer = function (index) {\n    this.layers.splice(index, 1);\n    this.refresh();\n  };\n  /**\n   * This method is used to add markers dynamically in the maps.\n   * If we provide the index value of the layer in which the marker to be added and the coordinates\n   * of the marker as parameters, the marker will be added in the location.\n   *\n   * @param {number} layerIndex - Specifies the index number of the layer.\n   * @param {MarkerSettingsModel[]} markerCollection - Specifies the settings of the marker to be added.\n   * @returns {void}\n   */\n\n\n  Maps.prototype.addMarker = function (layerIndex, markerCollection) {\n    var layerEle = document.getElementById(this.element.id + '_LayerIndex_' + layerIndex);\n\n    if (markerCollection.length > 0 && layerEle) {\n      for (var _i = 0, markerCollection_1 = markerCollection; _i < markerCollection_1.length; _i++) {\n        var newMarker = markerCollection_1[_i];\n        this.layersCollection[layerIndex].markerSettings.push(new MarkerSettings(this, 'markerSettings', newMarker));\n      }\n\n      var markerModule = new Marker(this);\n      markerModule.markerRender(layerEle, layerIndex, this.mapLayerPanel['currentFactor'], 'AddMarker');\n      this.arrangeTemplate();\n    }\n  };\n  /**\n   * This method is used to select the geometric shape element in the maps component.\n   *\n   * @param {number} layerIndex - Specifies the index of the layer in maps.\n   * @param {string | string[]} propertyName - Specifies the property name from the data source.\n   * @param {string} name - Specifies the name of the shape that is selected.\n   * @param {boolean} enable - Specifies the shape selection to be enabled.\n   * @returns {void}\n   */\n\n\n  Maps.prototype.shapeSelection = function (layerIndex, propertyName, name, enable) {\n    var targetEle;\n    var subLayerIndex;\n    var popertyNameArray = Array.isArray(propertyName) ? propertyName : Array(propertyName);\n\n    if (isNullOrUndefined(enable)) {\n      enable = true;\n    }\n\n    var selectionsettings = this.layers[layerIndex].selectionSettings;\n\n    if (!selectionsettings.enableMultiSelect && this.legendSelection && enable) {\n      this.removeShapeSelection();\n    }\n\n    if (this.layers[layerIndex].type === 'SubLayer') {\n      for (var i = 0; i < this.layersCollection.length; i++) {\n        if (this.layersCollection[i].shapeData === this.layers[layerIndex].shapeData) {\n          subLayerIndex = i;\n          break;\n        }\n      }\n    }\n\n    if (selectionsettings.enable) {\n      var targetId = void 0;\n      var dataIndex = void 0;\n      var shapeIndex = void 0;\n      var indexValue = void 0;\n      var shapeDataValue = void 0;\n      var data = void 0;\n      var shapeData = this.layers[layerIndex].shapeData['features'];\n\n      for (var i = 0; i < shapeData.length; i++) {\n        for (var j = 0; j < popertyNameArray.length; j++) {\n          var propertyName_1 = !isNullOrUndefined(shapeData[i]['properties'][popertyNameArray[j]]) && isNaN(shapeData[i]['properties'][popertyNameArray[j]]) ? shapeData[i]['properties'][popertyNameArray[j]].toLowerCase() : shapeData[i]['properties'][popertyNameArray[j]];\n          var shapeName = !isNullOrUndefined(name) ? name.toLowerCase() : name;\n          var k = void 0;\n\n          if (propertyName_1 === shapeName) {\n            if (!isNullOrUndefined(this.layers[layerIndex].shapeSettings.colorValuePath)) {\n              k = checkShapeDataFields(this.layers[layerIndex].dataSource, shapeData[i]['properties'], this.layers[layerIndex].shapeDataPath, this.layers[layerIndex].shapePropertyPath, this.layers[layerIndex]);\n            }\n\n            var baseLayer = this.layers[layerIndex];\n\n            if (this.baseLayerIndex >= 0 && baseLayer.isBaseLayer) {\n              indexValue = 0;\n            } else if (this.layers[layerIndex].type === 'SubLayer') {\n              indexValue = subLayerIndex;\n            }\n\n            targetId = this.element.id + '_' + 'LayerIndex_' + indexValue + '_shapeIndex_' + i + '_dataIndex_' + k;\n            targetEle = getElement(targetId);\n\n            if (isNullOrUndefined(k) && isNullOrUndefined(targetEle)) {\n              targetId = this.element.id + '_' + 'LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_null';\n              targetEle = getElement(targetId);\n            }\n\n            shapeIndex = parseInt(targetEle.id.split('_shapeIndex_')[1].split('_')[0], 10);\n            shapeDataValue = this.layers[layerIndex].shapeData['features']['length'] > shapeIndex ? this.layers[layerIndex].shapeData['features'][shapeIndex]['properties'] : null;\n            dataIndex = parseInt(targetEle.id.split('_dataIndex_')[1].split('_')[0], 10);\n            data = isNullOrUndefined(dataIndex) ? null : this.layers[layerIndex].dataSource[dataIndex];\n\n            if (enable) {\n              triggerItemSelectionEvent(selectionsettings, this, targetEle, shapeDataValue, data);\n              this.shapeSelectionClass = getElement('ShapeselectionMap');\n\n              if (this.legendSettings.visible && targetEle.id.indexOf('_MarkerIndex_') === -1) {\n                this.legendModule.shapeHighLightAndSelection(targetEle, data, selectionsettings, 'selection', layerIndex);\n              }\n\n              var shapeToggled = this.legendSettings.visible ? this.legendModule.shapeToggled : true;\n\n              if (shapeToggled) {\n                targetEle.setAttribute('class', 'ShapeselectionMapStyle');\n\n                if (this.selectedElementId.indexOf(targetEle.getAttribute('id')) === -1) {\n                  this.selectedElementId.push(targetEle.getAttribute('id'));\n                }\n\n                if (!selectionsettings.enableMultiSelect) {\n                  return;\n                }\n              }\n            } else {\n              this.legendSelection = !selectionsettings.enableMultiSelect && !this.legendSelection ? true : this.legendSelection;\n\n              if (this.legendSettings.visible && targetEle.id.indexOf('_MarkerIndex_') === -1 && targetEle.getAttribute('class') === 'ShapeselectionMapStyle') {\n                this.legendModule.shapeHighLightAndSelection(targetEle, data, selectionsettings, 'selection', layerIndex);\n              }\n\n              var shapeToggled = this.legendSettings.visible ? this.legendModule.shapeToggled : true;\n\n              if (shapeToggled) {\n                removeClass(targetEle);\n                var selectedElementIdIndex = this.selectedElementId.indexOf(targetEle.getAttribute('id'));\n\n                if (selectedElementIdIndex !== -1) {\n                  this.selectedElementId.splice(selectedElementIdIndex, 1);\n\n                  if (!selectionsettings.enableMultiSelect && this.legendSelection && this.selectedElementId.length > 0) {\n                    this.removeShapeSelection();\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * This method is used to zoom the maps component based on the provided coordinates.\n   *\n   * @param {number} minLatitude - Specifies the minimum latitude to be zoomed.\n   * @param {number} minLongitude - Specifies the minimum latitude to be zoomed.\n   * @param {number} maxLatitude - Specifies the maximum latitude to be zoomed.\n   * @param {number} maxLongitude - Specifies the maximum longitude to be zoomed.\n   * @returns {void}\n   */\n\n\n  Maps.prototype.zoomToCoordinates = function (minLatitude, minLongitude, maxLatitude, maxLongitude) {\n    var _a, _b;\n\n    var centerLatitude;\n    var centerLongtitude;\n    var isTwoCoordinates = false;\n\n    if (isNullOrUndefined(maxLatitude) && isNullOrUndefined(maxLongitude) || isNullOrUndefined(minLatitude) && isNullOrUndefined(minLongitude)) {\n      minLatitude = isNullOrUndefined(minLatitude) ? 0 : minLatitude;\n      minLongitude = isNullOrUndefined(minLatitude) ? 0 : minLongitude;\n      maxLatitude = isNullOrUndefined(maxLatitude) ? minLatitude : maxLatitude;\n      maxLongitude = isNullOrUndefined(maxLongitude) ? minLongitude : maxLongitude;\n      isTwoCoordinates = true;\n    }\n\n    if (minLatitude > maxLatitude) {\n      _a = [maxLatitude, minLatitude], minLatitude = _a[0], maxLatitude = _a[1];\n    }\n\n    if (minLongitude > maxLongitude) {\n      _b = [maxLongitude, minLongitude], minLongitude = _b[0], maxLongitude = _b[1];\n    }\n\n    if (!isTwoCoordinates) {\n      centerLatitude = (minLatitude + maxLatitude) / 2;\n      centerLongtitude = (minLongitude + maxLongitude) / 2;\n    } else {\n      centerLatitude = minLatitude + maxLatitude;\n      centerLongtitude = minLongitude + maxLongitude;\n    }\n\n    this.centerLatOfGivenLocation = centerLatitude;\n    this.centerLongOfGivenLocation = centerLongtitude;\n    this.minLatOfGivenLocation = minLatitude;\n    this.minLongOfGivenLocation = minLongitude;\n    this.maxLatOfGivenLocation = maxLatitude;\n    this.maxLongOfGivenLocation = maxLongitude;\n    this.zoomNotApplied = true;\n    this.scaleOfGivenLocation = calculateZoomLevel(minLatitude, maxLatitude, minLongitude, maxLongitude, this.mapAreaRect.width, this.mapAreaRect.height, this);\n    var zoomArgs = {\n      cancel: false,\n      name: 'zoom',\n      type: zoomIn,\n      maps: this,\n      tileTranslatePoint: {},\n      translatePoint: {},\n      tileZoomLevel: this.isTileMap ? {\n        previous: this.tileZoomLevel,\n        current: this.scaleOfGivenLocation\n      } : {},\n      scale: !this.isTileMap ? {\n        previous: this.scale,\n        current: this.scaleOfGivenLocation\n      } : {\n        previous: this.tileZoomLevel,\n        current: this.scaleOfGivenLocation\n      }\n    };\n    this.trigger('zoom', zoomArgs);\n    this.refresh();\n  };\n  /**\n   * This method is used to remove multiple selected shapes in the maps.\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.removeShapeSelection = function () {\n    var selectedElements = this.selectedElementId.length;\n\n    for (var i = 0; i < selectedElements; i++) {\n      removeClass(getElementByID(this.selectedElementId[0]));\n      this.selectedElementId.splice(0, 1);\n    }\n\n    if (this.legendSettings.visible) {\n      var legendSelectedElements = this.legendSelectionCollection.length;\n\n      for (var i = 0; i < legendSelectedElements; i++) {\n        removeClass(getElementByID(this.legendSelectionCollection[i]['legendElement']['id']));\n        this.selectedLegendElementId.splice(0, 1);\n      }\n    }\n\n    this.shapeSelectionItem = [];\n    this.legendSelectionCollection = [];\n  };\n  /**\n   * This method is used to set culture for maps component.\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.setCulture = function () {\n    this.intl = new Internationalization();\n    this.setLocaleConstants();\n    this.localeObject = new L10n(this.getModuleName(), this.defaultLocalConstants, this.locale);\n  };\n  /**\n   * This method to set locale constants to the maps component.\n   *\n   * @returns {void}\n   */\n\n\n  Maps.prototype.setLocaleConstants = function () {\n    // Need to modify after the api confirm\n    this.defaultLocalConstants = {\n      ZoomIn: 'Zoom in',\n      Zoom: 'Zoom',\n      ZoomOut: 'Zoom out',\n      Pan: 'Pan',\n      Reset: 'Reset'\n    };\n  };\n  /**\n   * This method disposes the maps component.\n   */\n\n\n  Maps.prototype.destroy = function () {\n    this.unWireEVents();\n    this.shapeSelectionItem = [];\n    this.toggledShapeElementId = [];\n    this.toggledLegendId = [];\n    this.legendSelectionCollection = [];\n    this.selectedLegendElementId = [];\n    this.selectedNavigationElementId = [];\n    this.selectedBubbleElementId = [];\n    this.selectedMarkerElementId = [];\n    this.selectedElementId = [];\n    this.dataLabelShape = [];\n    this.zoomShapeCollection = [];\n    this.zoomLabelPositions = [];\n    this.mouseDownEvent = {\n      x: null,\n      y: null\n    };\n    this.mouseClickEvent = {\n      x: null,\n      y: null\n    };\n\n    if (document.getElementById('mapsmeasuretext')) {\n      document.getElementById('mapsmeasuretext').remove();\n    }\n\n    this.removeSvg();\n\n    _super.prototype.destroy.call(this);\n  };\n  /**\n   * Gets component name\n   *\n   * @returns {string} - Returns the string value\n   */\n\n\n  Maps.prototype.getModuleName = function () {\n    return 'maps';\n  };\n  /**\n   * Gets the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Returns the string value\n   * @private\n   */\n\n\n  Maps.prototype.getPersistData = function () {\n    var keyEntity = ['translatePoint', 'zoomSettings', 'mapScaleValue', 'tileTranslatePoint', 'baseTranslatePoint', 'scale', 'zoomPersistence', 'defaultState', 'markerZoomedState', 'initialCheck', 'initialZoomLevel', 'initialTileTranslate', 'applyZoomReset', 'markerZoomFactor'];\n    return this.addOnPersist(keyEntity);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {MapsModel} newProp - Specifies the new property\n   * @param {MapsModel} oldProp - Specifies the old property\n   * @returns {void}\n   * @private\n   */\n\n\n  Maps.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var render = false;\n    var isMarker = false;\n    var isStaticMapType = false;\n    var layerEle;\n\n    if (newProp['layers']) {\n      var newLayerLength = Object.keys(newProp['layers']).length;\n      layerEle = document.getElementById(this.element.id + '_LayerIndex_' + (newLayerLength - 1));\n    }\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'background':\n          this.renderBorder();\n          break;\n\n        case 'height':\n        case 'width':\n        case 'layers':\n        case 'projectionType':\n        case 'centerPosition':\n        case 'legendSettings':\n        case 'baseLayerIndex':\n          if (prop === 'layers') {\n            var layerPropLength = Object.keys(newProp.layers).length;\n\n            for (var x = 0; x < layerPropLength; x++) {\n              if (!isNullOrUndefined(newProp.layers[x])) {\n                var collection = Object.keys(newProp.layers[x]);\n\n                for (var _b = 0, collection_1 = collection; _b < collection_1.length; _b++) {\n                  var collectionProp = collection_1[_b];\n\n                  if (collectionProp === 'markerSettings') {\n                    isMarker = true;\n                  } else if (collectionProp === 'staticMapType') {\n                    isStaticMapType = true;\n                  }\n                }\n              }\n            }\n          }\n\n          render = true;\n          break;\n\n        case 'zoomSettings':\n          if (!isNullOrUndefined(oldProp.zoomSettings)) {\n            if (newProp.zoomSettings.zoomFactor !== oldProp.zoomSettings.zoomFactor) {\n              render = false;\n            } else if (newProp.zoomSettings.shouldZoomInitially !== oldProp.zoomSettings.shouldZoomInitially) {\n              this.zoomSettings.zoomFactor = 1;\n              render = true;\n            } else if (newProp.zoomSettings.enable !== oldProp.zoomSettings.enable) {\n              this.zoomSettings.zoomFactor = 1;\n              render = true;\n            } else {\n              render = true;\n            }\n          }\n\n          break;\n\n        case 'locale':\n        case 'currencyCode':\n          _super.prototype.refresh.call(this);\n\n          break;\n      }\n    }\n\n    if (render) {\n      if (newProp.layers && isMarker) {\n        removeElement(this.element.id + '_Markers_Group');\n\n        if (this.isTileMap) {\n          this.mapLayerPanel.renderTileLayer(this.mapLayerPanel, this.layers['currentFactor'], this.layers.length - 1);\n        } else {\n          this.render();\n        }\n      } else if (newProp.layers && isStaticMapType) {\n        this.mapLayerPanel.renderGoogleMap(this.layers[this.layers.length - 1].key, this.staticMapZoom);\n      } else {\n        this.createSVG();\n        this.renderElements();\n      }\n    }\n  };\n  /**\n   * To provide the array of modules needed for maps rendering\n   *\n   * @returns {ModuleDeclaration[]} - Returns the modules\n   * @private\n   */\n\n\n  Maps.prototype.requiredModules = function () {\n    var modules = [];\n    var isVisible = this.findVisibleLayers(this.layers);\n    var annotationEnable = false;\n    this.annotations.map(function (annotation, index) {\n      annotationEnable = annotation.content != null;\n    });\n\n    if (this.isBubbleVisible()) {\n      modules.push({\n        member: 'Bubble',\n        args: [this]\n      });\n    }\n\n    if (isVisible.highlight) {\n      modules.push({\n        member: 'Highlight',\n        args: [this]\n      });\n    }\n\n    if (isVisible.selection) {\n      modules.push({\n        member: 'Selection',\n        args: [this]\n      });\n    }\n\n    if (this.legendSettings.visible) {\n      modules.push({\n        member: 'Legend',\n        args: [this]\n      });\n    }\n\n    if (this.zoomSettings.enable || this.zoomSettings.zoomFactor > this.zoomSettings.minZoom) {\n      modules.push({\n        member: 'Zoom',\n        args: [this]\n      });\n    }\n\n    if (this.isMarkersVisible()) {\n      modules.push({\n        member: 'Marker',\n        args: [this]\n      });\n    }\n\n    if (this.isDataLabelVisible()) {\n      modules.push({\n        member: 'DataLabel',\n        args: [this]\n      });\n    }\n\n    if (this.isNavigationVisible()) {\n      modules.push({\n        member: 'NavigationLine',\n        args: [this]\n      });\n    }\n\n    if (isVisible.tooltip) {\n      modules.push({\n        member: 'MapsTooltip',\n        args: [this]\n      });\n    }\n\n    if (annotationEnable) {\n      modules.push({\n        member: 'Annotations',\n        args: [this, Annotations]\n      });\n    }\n\n    if (this.allowPrint) {\n      modules.push({\n        member: 'Print',\n        args: [this]\n      });\n    }\n\n    if (this.allowImageExport) {\n      modules.push({\n        member: 'ImageExport',\n        args: [this]\n      });\n    }\n\n    if (this.allowPdfExport) {\n      modules.push({\n        member: 'PdfExport',\n        args: [this]\n      });\n    }\n\n    return modules;\n  };\n  /**\n   * To find marker visibility\n   */\n\n\n  Maps.prototype.isMarkersVisible = function () {\n    var isVisible = false;\n    Array.prototype.forEach.call(this.layers, function (layer, layerIndex) {\n      for (var i = 0; i < layer.markerSettings.length; i++) {\n        if (layer.markerSettings[i].visible) {\n          isVisible = true;\n          break;\n        }\n      }\n    });\n    return isVisible;\n  };\n  /**\n   * To find DataLabel visibility\n   */\n\n\n  Maps.prototype.isDataLabelVisible = function () {\n    var isVisible = false;\n\n    for (var i = 0; i < this.layers.length; i++) {\n      if (this.layers[i].dataLabelSettings.visible) {\n        isVisible = true;\n        break;\n      }\n    }\n\n    return isVisible;\n  };\n  /**\n   * To find navigation line visibility\n   */\n\n\n  Maps.prototype.isNavigationVisible = function () {\n    var isVisible = false;\n    Array.prototype.forEach.call(this.layers, function (layer, layerIndex) {\n      for (var i = 0; i < layer.navigationLineSettings.length; i++) {\n        if (layer.navigationLineSettings[i].visible) {\n          isVisible = true;\n          break;\n        }\n      }\n    });\n    return isVisible;\n  };\n  /**\n   * To find space between the secondary element and svg element.\n   * @private\n   */\n\n\n  Maps.prototype.getExtraPosition = function () {\n    var top = 0;\n    var left = 0;\n    var svgElement = getElement(this.element.id + '_svg');\n\n    if (!isNullOrUndefined(svgElement)) {\n      var svgClientRects = svgElement.getClientRects();\n      var mapsClientRects = getElement(this.element.id + '_Secondary_Element').getClientRects();\n\n      if (svgClientRects.length !== 0 && mapsClientRects.length !== 0) {\n        var svgClientRect = svgClientRects[0];\n        var mapsClientRect = mapsClientRects[0];\n        top = svgClientRect.top - mapsClientRect.top;\n        left = svgClientRect.left - mapsClientRect.left;\n      }\n    }\n\n    return new Point(left, top);\n  };\n  /**\n   * To find marker visibility\n   */\n\n\n  Maps.prototype.isBubbleVisible = function () {\n    var isVisible = false;\n\n    for (var _i = 0, _a = this.layers; _i < _a.length; _i++) {\n      var layer = _a[_i];\n\n      if (this.getBubbleVisible(layer)) {\n        isVisible = true;\n        break;\n      }\n    }\n\n    return isVisible;\n  };\n  /**\n   * To find the bubble visibility from layer\n   *\n   * @param {LayerSettingsModel} layer - Spcifies the layer settings model\n   * @returns {boolean} - Returns the boolean value\n   * @private\n   */\n\n\n  Maps.prototype.getBubbleVisible = function (layer) {\n    var isVisible = false;\n\n    for (var _i = 0, _a = layer.bubbleSettings; _i < _a.length; _i++) {\n      var bubble = _a[_i];\n\n      if (bubble.visible) {\n        isVisible = true;\n        break;\n      }\n    }\n\n    return isVisible;\n  };\n  /**\n   * This method handles the printing functionality for the maps component.\n   *\n   * @param {string[] | string | Element} id - Specifies the element to be printed.\n   * @returns {void}\n   */\n\n\n  Maps.prototype.print = function (id) {\n    if (this.allowPrint && this.printModule) {\n      this.printModule.print(id);\n    }\n  };\n  /**\n   * This method handles the export functionality for the maps component.\n   *\n   * @param {ExportType} type - Specifies the type of the exported file.\n   * @param {string} fileName - Specifies the name of the file with which the rendered maps need to be exported.\n   * @param {PdfPageOrientation} orientation - Specifies the orientation of the pdf document in exporting.\n   * @param {boolean} allowDownload - Specifies whether to download as a file or get as base64 string for the file\n   * @returns {Promise<string>} - Returns the string value.\n   */\n\n\n  Maps.prototype.export = function (type, fileName, orientation, allowDownload) {\n    var _this = this;\n\n    if (isNullOrUndefined(allowDownload)) {\n      allowDownload = true;\n    }\n\n    if (type !== 'PDF' && this.allowImageExport && this.imageExportModule) {\n      return new Promise(function (resolve, reject) {\n        resolve(_this.imageExportModule.export(type, fileName, allowDownload));\n      });\n    } else if (this.allowPdfExport && this.pdfExportModule) {\n      return new Promise(function (resolve, reject) {\n        resolve(_this.pdfExportModule.export(type, fileName, allowDownload, orientation));\n      });\n    }\n\n    return null;\n  };\n  /**\n   * To find visibility of layers and markers for required modules load.\n   *\n   * @param {LayerSettingsModel[]} layers - Specifies the layers.\n   * @param {boolean} isLayerVisible - Specifies whether the layer is visible or not.\n   * @param {boolean} isBubblevisible - Specifies whether the bubble is visible or not.\n   * @param {boolean} istooltipVisible - Specifies whether the tooltip is visible or not.\n   * @param {boolean} isSelection - Specifies whether the shape is selectd or not.\n   * @param {boolean} isHighlight - Specfies whether the shape is highlighted or not.\n   * @returns {boolean} - Returns the boolean value\n   */\n\n\n  Maps.prototype.findVisibleLayers = function (layers, isLayerVisible, isBubblevisible, istooltipVisible, isSelection, isHighlight) {\n    if (isLayerVisible === void 0) {\n      isLayerVisible = false;\n    }\n\n    if (isBubblevisible === void 0) {\n      isBubblevisible = false;\n    }\n\n    if (istooltipVisible === void 0) {\n      istooltipVisible = false;\n    }\n\n    if (isSelection === void 0) {\n      isSelection = false;\n    }\n\n    if (isHighlight === void 0) {\n      isHighlight = false;\n    }\n\n    var bubbles;\n    var markers;\n    var navigationLine;\n\n    for (var _i = 0, layers_1 = layers; _i < layers_1.length; _i++) {\n      var layer = layers_1[_i];\n      isLayerVisible = layer.visible || isLayerVisible;\n\n      if (layer.visible) {\n        bubbles = layer.bubbleSettings;\n        markers = layer.markerSettings;\n        navigationLine = layer.navigationLineSettings;\n\n        for (var _a = 0, navigationLine_1 = navigationLine; _a < navigationLine_1.length; _a++) {\n          var navigation = navigationLine_1[_a];\n\n          if (navigation.visible) {\n            isSelection = navigation.highlightSettings.enable || isSelection;\n            isHighlight = navigation.selectionSettings.enable || isHighlight;\n          }\n        }\n\n        for (var _b = 0, markers_1 = markers; _b < markers_1.length; _b++) {\n          var marker = markers_1[_b];\n\n          if (marker.visible) {\n            istooltipVisible = marker.tooltipSettings.visible || istooltipVisible;\n            isSelection = marker.selectionSettings.enable || isSelection;\n            isHighlight = marker.highlightSettings.enable || isHighlight;\n          }\n\n          if (istooltipVisible) {\n            break;\n          }\n        }\n\n        for (var _c = 0, bubbles_1 = bubbles; _c < bubbles_1.length; _c++) {\n          var bubble = bubbles_1[_c];\n\n          if (bubble.visible) {\n            istooltipVisible = bubble.tooltipSettings.visible || istooltipVisible;\n            isSelection = bubble.selectionSettings.enable || isSelection;\n            isHighlight = bubble.highlightSettings.enable || isHighlight;\n          }\n\n          if (istooltipVisible) {\n            break;\n          }\n        }\n\n        istooltipVisible = layer.tooltipSettings.visible || istooltipVisible;\n        isSelection = layer.selectionSettings.enable || isSelection;\n        isHighlight = layer.highlightSettings.enable || isHighlight;\n      }\n\n      if (isLayerVisible && isBubblevisible && istooltipVisible) {\n        break;\n      }\n    }\n\n    return {\n      layer: isLayerVisible,\n      bubble: isBubblevisible,\n      tooltip: istooltipVisible,\n      selection: isSelection,\n      highlight: isHighlight\n    };\n  };\n  /**\n   * This method is used to get the geo location points.\n   *\n   * @param {number} layerIndex - Specifies the index number of the layer of the map.\n   * @param {number} x - Specifies the x value.\n   * @param {number} y - Specifies the y value.\n   * @returns {GeoPosition}- Returns the geo position\n   */\n\n\n  Maps.prototype.getGeoLocation = function (layerIndex, x, y) {\n    var container = document.getElementById(this.element.id);\n    var pageX = x - container.offsetLeft;\n    var pageY = y - container.offsetTop;\n    var currentLayer = this.layersCollection[layerIndex];\n    var translate = getTranslate(this, currentLayer, false);\n    var translatePoint = translate['location'];\n    var translatePointX = translatePoint.x * this.scale;\n    var translatePointY = translatePoint.y * this.scale;\n    var mapSize = Math.min(this.mapAreaRect.height, this.mapAreaRect.width) * this.mapLayerPanel['currentFactor'] * this.scale;\n    var xx = this.clip(pageX - translatePointX, 0, mapSize - 1) / mapSize - 0.5;\n    var yy = 0.5 - this.clip(pageY - translatePointY, 0, mapSize - 1) / mapSize;\n    var lat = 90 - 360 * Math.atan(Math.exp(-yy * 2 * Math.PI)) / Math.PI;\n    var long = 360 * xx;\n    return {\n      latitude: lat,\n      longitude: long\n    };\n  };\n\n  Maps.prototype.clip = function (value, minVal, maxVal) {\n    return Math.min(Math.max(value, minVal), maxVal);\n  };\n  /**\n   * This method is used to get the geo location points when tile maps is rendered in the maps component.\n   *\n   * @param {number} x - Specifies the x value\n   * @param {number} y - Specifies the y value\n   * @returns {GeoPosition} - Returns the position\n   */\n\n\n  Maps.prototype.getTileGeoLocation = function (x, y) {\n    var container = document.getElementById(this.element.id);\n    var ele = document.getElementById(this.element.id + '_tile_parent');\n    var latLong = this.pointToLatLong(x + this.mapAreaRect.x - (ele.offsetLeft - container.offsetLeft), y + this.mapAreaRect.y - (ele.offsetTop - container.offsetTop));\n    return {\n      latitude: latLong['latitude'],\n      longitude: latLong['longitude']\n    };\n  };\n  /**\n   * This method is used to convert the point to latitude and longitude in maps.\n   *\n   * @param {number} pageX - Specifies the x value for the page.\n   * @param {number} pageY - Specifies the y value for the page.\n   * @returns {Object} - Returns the object.\n   */\n\n\n  Maps.prototype.pointToLatLong = function (pageX, pageY) {\n    var padding = this.layers[this.layers.length - 1].layerType === 'GoogleStaticMap' ? 0 : 10;\n    pageY = this.zoomSettings.enable ? pageY + padding : pageY;\n    var mapSize = 256 * Math.pow(2, this.tileZoomLevel);\n    var x1 = this.clip(pageX - this.translatePoint.x * this.scale, 0, mapSize - 1) / mapSize - 0.5;\n    var y1 = 0.5 - this.clip(pageY - this.translatePoint.y * this.scale, 0, mapSize - 1) / mapSize;\n    var lat = 90 - 360 * Math.atan(Math.exp(-y1 * 2 * Math.PI)) / Math.PI;\n    var long = 360 * x1;\n    return {\n      latitude: lat,\n      longitude: long\n    };\n  };\n\n  __decorate([Property(null)], Maps.prototype, \"background\", void 0);\n\n  __decorate([Property(false)], Maps.prototype, \"useGroupingSeparator\", void 0);\n\n  __decorate([Property(null)], Maps.prototype, \"format\", void 0);\n\n  __decorate([Property(null)], Maps.prototype, \"width\", void 0);\n\n  __decorate([Property(null)], Maps.prototype, \"height\", void 0);\n\n  __decorate([Property('MouseMove')], Maps.prototype, \"tooltipDisplayMode\", void 0);\n\n  __decorate([Property(false)], Maps.prototype, \"allowPrint\", void 0);\n\n  __decorate([Property(false)], Maps.prototype, \"allowImageExport\", void 0);\n\n  __decorate([Property(false)], Maps.prototype, \"allowPdfExport\", void 0);\n\n  __decorate([Complex({}, TitleSettings)], Maps.prototype, \"titleSettings\", void 0);\n\n  __decorate([Complex({}, ZoomSettings)], Maps.prototype, \"zoomSettings\", void 0);\n\n  __decorate([Complex({}, LegendSettings)], Maps.prototype, \"legendSettings\", void 0);\n\n  __decorate([Collection([], LayerSettings)], Maps.prototype, \"layers\", void 0);\n\n  __decorate([Collection([], Annotation)], Maps.prototype, \"annotations\", void 0);\n\n  __decorate([Complex({}, Margin)], Maps.prototype, \"margin\", void 0);\n\n  __decorate([Complex({\n    color: '#DDDDDD',\n    width: 0\n  }, Border)], Maps.prototype, \"border\", void 0);\n\n  __decorate([Property('Material')], Maps.prototype, \"theme\", void 0);\n\n  __decorate([Property('Mercator')], Maps.prototype, \"projectionType\", void 0);\n\n  __decorate([Property(0)], Maps.prototype, \"baseLayerIndex\", void 0);\n\n  __decorate([Property(null)], Maps.prototype, \"description\", void 0);\n\n  __decorate([Property(1)], Maps.prototype, \"tabIndex\", void 0);\n\n  __decorate([Complex({\n    latitude: null,\n    longitude: null\n  }, CenterPosition)], Maps.prototype, \"centerPosition\", void 0);\n\n  __decorate([Complex({}, MapsAreaSettings)], Maps.prototype, \"mapsArea\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"load\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"beforePrint\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"loaded\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"click\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"doubleClick\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"rightClick\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"resize\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"tooltipRender\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"legendRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"tooltipRenderComplete\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"shapeSelected\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"itemSelection\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"itemHighlight\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"shapeHighlight\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"layerRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"shapeRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerClusterRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerClick\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerClusterClick\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerClusterMouseMove\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"markerMouseMove\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"dataLabelRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"bubbleRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"bubbleClick\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"bubbleMouseMove\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"animationComplete\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"annotationRendering\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"zoom\", void 0);\n\n  __decorate([Event()], Maps.prototype, \"pan\", void 0);\n\n  Maps = __decorate([NotifyPropertyChanges], Maps);\n  return Maps;\n}(Component);\n\nexport { Maps };","map":{"version":3,"sources":["C:/Users/vinay/Desktop/world-map-dashboard/world-map/node_modules/@syncfusion/ej2-maps/src/maps/maps.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","NotifyPropertyChanges","Property","Ajax","EventHandler","Browser","isNullOrUndefined","createElement","setValue","extend","Event","remove","L10n","Collection","Internationalization","Complex","SvgRenderer","Size","createSvg","Point","removeElement","triggerShapeEvent","showTooltip","checkShapeDataFields","getMousePosition","calculateSize","getElement","removeClass","getTranslate","triggerItemSelectionEvent","mergeSeparateCluster","customizeStyle","querySelector","createStyle","ZoomSettings","LegendSettings","LayerSettings","TitleSettings","Border","Margin","MapsAreaSettings","Annotation","CenterPosition","Marker","load","click","loaded","doubleClick","resize","shapeSelected","zoomIn","getThemeStyle","BingMap","LayerPanel","Rect","RectOption","measureText","getElementByID","MapAjax","processResult","getElementsByClassName","findPosition","textTrim","TextOption","renderTextElement","convertGeoToPoint","calculateZoomLevel","Annotations","MarkerSettings","changeBorderWidth","DataManager","Query","Maps","_super","options","element","_this","call","isTileMap","isResize","baseSize","translatePoint","baseTranslatePoint","zoomTranslatePoint","markerZoomedState","zoomPersistence","defaultState","centerPositionChanged","isTileMapSubLayer","markerNullCount","tileTranslatePoint","baseTileTranslatePoint","isDevice","staticMapZoom","zoomSettings","enable","zoomFactor","zoomNotApplied","dataLabelShape","zoomShapeCollection","zoomLabelPositions","mouseDownEvent","x","y","mouseClickEvent","selectedElementId","selectedMarkerElementId","selectedBubbleElementId","selectedNavigationElementId","selectedLegendElementId","legendSelectionCollection","shapeSelections","legendSelection","toggledLegendId","toggledShapeElementId","checkInitialRender","initialTileTranslate","initialCheck","applyZoomReset","markerClusterExpandCheck","markerClusterExpand","shapeSelectionItem","mergePersistMapsData","get","mapSelect","enumerable","configurable","data","windowData","window","localStorage","e","getItem","getModuleName","id","dataObj","JSON","parse","keys","isProtectedOnChange","_i","keys_1","getLocalizedLabel","localeObject","getConstant","preRender","initPrivateVariable","allowServerDataBinding","unWireEVents","wireEVents","setCulture","renderElements","trigger","maps","createSVG","findBaseAndSubLayers","createSecondaryElement","addTabIndex","themeStyle","theme","renderBorder","renderTitle","titleSettings","renderArea","processRequestJsonData","renderComplete","render","layersCollection","serverProcess","request","response","queryModule","localAjax","ajaxModule","dataModule","forEach","layer","layerIndex","shapeData","query","dataManager","executeQuery","then","processResponseJsonData","processAjaxRequest","dataSource","markerSettings","_loop_1","bubbleSettings","_loop_2","type","dataOptions","async","contentType","onSuccess","args","send","sendData","processType","dataType","collection","isBaseLayer","push","j","renderMap","legendModule","legendSettings","visible","renderLegend","layerCount","createTile","zoomModule","createZoomingToolbars","dataLabelModule","dataLabelCollections","mapLayerPanel","measureLayerPanel","appendChild","svgObject","position","getExtraPosition","layers","markerTemplate","document","getElementById","style","top","mapAreaRect","left","selectionSettings","initialShapeSelection","checkSelection","enableMultiSelect","shapeSelection","shapePath","shapeValue","k","initialMarkerSelection","markerSelectionValues","markerInitialSelection","latitude","longitude","svg","getBoundingClientRect","tileElement","tileElement1","tile","bottom","top_1","parseFloat","offsetLeft","titleTextSize","text","textStyle","subTitleTextSize","subtitleSettings","mode","width","height","offsetTop","legendBorderRect","arrangeTemplate","annotationsModule","renderAnnotationElements","outline","getElementsByTagName","indexOf","zoomingChange","isResized","markerSelection","map","targetElement","border","color","scale","markerSelectionProperties","opacity","fill","cancel","body","tagName","children","setAttribute","markerIndex","targetId","mapsArea","background","areaBackgroundColor","mapBorder","rect","renderer","drawRectangle","description","tabIndex","toString","layerCollectionEle","tileRect","tileSvgRect","markerTemplateElements","templateGroupEle","toolBarGroup","alignToolBar","elements","childElementCount","childNodes","childElement","split","childNode","previousScale","applyTransform","secondaryElement","styles","pointerEvents","templateElements","layerType","offSetLetValue","offSetTopValue","layerOffset","elementOffset","Math","abs","currentTemplate","elementOffset_1","transform","mainLayer","padding","urlTemplate","ele","margin","right","ele1","baseIndex","baseLayerIndex","mainLayers","subLayers","baseLayer","subLayer","subLayerIndex","borderElement","backgroundColor","borderRect","availableSize","title","bounds","groupEle","fontFamily","fontWeight","titleFontWeight","size","titleFontSize","createGroup","trimmedTitle","elementSize","location_1","alignment","titleBounds","titleFontColor","subTitleFontColor","removeSvg","removeChild","firstChild","hasChildNodes","parentNode","clearTemplate","add","mapsOnClick","mapsOnDoubleClick","touchStartEvent","mouseDownOnMap","touchMoveEvent","mouseMoveOnMap","touchEndEvent","mouseEndOnMap","mouseLeaveOnMap","keyDownHandler","keyUpHandler","addEventListener","isTouch","mapsOnResize","bind","removeEventListener","removeShapeHighlightCollection","event","code","keyboardHighlightSelection","parseInt","shapeIndex","dataIndex","selectionModule","selectionsettings","selectionType","selectElement","highlightModule","highlightSettings","classList","contains","handleHighlight","zoom","performZoomingByToolBar","preventDefault","mouseDownLatLong","mouseMoveLatLong","panning","currentPage","legendGroup","drawLegendItem","textContent","Number","focus","outlineColor","SelectedElement","targetEle","isSelect","getAttribute","latLongValue","getClickLocation","pageX","pageY","eventArgs_1","name","clientX","clientY","isShapeSelected","mouseArgs","mergeCluster","mapsTooltipModule","tooltipTargetID","markerModule","markerClusterClick","notify","shapeSelectedEventArgs","removedSelectionList","geometryType","location_2","parentElement","minLongitude","baseMapBounds","min","currentFactor","minLatitude","max","isNaN","dataObject","getGeoLocation","getTileGeoLocation","touchArg","changedTouches","pointerType","eventArgs","titleTooltip","legendTooltip","cancelable","markerClick","bubbleModule","bubbleClick","sameMarkerData","isSingleClick","doubleClickArgs","touches","markerMove","markerClusterMouseMove","bubbleMove","onMouseMove","legendText","page","legendIndex","totalPages","count","offsetWidth","offsetHeight","titleStyle","isReset","previousSize","currentSize","resizeTo","clearTimeout","setTimeout","refreshing","zoomByPosition","centerPosition","factor","calculateFactor","mapRect","svgRect","xDiff","yDiff","performZooming","tileZoomLevel","generateTiles","panByDirection","direction","mouseLocation","addLayer","refresh","removeLayer","index","splice","addMarker","markerCollection","layerEle","markerCollection_1","newMarker","markerRender","propertyName","popertyNameArray","isArray","removeShapeSelection","indexValue","shapeDataValue","propertyName_1","toLowerCase","shapeName","shapeSettings","colorValuePath","shapeDataPath","shapePropertyPath","shapeSelectionClass","shapeHighLightAndSelection","shapeToggled","selectedElementIdIndex","zoomToCoordinates","maxLatitude","maxLongitude","_a","_b","centerLatitude","centerLongtitude","isTwoCoordinates","centerLatOfGivenLocation","centerLongOfGivenLocation","minLatOfGivenLocation","minLongOfGivenLocation","maxLatOfGivenLocation","maxLongOfGivenLocation","scaleOfGivenLocation","zoomArgs","previous","current","selectedElements","legendSelectedElements","intl","setLocaleConstants","defaultLocalConstants","locale","ZoomIn","Zoom","ZoomOut","Pan","Reset","destroy","getPersistData","keyEntity","addOnPersist","onPropertyChanged","newProp","oldProp","isMarker","isStaticMapType","newLayerLength","prop","layerPropLength","collection_1","collectionProp","shouldZoomInitially","renderTileLayer","renderGoogleMap","requiredModules","modules","isVisible","findVisibleLayers","annotationEnable","annotations","annotation","content","isBubbleVisible","member","highlight","selection","minZoom","isMarkersVisible","isDataLabelVisible","isNavigationVisible","tooltip","allowPrint","allowImageExport","allowPdfExport","dataLabelSettings","navigationLineSettings","svgElement","svgClientRects","getClientRects","mapsClientRects","svgClientRect","mapsClientRect","getBubbleVisible","bubble","print","printModule","export","fileName","orientation","allowDownload","imageExportModule","Promise","resolve","reject","pdfExportModule","isLayerVisible","isBubblevisible","istooltipVisible","isSelection","isHighlight","bubbles","markers","navigationLine","layers_1","navigationLine_1","navigation","markers_1","marker","tooltipSettings","_c","bubbles_1","container","currentLayer","translate","translatePointX","translatePointY","mapSize","xx","clip","yy","lat","atan","exp","PI","long","value","minVal","maxVal","latLong","pointToLatLong","pow","x1","y1"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable radix */\n/* eslint-disable max-len */\n/* eslint-disable valid-jsdoc */\n/**\n * Maps Component file\n */\nimport { Component, NotifyPropertyChanges, Property, Ajax } from '@syncfusion/ej2-base';\nimport { EventHandler, Browser, isNullOrUndefined, createElement, setValue, extend } from '@syncfusion/ej2-base';\nimport { Event, remove, L10n, Collection, Internationalization, Complex } from '@syncfusion/ej2-base';\nimport { SvgRenderer } from '@syncfusion/ej2-svg-base';\nimport { Size, createSvg, Point, removeElement, triggerShapeEvent, showTooltip, checkShapeDataFields, getMousePosition, calculateSize } from './utils/helper';\nimport { getElement, removeClass, getTranslate, triggerItemSelectionEvent, mergeSeparateCluster, customizeStyle, querySelector } from './utils/helper';\nimport { createStyle } from './utils/helper';\nimport { ZoomSettings, LegendSettings } from './model/base';\nimport { LayerSettings, TitleSettings, Border, Margin, MapsAreaSettings, Annotation, CenterPosition } from './model/base';\nimport { Marker } from './layers/marker';\nimport { load, click, loaded, doubleClick, resize, shapeSelected, zoomIn } from './model/constants';\nimport { getThemeStyle } from './model/theme';\nimport { BingMap } from './layers/bing-map';\nimport { LayerPanel } from './layers/layer-panel';\nimport { Rect, RectOption, measureText, getElementByID, MapAjax, processResult, getElementsByClassName } from '../maps/utils/helper';\nimport { findPosition, textTrim, TextOption, renderTextElement, convertGeoToPoint, calculateZoomLevel } from '../maps/utils/helper';\nimport { Annotations } from '../maps/user-interaction/annotation';\nimport { MarkerSettings } from './index';\nimport { changeBorderWidth } from './index';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\n/**\n * Represents the Maps control.\n * ```html\n * <div id=\"maps\"/>\n * <script>\n *   var maps = new Maps();\n *   maps.appendTo(\"#maps\");\n * </script>\n * ```\n */\nvar Maps = /** @class */ (function (_super) {\n    __extends(Maps, _super);\n    /**\n     * Constructor for creating the widget\n     *\n     * @param {MapsModel} options Specifies the options\n     * @param {string | HTMLElement} element Specifies the element\n     */\n    function Maps(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /**\n         * Check layer whether is geometry or tile\n         *\n         * @private\n         */\n        _this.isTileMap = false;\n        /**\n         * Resize the map\n         */\n        _this.isResize = false;\n        /** @private */\n        _this.baseSize = new Size(0, 0);\n        /** @public */\n        _this.translatePoint = new Point(0, 0);\n        /** @private */\n        _this.baseTranslatePoint = new Point(0, 0);\n        /** @public */\n        _this.zoomTranslatePoint = new Point(0, 0);\n        /** @private */\n        _this.markerZoomedState = true;\n        /** @private */\n        _this.zoomPersistence = false;\n        /** @private */\n        _this.defaultState = true;\n        /** @private */\n        _this.centerPositionChanged = false;\n        /** @private */\n        _this.isTileMapSubLayer = false;\n        /** @private */\n        _this.markerNullCount = 0;\n        /** @private */\n        _this.tileTranslatePoint = new Point(0, 0);\n        /** @private */\n        _this.baseTileTranslatePoint = new Point(0, 0);\n        /** @private */\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        _this.isDevice = false;\n        /** @private */\n        _this.staticMapZoom = _this.zoomSettings.enable ? _this.zoomSettings.zoomFactor : 0;\n        /** @private */\n        _this.zoomNotApplied = false;\n        /** @public */\n        _this.dataLabelShape = [];\n        _this.zoomShapeCollection = [];\n        _this.zoomLabelPositions = [];\n        _this.mouseDownEvent = { x: null, y: null };\n        _this.mouseClickEvent = { x: null, y: null };\n        /** @private */\n        _this.selectedElementId = [];\n        /** @private */\n        _this.selectedMarkerElementId = [];\n        /** @private */\n        _this.selectedBubbleElementId = [];\n        /** @private */\n        _this.selectedNavigationElementId = [];\n        /** @private */\n        _this.selectedLegendElementId = [];\n        /** @private */\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        _this.legendSelectionCollection = [];\n        /** @private */\n        _this.shapeSelections = true;\n        /** @private */\n        _this.legendSelection = true;\n        /** @private */\n        _this.toggledLegendId = [];\n        /** @private */\n        _this.toggledShapeElementId = [];\n        /** @private */\n        _this.checkInitialRender = true;\n        /** @private */\n        _this.initialTileTranslate = new Point(0, 0);\n        /** @private */\n        _this.initialCheck = true;\n        /** @private */\n        _this.applyZoomReset = false;\n        /** @private */\n        _this.markerClusterExpandCheck = false;\n        /** @private */\n        _this.markerClusterExpand = false;\n        /** @private */\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        _this.shapeSelectionItem = [];\n        setValue('mergePersistData', _this.mergePersistMapsData, _this);\n        return _this;\n    }\n    Object.defineProperty(Maps.prototype, \"isShapeSelected\", {\n        /**\n         *\n         * Specifies whether the shape is selected in the maps or not.\n         *\n         * @returns {boolean} - Returns the boolean value.\n         */\n        get: function () {\n            return this.mapSelect;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * To manage persist maps data\n     *\n     * @returns {void}\n     */\n    Maps.prototype.mergePersistMapsData = function () {\n        var data;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var windowData;\n        try {\n            windowData = window.localStorage;\n        }\n        catch (e) {\n            windowData = null;\n        }\n        if (!isNullOrUndefined(windowData)) {\n            data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n        }\n        if (!(isNullOrUndefined(data) || (data === ''))) {\n            var dataObj = JSON.parse(data);\n            var keys = Object.keys(dataObj);\n            this.isProtectedOnChange = true;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                if ((typeof this[key] === 'object') && !isNullOrUndefined(this[key])) {\n                    extend(this[key], dataObj[key]);\n                }\n                else {\n                    this[key] = dataObj[key];\n                }\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     *\n     * @param  {string} key - Specifies the key\n     * @returns {string} - Returns the string value\n     */\n    Maps.prototype.getLocalizedLabel = function (key) {\n        return this.localeObject.getConstant(key);\n    };\n    /**\n     * Initializing pre-required values.\n     *\n     * @returns {void}\n     */\n    Maps.prototype.preRender = function () {\n        this.isDevice = Browser.isDevice;\n        this.initPrivateVariable();\n        this.allowServerDataBinding = false;\n        this.unWireEVents();\n        this.wireEVents();\n        this.setCulture();\n    };\n    Maps.prototype.renderElements = function () {\n        this.trigger(load, { maps: this });\n        this.createSVG();\n        this.findBaseAndSubLayers();\n        this.createSecondaryElement();\n        this.addTabIndex();\n        this.themeStyle = getThemeStyle(this.theme);\n        this.renderBorder();\n        this.renderTitle(this.titleSettings, 'title', null, null);\n        this.renderArea();\n        this.processRequestJsonData();\n        this.renderComplete();\n    };\n    /**\n     * To Initialize the control rendering.\n     *\n     * @returns {void}\n     */\n    Maps.prototype.render = function () {\n        this.renderElements();\n    };\n    Maps.prototype.processRequestJsonData = function () {\n        var _this = this;\n        var length = this.layersCollection.length - 1;\n        this.serverProcess = { request: 0, response: 0 };\n        var queryModule;\n        var localAjax;\n        var ajaxModule;\n        var dataModule;\n        Array.prototype.forEach.call(this.layersCollection, function (layer, layerIndex) {\n            if (layer.shapeData instanceof DataManager) {\n                _this.serverProcess['request']++;\n                dataModule = layer.shapeData;\n                queryModule = layer.query instanceof Query ? layer.query : new Query();\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var dataManager = dataModule.executeQuery(queryModule);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                dataManager.then(function (e) {\n                    _this.processResponseJsonData('DataManager', e, layer, 'ShapeData');\n                });\n            }\n            else if (layer.shapeData instanceof MapAjax || layer.shapeData) {\n                if (!isNullOrUndefined(layer.shapeData['dataOptions'])) {\n                    _this.processAjaxRequest(layer, layer.shapeData, 'ShapeData');\n                }\n            }\n            if (layer.dataSource instanceof DataManager) {\n                _this.serverProcess['request']++;\n                dataModule = layer.dataSource;\n                queryModule = layer.query instanceof Query ? layer.query : new Query();\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var dataManager = dataModule.executeQuery(queryModule);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                dataManager.then(function (e) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    layer.dataSource = processResult(e);\n                });\n            }\n            if (layer.markerSettings.length > 0) {\n                var _loop_1 = function (i) {\n                    if (layer.markerSettings[i].dataSource instanceof DataManager) {\n                        _this.serverProcess['request']++;\n                        dataModule = layer.markerSettings[i].dataSource;\n                        queryModule = layer.markerSettings[i].query instanceof Query ? layer.markerSettings[i].query : new Query();\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var dataManager = dataModule.executeQuery(queryModule);\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        dataManager.then(function (e) {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            layer.markerSettings[i].dataSource = processResult(e);\n                        });\n                    }\n                };\n                for (var i = 0; i < layer.markerSettings.length; i++) {\n                    _loop_1(i);\n                }\n            }\n            if (layer.bubbleSettings.length > 0) {\n                var _loop_2 = function (i) {\n                    if (layer.bubbleSettings[i].dataSource instanceof DataManager) {\n                        _this.serverProcess['request']++;\n                        dataModule = layer.bubbleSettings[i].dataSource;\n                        queryModule = layer.bubbleSettings[i].query instanceof Query ? layer.bubbleSettings[i].query : new Query();\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var dataManager = dataModule.executeQuery(queryModule);\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        dataManager.then(function (e) {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            layer.bubbleSettings[i].dataSource = processResult(e);\n                        });\n                    }\n                };\n                for (var i = 0; i < layer.bubbleSettings.length; i++) {\n                    _loop_2(i);\n                }\n            }\n            if (layer.dataSource instanceof MapAjax || !isNullOrUndefined(layer.dataSource['dataOptions'])) {\n                _this.processAjaxRequest(layer, layer.dataSource, 'DataSource');\n            }\n            if (_this.serverProcess['request'] === _this.serverProcess['response'] && length === layerIndex) {\n                _this.processResponseJsonData(null);\n            }\n        });\n    };\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    Maps.prototype.processAjaxRequest = function (layer, localAjax, type) {\n        var _this = this;\n        this.serverProcess['request']++;\n        var ajaxModule = new Ajax(localAjax.dataOptions, localAjax.type, localAjax.async, localAjax.contentType);\n        ajaxModule.onSuccess = function (args) {\n            _this.processResponseJsonData('Ajax', args, layer, type);\n        };\n        ajaxModule.send(localAjax.sendData);\n    };\n    /**\n     * This method is used to process the JSON data to render the maps.\n     *\n     * @param {string} processType - Specifies the process type in maps.\n     * @param {any | string} data - Specifies the data for maps.\n     * @param {LayerSettings} layer - Specifies the layer for the maps.\n     * @param {string} dataType - Specifies the data type for maps.\n     * @returns {void}\n     */\n    Maps.prototype.processResponseJsonData = function (processType, data, layer, dataType) {\n        this.serverProcess['response']++;\n        if (processType) {\n            if (dataType === 'ShapeData') {\n                layer.shapeData = (processType === 'DataManager') ? processResult(data) : JSON.parse(data);\n            }\n            else {\n                layer.dataSource = (processType === 'DataManager') ? processResult(data) : JSON.parse('[' + data + ']')[0];\n            }\n        }\n        if (!isNullOrUndefined(processType) && this.serverProcess['request'] === this.serverProcess['response']) {\n            var collection = this.layersCollection;\n            this.layersCollection = [];\n            for (var i = 0; i < collection.length; i++) {\n                if (collection[i].isBaseLayer) {\n                    this.layersCollection.push(collection[i]);\n                }\n            }\n            for (var j = 0; j < collection.length; j++) {\n                if (!collection[j].isBaseLayer) {\n                    this.layersCollection.push(collection[j]);\n                }\n            }\n            this.renderMap();\n        }\n        else if (isNullOrUndefined(processType)) {\n            this.renderMap();\n        }\n    };\n    Maps.prototype.renderMap = function () {\n        if (this.legendModule && this.legendSettings.visible) {\n            if (!this.isTileMap) {\n                this.legendModule.renderLegend();\n            }\n            else {\n                var layerCount = this.layersCollection.length - 1;\n                if (!this.layersCollection[layerCount].isBaseLayer) {\n                    this.isTileMapSubLayer = true;\n                    this.legendModule.renderLegend();\n                }\n            }\n        }\n        this.createTile();\n        if (this.zoomSettings.enable && this.zoomModule) {\n            this.zoomModule.createZoomingToolbars();\n        }\n        if (!isNullOrUndefined(this.dataLabelModule)) {\n            this.dataLabelModule.dataLabelCollections = [];\n            this.dataLabelShape = [];\n        }\n        this.mapLayerPanel.measureLayerPanel();\n        this.element.appendChild(this.svgObject);\n        var position = this.getExtraPosition();\n        for (var i = 0; i < this.layers.length; i++) {\n            if (position.x !== 0 || position.y !== 0) {\n                var markerTemplate = document.getElementById(this.element.id + '_LayerIndex_' + i + '_Markers_Template_Group');\n                if (!isNullOrUndefined(markerTemplate)) {\n                    markerTemplate.style.top = this.mapAreaRect.y + position.y + 'px';\n                    markerTemplate.style.left = this.mapAreaRect.x + position.x + 'px';\n                }\n            }\n            if (this.layers[i].selectionSettings && this.layers[i].selectionSettings.enable &&\n                this.layers[i].initialShapeSelection.length > 0 && this.checkInitialRender) {\n                var checkSelection = this.layers[i].selectionSettings.enableMultiSelect;\n                this.layers[i].selectionSettings.enableMultiSelect = checkSelection ? checkSelection : true;\n                var shapeSelection = this.layers[i].initialShapeSelection;\n                for (var j = 0; j < this.layers[i].initialShapeSelection.length; j++) {\n                    this.shapeSelection(i, shapeSelection[j].shapePath, shapeSelection[j].shapeValue, true);\n                }\n                this.layers[i].selectionSettings.enableMultiSelect = checkSelection;\n                if (i === this.layers.length - 1) {\n                    this.checkInitialRender = false;\n                }\n            }\n            for (var k = 0; k < this.layers[i].markerSettings.length; k++) {\n                if (this.layers[i].markerSettings[k].selectionSettings && this.layers[i].markerSettings[k].selectionSettings.enable\n                    && this.layers[i].markerSettings[k].initialMarkerSelection.length > 0) {\n                    var markerSelectionValues = this.layers[i].markerSettings[k].initialMarkerSelection;\n                    for (var j = 0; j < markerSelectionValues.length; j++) {\n                        this.markerInitialSelection(i, k, this.layers[i].markerSettings[k], markerSelectionValues[j].latitude, markerSelectionValues[j].longitude);\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(document.getElementById(this.element.id + '_tile_parent'))) {\n            var svg = this.svgObject.getBoundingClientRect();\n            var element = document.getElementById(this.element.id);\n            var tileElement = document.getElementById(this.element.id + '_tile_parent');\n            var tileElement1 = document.getElementById(this.element.id + '_tiles');\n            var tile = tileElement.getBoundingClientRect();\n            var bottom = void 0;\n            var top_1;\n            var left = void 0;\n            left = parseFloat(tileElement.style.left) + element.offsetLeft;\n            var titleTextSize = measureText(this.titleSettings.text, this.titleSettings.textStyle);\n            var subTitleTextSize = measureText(this.titleSettings.subtitleSettings.text, this.titleSettings.subtitleSettings.textStyle);\n            if (this.isTileMap && this.isTileMapSubLayer && this.legendSettings.position === 'Bottom' && this.legendSettings.visible) {\n                if (this.legendSettings.mode !== 'Default') {\n                    if (titleTextSize.width !== 0 && titleTextSize.height !== 0) {\n                        top_1 = parseFloat(tileElement.style.top) + element.offsetTop + (subTitleTextSize.height / 2)\n                            - (this.legendModule.legendBorderRect.height / 2);\n                    }\n                    else {\n                        top_1 = parseFloat(tileElement.style.top) + element.offsetTop - this.mapAreaRect.y;\n                    }\n                }\n                else {\n                    left = this.legendModule.legendBorderRect.x;\n                    if (titleTextSize.width !== 0 && titleTextSize.height !== 0) {\n                        top_1 = parseFloat(tileElement.style.top) + element.offsetTop + (subTitleTextSize['height'] / 2)\n                            - this.legendModule.legendBorderRect.y;\n                    }\n                    else {\n                        top_1 = parseFloat(tileElement.style.top) + element.offsetTop + (subTitleTextSize['height'] / 2);\n                    }\n                }\n            }\n            else {\n                bottom = svg.bottom - tile.bottom - element.offsetTop;\n                top_1 = parseFloat(tileElement.style.top) + element.offsetTop;\n            }\n            top_1 = (bottom <= 11) ? top_1 : (top_1 * 2);\n            left = (bottom <= 11) ? left : (left * 2);\n            tileElement.style.top = top_1 + 'px';\n            tileElement.style.left = left + 'px';\n            tileElement1.style.top = top_1 + 'px';\n            tileElement1.style.left = left + 'px';\n        }\n        this.arrangeTemplate();\n        if (this.annotationsModule) {\n            if (this.width !== '0px' && this.height !== '0px' && this.width !== '0%' && this.height !== '0%') {\n                this.annotationsModule.renderAnnotationElements();\n            }\n        }\n        this.element.style.outline = 'none';\n        for (var i = 0; i < document.getElementsByTagName('path').length - 1; i++) {\n            if (document.getElementsByTagName('path')[i].id.indexOf('shapeIndex') > -1) {\n                document.getElementsByTagName('path')[i].style.outline = 'none';\n            }\n        }\n        this.zoomingChange();\n        this.trigger(loaded, { maps: this, isResized: this.isResize });\n        this.isResize = false;\n    };\n    /**\n     * To apply color to the initial selected marker\n     *\n     * @param {SelectionSettingsModel} selectionSettings - Specifies the selection settings\n     * @param {Maps} map - Specifies the instance of the maps\n     * @param {Element} targetElement - Specifies the target element\n     * @param {any} data - Specifies the data\n     * @returns {void}\n     * @private\n     */\n    Maps.prototype.markerSelection = function (selectionSettings, map, targetElement, data) {\n        var border = {\n            color: selectionSettings.border.color,\n            width: selectionSettings.border.width / map.scale\n        };\n        var markerSelectionProperties = {\n            opacity: selectionSettings.opacity,\n            fill: selectionSettings.fill,\n            border: border,\n            target: targetElement.id,\n            cancel: false,\n            data: data,\n            maps: map\n        };\n        if (!getElement('MarkerselectionMap')) {\n            document.body.appendChild(createStyle('MarkerselectionMap', 'MarkerselectionMapStyle', markerSelectionProperties));\n        }\n        else {\n            customizeStyle('MarkerselectionMap', 'MarkerselectionMapStyle', markerSelectionProperties);\n        }\n        if (this.selectedMarkerElementId.length === 0 || selectionSettings.enableMultiSelect) {\n            if (targetElement.tagName === 'g') {\n                targetElement.children[0].setAttribute('class', 'MarkerselectionMapStyle');\n            }\n            else {\n                targetElement.setAttribute('class', 'MarkerselectionMapStyle');\n            }\n        }\n    };\n    /**\n     * initial selection of marker\n     *\n     * @param {number} layerIndex - Specifies the layer index\n     * @param {number} markerIndex - Specifies the marker index\n     * @param {MarkerSettingsModel} markerSettings - Specifies the marker settings\n     * @param {number} latitude - Specifies hte latitude\n     * @param {number} longitude - Specifies the longitude\n     * @returns {void}\n     * @private\n     */\n    Maps.prototype.markerInitialSelection = function (layerIndex, markerIndex, markerSettings, latitude, longitude) {\n        var selectionSettings = markerSettings.selectionSettings;\n        if (selectionSettings.enable) {\n            for (var i = 0; i < markerSettings.dataSource['length']; i++) {\n                var data = markerSettings.dataSource[i];\n                if (data['latitude'] === latitude && data['longitude'] === longitude) {\n                    var targetId = this.element.id + '_' + 'LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex +\n                        '_dataIndex_' + i;\n                    this.markerSelection(selectionSettings, this, getElement(targetId), data);\n                }\n            }\n        }\n    };\n    /**\n     * Render the map area border\n     *\n     * @returns {void}\n     */\n    Maps.prototype.renderArea = function () {\n        var width = this.mapsArea.border.width;\n        var background = this.mapsArea.background;\n        if (width > 0 || (background || this.themeStyle.areaBackgroundColor)) {\n            var mapBorder = {\n                opacity: isNullOrUndefined(this.mapsArea.border.opacity) ? 1 : this.mapsArea.border.opacity,\n                color: this.mapsArea.border.color, width: this.mapsArea.border.width\n            };\n            var rect = new RectOption(this.element.id + '_MapAreaBorder', background || this.themeStyle.areaBackgroundColor, mapBorder, 1, this.mapAreaRect);\n            this.svgObject.appendChild(this.renderer.drawRectangle(rect));\n        }\n    };\n    /**\n     * To add tab index for map element\n     *\n     * @returns {void}\n     */\n    Maps.prototype.addTabIndex = function () {\n        this.element.setAttribute('aria-label', this.description || 'Maps Element');\n        this.element.setAttribute('tabindex', this.tabIndex.toString());\n    };\n    // private setSecondaryElementPosition(): void {\n    //     if (!this.isTileMap) {\n    //         let element: HTMLDivElement = getElementByID(this.element.id + '_Secondary_Element') as HTMLDivElement;\n    //         let rect: ClientRect = this.element.getBoundingClientRect();\n    //         let svgRect: ClientRect = getElementByID(this.element.id + '_svg').getBoundingClientRect();\n    //         element.style.marginLeft = Math.max(svgRect.left - rect.left, 0) + 'px';\n    //         element.style.marginTop = Math.max(svgRect.top - rect.top, 0) + 'px';\n    //     }\n    // }\n    Maps.prototype.zoomingChange = function () {\n        var left;\n        var top;\n        if (getElementByID(this.element.id + '_Layer_Collections') && this.zoomModule) {\n            this.zoomModule.layerCollectionEle = getElementByID(this.element.id + '_Layer_Collections');\n        }\n        if (this.isTileMap && getElementByID(this.element.id + '_Tile_SVG') && getElementByID(this.element.id + '_tile_parent')) {\n            var tileRect = getElementByID(this.element.id + '_tile_parent').getBoundingClientRect();\n            var tileSvgRect = getElementByID(this.element.id + '_Tile_SVG').getBoundingClientRect();\n            left = (tileRect.left - tileSvgRect.left);\n            top = (tileRect.top - tileSvgRect.top);\n            getElementByID(this.element.id + '_Tile_SVG_Parent').style.left = left + 'px';\n            getElementByID(this.element.id + '_Tile_SVG_Parent').style.top = top + 'px';\n            var markerTemplateElements = document.getElementsByClassName('template');\n            if (!isNullOrUndefined(markerTemplateElements) && markerTemplateElements.length > 0) {\n                for (var i = 0; i < markerTemplateElements.length; i++) {\n                    var templateGroupEle = markerTemplateElements[i];\n                    templateGroupEle.style.left = left + 'px';\n                    templateGroupEle.style.top = top + 'px';\n                }\n            }\n        }\n        if (this.zoomSettings.zoomFactor >= 0) {\n            if (this.zoomModule && this.zoomModule.toolBarGroup && this.zoomSettings.enable) {\n                this.zoomModule.alignToolBar();\n            }\n            var elements = document.getElementById(this.element.id + '_Layer_Collections');\n            if (!isNullOrUndefined(elements) && elements.childElementCount > 0) {\n                for (var i = 0; i < elements.childNodes.length; i++) {\n                    var childElement = elements.childNodes[i];\n                    if (childElement.tagName === 'g') {\n                        var layerIndex = parseFloat(childElement.id.split('_LayerIndex_')[1].split('_')[0]);\n                        for (var j = 0; j < childElement.childNodes.length; j++) {\n                            var childNode = childElement.childNodes[j];\n                            if (!(childNode.id.indexOf('_Markers_Group') > -1) &&\n                                (!(childNode.id.indexOf('_bubble_Group') > -1)) &&\n                                (!(childNode.id.indexOf('_dataLableIndex_Group') > -1))) {\n                                changeBorderWidth(childNode, layerIndex, this.scale, this);\n                            }\n                        }\n                    }\n                }\n            }\n            if (this.zoomModule && (this.previousScale !== this.scale)) {\n                this.zoomModule.applyTransform(true);\n            }\n        }\n    };\n    Maps.prototype.createSecondaryElement = function () {\n        if (isNullOrUndefined(document.getElementById(this.element.id + '_Secondary_Element'))) {\n            var secondaryElement = createElement('div', {\n                id: this.element.id + '_Secondary_Element',\n                styles: 'position: absolute;z-index:2;'\n            });\n            this.element.appendChild(secondaryElement);\n        }\n    };\n    /**\n     * @returns {void}\n     * @private\n     */\n    Maps.prototype.arrangeTemplate = function () {\n        if (document.getElementById(this.element.id + '_Legend_Border')) {\n            document.getElementById(this.element.id + '_Legend_Border').style.pointerEvents = 'none';\n        }\n        var templateElements = document.getElementsByClassName(this.element.id + '_template');\n        if (!isNullOrUndefined(templateElements) && templateElements.length > 0 &&\n            getElementByID(this.element.id + '_Layer_Collections') && this.layers[this.layers.length - 1].layerType !== 'OSM') {\n            for (var i = 0; i < templateElements.length; i++) {\n                var offSetLetValue = 0;\n                var offSetTopValue = 0;\n                var templateGroupEle = templateElements[i];\n                if (!isNullOrUndefined(templateGroupEle) && templateGroupEle.childElementCount > 0) {\n                    var layerOffset = getElementByID(this.element.id + '_Layer_Collections').getBoundingClientRect();\n                    var elementOffset = getElementByID(templateGroupEle.id).getBoundingClientRect();\n                    if (templateGroupEle.id.indexOf('Marker') === -1) {\n                        offSetLetValue = this.isTileMap ? 0 : (layerOffset.left < elementOffset.left) ?\n                            -(Math.abs(elementOffset.left - layerOffset.left)) : (Math.abs(elementOffset.left - layerOffset.left));\n                        offSetTopValue = this.isTileMap ? 0 : (layerOffset.top < elementOffset.top) ?\n                            -(Math.abs(elementOffset.top - layerOffset.top)) : Math.abs(elementOffset.top - layerOffset.top);\n                    }\n                    for (var j = 0; j < templateGroupEle.childElementCount; j++) {\n                        var currentTemplate = templateGroupEle.childNodes[j];\n                        if (currentTemplate.id.indexOf('Marker') !== -1) {\n                            var elementOffset_1 = getElementByID(currentTemplate.id).getBoundingClientRect();\n                            currentTemplate.style.left = parseFloat(currentTemplate.style.left) - (this.isTileMap ? 0 : elementOffset_1.width / 2) + 'px';\n                            currentTemplate.style.top = parseFloat(currentTemplate.style.top) - (this.isTileMap ? 0 : elementOffset_1.height / 2) + 'px';\n                        }\n                        else {\n                            currentTemplate.style.left = parseFloat(currentTemplate.style.left) + offSetLetValue + 'px';\n                            currentTemplate.style.top = parseFloat(currentTemplate.style.top) + offSetTopValue + 'px';\n                            currentTemplate.style.transform = 'translate(-50%, -50%)';\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Maps.prototype.createTile = function () {\n        var mainLayer = this.layersCollection[0];\n        var padding = 0;\n        if (mainLayer.isBaseLayer && (mainLayer.layerType === 'OSM' || mainLayer.layerType === 'Bing' ||\n            mainLayer.layerType === 'GoogleStaticMap' || mainLayer.layerType === 'Google')) {\n            if (mainLayer.layerType === 'Google') {\n                mainLayer.urlTemplate = 'https://mt1.google.com/vt/lyrs=m@129&hl=en&x=tileX&y=tileY&z=level';\n            }\n            removeElement(this.element.id + '_tile_parent');\n            removeElement(this.element.id + '_tiles');\n            removeElement('animated_tiles');\n            var ele = createElement('div', {\n                id: this.element.id + '_tile_parent', styles: 'position: absolute; left: ' +\n                    (this.mapAreaRect.x) + 'px; right: ' + (this.margin.right) + 'px; top: '\n                    + (this.mapAreaRect.y + padding) + 'px; height: ' +\n                    (this.mapAreaRect.height) + 'px; width: '\n                    + (this.mapAreaRect.width) + 'px; overflow: hidden;'\n            });\n            var ele1 = createElement('div', {\n                id: this.element.id + '_tiles', styles: 'position: absolute; left: ' +\n                    (this.mapAreaRect.x) + 'px;  right: ' + (this.margin.right) + 'px; top: '\n                    + (this.mapAreaRect.y + padding) + 'px; height: ' + (this.mapAreaRect.height) + 'px; width: '\n                    + (this.mapAreaRect.width) + 'px; overflow: hidden;'\n            });\n            this.element.appendChild(ele);\n            this.element.appendChild(ele1);\n        }\n    };\n    /**\n     * To initilize the private varibales of maps.\n     *\n     * @returns {void}\n     */\n    Maps.prototype.initPrivateVariable = function () {\n        if (this.element.id === '') {\n            var collection = document.getElementsByClassName('e-maps').length;\n            this.element.id = 'maps_control_' + collection;\n        }\n        this.renderer = new SvgRenderer(this.element.id);\n        this.mapLayerPanel = new LayerPanel(this);\n    };\n    Maps.prototype.findBaseAndSubLayers = function () {\n        var _this = this;\n        var baseIndex = this.baseLayerIndex;\n        var mainLayers = [];\n        var subLayers = [];\n        this.layersCollection = [];\n        Array.prototype.forEach.call(this.layers, function (layer) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n            (layer.type === 'Layer') ? mainLayers.push(layer) : subLayers.push(layer);\n        });\n        for (var i = 0; i < mainLayers.length; i++) {\n            var baseLayer = mainLayers[i];\n            if (baseLayer.visible && baseIndex === i) {\n                baseLayer.isBaseLayer = true;\n                this.isTileMap = (baseLayer.layerType === 'Geometry') ? false : true;\n                this.layersCollection.push(baseLayer);\n                break;\n            }\n            else if (i === mainLayers.length - 1) {\n                this.layersCollection.push(mainLayers[0]);\n                break;\n            }\n        }\n        subLayers.map(function (subLayer, subLayerIndex) {\n            if (subLayer.visible) {\n                _this.layersCollection.push(subLayer);\n            }\n        });\n    };\n    /**\n     * Render the map border\n     *\n     * @private\n     * @returns {void}\n     */\n    Maps.prototype.renderBorder = function () {\n        var width = this.border.width;\n        var borderElement = this.svgObject.querySelector('#' + this.element.id + '_MapBorder');\n        if ((width > 0 || (this.background || this.themeStyle.backgroundColor)) && isNullOrUndefined(borderElement)) {\n            var border = {\n                opacity: isNullOrUndefined(this.border.opacity) ? 1 : this.border.opacity,\n                color: this.border.color, width: this.border.width\n            };\n            var borderRect = new RectOption(this.element.id + '_MapBorder', this.background || this.themeStyle.backgroundColor, border, 1, new Rect(width / 2, width / 2, this.availableSize.width - width, this.availableSize.height - width));\n            this.svgObject.appendChild(this.renderer.drawRectangle(borderRect));\n        }\n        else {\n            borderElement.setAttribute('fill', this.background || this.themeStyle.backgroundColor);\n        }\n    };\n    /**\n     * Render the title and subtitle\n     *\n     * @param {TitleSettingsModel} title - Specifies the title\n     * @param {string} type - Specifies the type\n     * @param {Rect} bounds - Specifies the bounds\n     * @param {Element} groupEle - Specifies the group element\n     * @returns {void}\n     * @private\n     */\n    Maps.prototype.renderTitle = function (title, type, bounds, groupEle) {\n        var style = title.textStyle;\n        var height;\n        var width = Math.abs((this.margin.left + this.margin.right) - this.availableSize.width);\n        style.fontFamily = this.themeStyle.fontFamily || style.fontFamily;\n        style.fontWeight = style.fontWeight || this.themeStyle.titleFontWeight;\n        style.size = this.themeStyle.titleFontSize || style.size;\n        if (title.text) {\n            if (isNullOrUndefined(groupEle)) {\n                groupEle = this.renderer.createGroup({ id: this.element.id + '_Title_Group' });\n            }\n            var trimmedTitle = textTrim(width, title.text, style);\n            var elementSize = measureText(trimmedTitle, style);\n            var rect = (isNullOrUndefined(bounds)) ? new Rect(this.margin.left, this.margin.top, this.availableSize.width, this.availableSize.height) : bounds;\n            var location_1 = findPosition(rect, title.alignment, elementSize, type);\n            var options = new TextOption(this.element.id + '_Map_' + type, location_1.x, location_1.y, 'start', trimmedTitle);\n            var titleBounds = new Rect(location_1.x, location_1.y, elementSize.width, elementSize.height);\n            var element = renderTextElement(options, style, style.color || (type === 'title' ? this.themeStyle.titleFontColor : this.themeStyle.subTitleFontColor), groupEle);\n            element.setAttribute('aria-label', this.description || title.text);\n            if ((type === 'title' && !title.subtitleSettings.text) || (type === 'subtitle')) {\n                height = Math.abs((titleBounds.y + this.margin.bottom) - this.availableSize.height);\n                this.mapAreaRect = new Rect(this.margin.left, titleBounds.y + 10, width, height - 10);\n            }\n            if (type !== 'subtitle' && title.subtitleSettings.text) {\n                this.renderTitle(title.subtitleSettings, 'subtitle', titleBounds, groupEle);\n            }\n            else {\n                this.svgObject.appendChild(groupEle);\n            }\n        }\n        else {\n            height = Math.abs((this.margin.top + this.margin.bottom) - this.availableSize.height);\n            this.mapAreaRect = new Rect(this.margin.left, this.margin.top, width, height);\n        }\n    };\n    /**\n     * To create svg element for maps\n     *\n     * @returns {void}\n     */\n    Maps.prototype.createSVG = function () {\n        this.removeSvg();\n        createSvg(this);\n    };\n    /**\n     * To Remove the SVG\n     *\n     * @returns {void}\n     */\n    Maps.prototype.removeSvg = function () {\n        removeElement(this.element.id + '_Secondary_Element');\n        removeElement(this.element.id + '_tile_parent');\n        removeElement(this.element.id + '_tiles');\n        if (this.svgObject) {\n            while (this.svgObject.childNodes.length > 0) {\n                this.svgObject.removeChild(this.svgObject.firstChild);\n            }\n            if (!this.svgObject.hasChildNodes() && this.svgObject.parentNode) {\n                remove(this.svgObject);\n            }\n        }\n        this.clearTemplate();\n    };\n    /**\n     * To bind event handlers for maps.\n     *\n     * @returns {void}\n     */\n    Maps.prototype.wireEVents = function () {\n        //let cancelEvent: string = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n        EventHandler.add(this.element, 'click', this.mapsOnClick, this);\n        // EventHandler.add(this.element, 'contextmenu', this.mapsOnRightClick, this);\n        EventHandler.add(this.element, 'dblclick', this.mapsOnDoubleClick, this);\n        EventHandler.add(this.element, Browser.touchStartEvent, this.mouseDownOnMap, this);\n        EventHandler.add(this.element, Browser.touchMoveEvent, this.mouseMoveOnMap, this);\n        EventHandler.add(this.element, Browser.touchEndEvent, this.mouseEndOnMap, this);\n        EventHandler.add(this.element, 'pointerleave mouseleave', this.mouseLeaveOnMap, this);\n        EventHandler.add(this.element, 'keydown', this.keyDownHandler, this);\n        EventHandler.add(this.element, 'keyup', this.keyUpHandler, this);\n        //  EventHandler.add(this.element, cancelEvent, this.mouseLeaveOnMap, this);\n        window.addEventListener((Browser.isTouch && ('orientation' in window && 'onorientationchange' in window)) ? 'orientationchange' : 'resize', this.mapsOnResize.bind(this));\n    };\n    /**\n     * To unbind event handlers from maps.\n     *\n     * @returns {void}\n     */\n    Maps.prototype.unWireEVents = function () {\n        //let cancelEvent: string = Browser.isPointer ? 'pointerleave' : 'mouseleave';\n        EventHandler.remove(this.element, 'click', this.mapsOnClick);\n        // EventHandler.remove(this.element, 'contextmenu', this.mapsOnRightClick);\n        EventHandler.remove(this.element, 'dblclick', this.mapsOnDoubleClick);\n        EventHandler.remove(this.element, Browser.touchStartEvent, this.mouseDownOnMap);\n        EventHandler.remove(this.element, Browser.touchMoveEvent, this.mouseMoveOnMap);\n        EventHandler.remove(this.element, Browser.touchEndEvent, this.mouseEndOnMap);\n        EventHandler.remove(this.element, 'pointerleave mouseleave', this.mouseLeaveOnMap);\n        EventHandler.remove(this.element, 'keydown', this.keyDownHandler);\n        EventHandler.remove(this.element, 'keyup', this.keyUpHandler);\n        //EventHandler.remove(this.element, cancelEvent, this.mouseLeaveOnMap);\n        window.removeEventListener((Browser.isTouch && ('orientation' in window && 'onorientationchange' in window)) ? 'orientationchange' : 'resize', this.mapsOnResize);\n    };\n    /**\n     * This method is used to perform operations when mouse pointer leave from maps.\n     *\n     * @param {PointerEvent} e - Specifies the pointer event on maps.\n     * @returns {void}\n     */\n    Maps.prototype.mouseLeaveOnMap = function (e) {\n        if (document.getElementsByClassName('highlightMapStyle').length > 0 && this.legendModule) {\n            this.legendModule.removeShapeHighlightCollection();\n            removeClass(document.getElementsByClassName('highlightMapStyle')[0]);\n        }\n    };\n    Maps.prototype.keyUpHandler = function (event) {\n        var id = event.target['id'];\n        if (event.code === 'Tab' && id.indexOf('_LayerIndex_') > -1 && id.indexOf('shapeIndex') > -1) {\n            this.keyboardHighlightSelection(id, event.type);\n        }\n        else if (id.indexOf('_LayerIndex_') === -1 && id.indexOf('shapeIndex') === -1 &&\n            getElementsByClassName('highlightMapStyle').length > 0) {\n            removeClass(getElementsByClassName('highlightMapStyle')[0]);\n            if (this.legendSettings.visible && this.legendModule) {\n                this.legendModule.removeShapeHighlightCollection();\n            }\n        }\n    };\n    Maps.prototype.keyboardHighlightSelection = function (id, key) {\n        var layerIndex = parseInt(id.split('_LayerIndex_')[1].split('_')[0], 10);\n        var shapeIndex = parseInt(id.split('_shapeIndex_')[1].split('_')[0], 10);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var shapeData = this.layers[layerIndex].shapeData['features']['length'] > shapeIndex ?\n            this.layers[layerIndex].shapeData['features'][shapeIndex]['properties'] : null;\n        var dataIndex = parseInt(id.split('_dataIndex_')[1].split('_')[0], 10);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data = isNullOrUndefined(dataIndex) ? null : this.layers[layerIndex].dataSource[dataIndex];\n        if (this.layers[layerIndex].selectionSettings.enable && key === 'keydown' && this.selectionModule) {\n            this.selectionModule.selectionsettings = this.layers[layerIndex].selectionSettings;\n            this.selectionModule.selectionType = 'Shape';\n            this.selectionModule.selectElement(event.target, layerIndex, data, shapeData);\n        }\n        else if (this.highlightModule && (this.layers[layerIndex].highlightSettings.enable && key === 'keyup' &&\n            !event.target.classList.contains('ShapeselectionMapStyle'))) {\n            this.highlightModule.highlightSettings = this.layers[layerIndex].highlightSettings;\n            this.highlightModule.handleHighlight(event.target, layerIndex, data, shapeData);\n        }\n    };\n    Maps.prototype.keyDownHandler = function (event) {\n        var zoom = this.zoomModule;\n        if ((event.key === '+' || event.code === 'Equal') && zoom) {\n            zoom.performZoomingByToolBar('zoomin');\n        }\n        else if ((event.key === '-' || event.code === 'Minus') && zoom) {\n            zoom.performZoomingByToolBar('zoomout');\n        }\n        else if (event['keyCode'] === 82 && zoom) {\n            zoom.performZoomingByToolBar('reset');\n        }\n        else if ((event.code === 'ArrowUp' || event.code === 'ArrowDown') && zoom) {\n            event.preventDefault();\n            zoom.mouseDownLatLong['x'] = 0;\n            zoom.mouseMoveLatLong['y'] = this.mapAreaRect.height / 7;\n            zoom.panning('None', zoom.mouseDownLatLong['x'], event.code === 'ArrowUp' ? -(zoom.mouseMoveLatLong['y']) :\n                zoom.mouseMoveLatLong['y'], event);\n            zoom.mouseDownLatLong['y'] = zoom.mouseMoveLatLong['y'];\n        }\n        else if ((event.code === 'ArrowLeft' || event.code === 'ArrowRight') && zoom) {\n            event.preventDefault();\n            zoom.mouseDownLatLong['y'] = 0;\n            zoom.mouseMoveLatLong['x'] = this.mapAreaRect.width / 7;\n            zoom.panning('None', event.code === 'ArrowLeft' ? -(zoom.mouseMoveLatLong['x']) : zoom.mouseMoveLatLong['x'], zoom.mouseDownLatLong['y'], event);\n            zoom.mouseDownLatLong['x'] = zoom.mouseMoveLatLong['x'];\n        }\n        else if (event.code === 'Enter') {\n            var id = event.target['id'];\n            event.preventDefault();\n            if (this.legendModule && (id.indexOf('_Left_Page_Rect') > -1 || id.indexOf('_Right_Page_Rect') > -1)) {\n                this.legendModule.currentPage = (id.indexOf('_Left_Page_') > -1) ? (this.legendModule.currentPage - 1) :\n                    (this.legendModule.currentPage + 1);\n                this.legendModule.legendGroup = this.renderer.createGroup({ id: this.element.id + '_Legend_Group' });\n                this.legendModule.drawLegendItem(this.legendModule.currentPage);\n                var textContent = (document.getElementById(this.element.id + '_Paging_Text')).textContent;\n                var text = textContent.split('/').map(Number);\n                if (id.indexOf('_Left_Page_Rect') > -1) {\n                    if (text[0] !== 1) {\n                        event.target.focus();\n                    }\n                    event.target.style.outlineColor = text[0] - 1 !== text[1] ? '' : 'transparent';\n                }\n                else if (id.indexOf('_Right_Page_Rect') > -1) {\n                    if (text[0] !== text[1]) {\n                        event.target.focus();\n                    }\n                    event.target.style.outlineColor = text[0] !== text[1] + 1 ? '' : 'transparent';\n                }\n                if (querySelector(this.element.id + '_Legend_Border', this.element.id)) {\n                    querySelector(this.element.id + '_Legend_Border', this.element.id).style.pointerEvents = 'none';\n                }\n            }\n            if (id.indexOf('shapeIndex') > -1) {\n                this.keyboardHighlightSelection(id, event.type);\n            }\n        }\n    };\n    /**\n     * Gets the selected element to be maintained or not.\n     *\n     * @param {Element} targetEle - Specifies the target element\n     * @returns {boolean} - Returns the boolean value\n     * @private\n     */\n    Maps.prototype.SelectedElement = function (targetEle) {\n        var isSelect = false;\n        if (targetEle.getAttribute('class') === 'ShapeselectionMapStyle') {\n            isSelect = true;\n        }\n        return isSelect;\n    };\n    /**\n     * This method is used to perform the operations when a click operation is performed on maps.\n     *\n     * @param {PointerEvent} e - Specifies the pointer event on maps.\n     */\n    Maps.prototype.mapsOnClick = function (e) {\n        var _this = this;\n        var targetEle = e.target;\n        var targetId = targetEle.id;\n        var latitude = null;\n        var longitude = null;\n        this.mouseClickEvent = { x: e.x, y: e.y };\n        if (targetEle.id.indexOf('_ToolBar') === -1) {\n            var latLongValue = this.getClickLocation(targetId, e.pageX, e.pageY, targetEle, e['layerX'], e['layerY']);\n            if (!isNullOrUndefined(latLongValue)) {\n                latitude = latLongValue.latitude;\n                longitude = latLongValue.longitude;\n            }\n            var eventArgs_1 = {\n                cancel: false, name: click, target: targetId, x: e.clientX, y: e.clientY,\n                latitude: latitude, longitude: longitude,\n                isShapeSelected: this.SelectedElement(targetEle)\n            };\n            this.trigger('click', eventArgs_1, function (mouseArgs) {\n                if (targetEle.id.indexOf('shapeIndex') > -1) {\n                    _this.mergeCluster();\n                    if (getElement(_this.element.id + '_mapsTooltip') &&\n                        _this.mapsTooltipModule.tooltipTargetID.indexOf('_MarkerIndex_') > -1) {\n                        removeElement(_this.element.id + '_mapsTooltip');\n                    }\n                }\n                if (_this.markerModule) {\n                    _this.markerModule.markerClusterClick(e);\n                }\n                if (!eventArgs_1.cancel) {\n                    _this.notify(click, targetEle);\n                }\n                if (!eventArgs_1.cancel && targetEle.id.indexOf('shapeIndex') !== -1) {\n                    var layerIndex = parseInt(targetEle.id.split('_LayerIndex_')[1].split('_')[0], 10);\n                    var shapeSelectedEventArgs = triggerShapeEvent(targetId, _this.layers[layerIndex].selectionSettings, _this, shapeSelected);\n                    if (!shapeSelectedEventArgs.cancel && _this.selectionModule && !isNullOrUndefined(_this.shapeSelected)) {\n                        customizeStyle(_this.selectionModule.selectionType + 'selectionMap', _this.selectionModule.selectionType + 'selectionMapStyle', shapeSelectedEventArgs);\n                    }\n                    else if (shapeSelectedEventArgs.cancel && _this.selectionModule\n                        && isNullOrUndefined(shapeSelectedEventArgs['data'])) {\n                        removeClass(targetEle);\n                        _this.selectionModule.removedSelectionList(targetEle);\n                    }\n                }\n            });\n        }\n    };\n    Maps.prototype.getClickLocation = function (targetId, pageX, pageY, targetElement, x, y) {\n        var layerIndex = 0;\n        var latLongValue;\n        if (targetId.indexOf('_LayerIndex_') !== -1 && !this.isTileMap && (parseInt(this.mouseDownEvent['x']) === parseInt(this.mouseClickEvent['x']))\n            && (parseInt(this.mouseDownEvent['y']) === parseInt(this.mouseClickEvent['y']))) {\n            layerIndex = parseFloat(targetId.split('_LayerIndex_')[1].split('_')[0]);\n            if (this.layers[layerIndex].geometryType === 'Normal') {\n                if (targetId.indexOf('_shapeIndex_') > -1) {\n                    var location_2 = getMousePosition(pageX, pageY, targetElement.parentElement);\n                    var minLongitude = Math.abs((-this.baseMapBounds.longitude.min) * this.mapLayerPanel.currentFactor);\n                    var minLatitude = Math.abs(this.baseMapBounds.latitude.max * this.mapLayerPanel.currentFactor);\n                    latLongValue = {\n                        latitude: Math.abs(this.baseMapBounds.latitude.max - (location_2.y / this.mapLayerPanel.currentFactor)),\n                        longitude: Math.abs((location_2.x / this.mapLayerPanel.currentFactor) + this.baseMapBounds.longitude.min)\n                    };\n                    if (this.baseMapBounds.longitude.min < 0 && minLongitude > location_2.x) {\n                        latLongValue.longitude = -latLongValue.longitude;\n                    }\n                    if (this.baseMapBounds.latitude.min < 0 && minLatitude > location_2.y) {\n                        latLongValue.latitude = -latLongValue.latitude;\n                    }\n                }\n                else if (targetId.indexOf('_MarkerIndex_') > -1 && this.markerModule) {\n                    var markerIndex = parseInt(targetId.split('_MarkerIndex_')[1].split('_')[0], 10);\n                    var dataIndex = parseInt(targetId.split('_dataIndex_')[1].split('_')[0], 10);\n                    if (!isNaN(markerIndex) && !isNaN(dataIndex)) {\n                        var dataObject = this.layers[layerIndex].markerSettings[markerIndex].dataSource[dataIndex];\n                        latLongValue = { latitude: dataObject['latitude'], longitude: dataObject.longitude };\n                    }\n                    else {\n                        latLongValue = { latitude: null, longitude: null };\n                    }\n                }\n                else {\n                    latLongValue = { latitude: null, longitude: null };\n                }\n            }\n            else {\n                latLongValue = this.getGeoLocation(layerIndex, x, y);\n            }\n        }\n        else if (this.isTileMap && (parseInt(this.mouseDownEvent['x']) === parseInt(this.mouseClickEvent['x']))\n            && (parseInt(this.mouseDownEvent['y']) === parseInt(this.mouseClickEvent['y']))) {\n            latLongValue = this.getTileGeoLocation(x, y);\n        }\n        return latLongValue;\n    };\n    /**\n     * This method is used to perform operations when mouse click on maps.\n     *\n     * @param {PointerEvent} e - Specifies the pointer event on maps.\n     * @returns {boolean} - Returns the boolean value\n     */\n    Maps.prototype.mouseEndOnMap = function (e) {\n        var targetEle = e.target;\n        var targetId = targetEle.id;\n        var pageX;\n        var latitude = null;\n        var longitude = null;\n        var pageY;\n        var target;\n        var touchArg;\n        var rect = this.element.getBoundingClientRect();\n        var element = e.target;\n        if (e.type.indexOf('touch') !== -1) {\n            this.isTouch = true;\n            touchArg = e;\n            pageX = touchArg.changedTouches[0].pageX;\n            pageY = touchArg.changedTouches[0].pageY;\n            target = touchArg.target;\n            this.mouseClickEvent = { x: pageX, y: pageY };\n        }\n        else {\n            this.isTouch = e.pointerType === 'touch';\n            pageX = e.pageX;\n            pageY = e.pageY;\n            target = e.target;\n        }\n        if (this.isTouch) {\n            if (targetEle.id.indexOf('_ToolBar') === -1) {\n                var latLongValue = this.getClickLocation(targetId, pageX, pageY, targetEle, pageX, pageY);\n                if (!isNullOrUndefined(latLongValue)) {\n                    latitude = latLongValue.latitude;\n                    longitude = latLongValue.longitude;\n                }\n                var eventArgs = {\n                    cancel: false, name: click, target: targetId, x: e.clientX, y: e.clientY,\n                    latitude: latitude, longitude: longitude, isShapeSelected: this.SelectedElement(targetEle)\n                };\n                // eslint-disable-next-line @typescript-eslint/no-empty-function\n                this.trigger('click', eventArgs, function (mouseArgs) {\n                });\n            }\n            this.titleTooltip(e, pageX, pageY, true);\n            if (!isNullOrUndefined(this.legendModule)) {\n                this.legendTooltip(e, e.pageX, e.pageY, true);\n            }\n        }\n        this.notify(Browser.touchEndEvent, e);\n        if (e.cancelable) {\n            e.preventDefault();\n        }\n        return false;\n    };\n    /**\n     * This method is used to perform operations when mouse is clicked down on maps.\n     *\n     * @param {PointerEvent} e - Specifies the pointer event on maps\n     * @returns {void}\n     */\n    Maps.prototype.mouseDownOnMap = function (e) {\n        var pageX;\n        var pageY;\n        var target;\n        var touchArg;\n        this.mouseDownEvent = { x: e.x, y: e.y };\n        if (e.type.indexOf('touch') !== -1 && e.changedTouches) {\n            this.mouseDownEvent = { x: e.changedTouches[0].pageX, y: e.changedTouches[0].pageY };\n        }\n        var rect = this.element.getBoundingClientRect();\n        var element = e.target;\n        if (element.id.indexOf('_ToolBar') === -1) {\n            var markerModule = this.markerModule;\n            if (element.id.indexOf('shapeIndex') > -1 || element.id.indexOf('Tile') > -1) {\n                this.mergeCluster();\n            }\n            if (markerModule) {\n                markerModule.markerClick(e);\n                markerModule.markerClusterClick(e);\n            }\n            if (this.bubbleModule) {\n                this.bubbleModule.bubbleClick(e);\n            }\n        }\n        this.notify(Browser.touchStartEvent, e);\n    };\n    /**\n     * Merges the marker clusters.\n     *\n     * @returns {void}\n     * @private\n     */\n    Maps.prototype.mergeCluster = function () {\n        if (this.markerModule && (this.markerModule.sameMarkerData.length > 0) &&\n            (this.zoomModule ? this.zoomModule.isSingleClick : true)) {\n            mergeSeparateCluster(this.markerModule.sameMarkerData, this, getElement(this.element.id + '_Markers_Group'));\n            this.markerModule.sameMarkerData = [];\n        }\n    };\n    /**\n     * This method is used to perform operations when performing the double click operation on maps.\n     *\n     * @param {PointerEvent} e - Specifies the pointer event.\n     */\n    Maps.prototype.mapsOnDoubleClick = function (e) {\n        this.notify('dblclick', e);\n        var targetElement = e.target;\n        var targetId = targetElement.id;\n        var layerIndex = 0;\n        var latLongValue;\n        var latitude = null;\n        var longitude = null;\n        if (targetElement.id.indexOf('_ToolBar') === -1) {\n            if (targetElement.id.indexOf('_LayerIndex_') !== -1 && !this.isTileMap && (this.mouseDownEvent['x'] === e.clientX)\n                && (this.mouseDownEvent['y'] === e.clientY)) {\n                layerIndex = parseFloat(targetElement.id.split('_LayerIndex_')[1].split('_')[0]);\n                latLongValue = this.getGeoLocation(layerIndex, e['layerX'], e['layerY']);\n                latitude = latLongValue['latitude'];\n                longitude = latLongValue['longitude'];\n            }\n            else if (this.isTileMap && (this.mouseDownEvent['x'] === e.clientX)\n                && (this.mouseDownEvent['y'] === e.clientY)) {\n                latLongValue = this.getTileGeoLocation(e['layerX'], e['layerY']);\n                latitude = latLongValue['latitude'];\n                longitude = latLongValue['longitude'];\n            }\n            var doubleClickArgs = { cancel: false, name: doubleClick, x: e.clientX, y: e.clientY,\n                target: targetId, latitude: latitude, longitude: longitude, isShapeSelected: null };\n            this.trigger('doubleClick', doubleClickArgs);\n        }\n    };\n    /**\n     * This method is used to perform operations while performing mouse over on maps.\n     *\n     * @param {PointerEvent} e - Specifies the pointer event on maps.\n     * @returns {void}\n     */\n    Maps.prototype.mouseMoveOnMap = function (e) {\n        var pageX;\n        var pageY;\n        var touchArg;\n        var target;\n        var touches = null;\n        target = (e.type === 'touchmove') ? e.target :\n            target = e.target;\n        // if (target.id.indexOf('shapeIndex') !== -1 && !this.highlightSettings.enable) {\n        //     triggerShapeEvent(target.id, this.highlightSettings, this, shapeHighlight);\n        // }\n        if (this.markerModule) {\n            this.markerModule.markerMove(e);\n            this.markerModule.markerClusterMouseMove(e);\n        }\n        if (this.bubbleModule) {\n            this.bubbleModule.bubbleMove(e);\n        }\n        this.onMouseMove(e);\n        this.notify(Browser.touchMoveEvent, e);\n    };\n    /**\n     * This method is used to perform operations when mouse move event is performed on maps.\n     *\n     * @param {PointerEvent} e - Specifies the pointer event on maps.\n     * @returns {void}\n     */\n    Maps.prototype.onMouseMove = function (e) {\n        var element = e.target;\n        var pageX;\n        var pageY;\n        var target;\n        var touchArg;\n        if (!this.isTouch) {\n            this.titleTooltip(e, e.pageX, e.pageY);\n            if (!isNullOrUndefined(this.legendModule)) {\n                this.legendTooltip(e, e.pageX, e.pageY, true);\n            }\n        }\n        return false;\n    };\n    Maps.prototype.legendTooltip = function (event, x, y, isTouch) {\n        var targetId = event.target.id;\n        var legendText;\n        var page = this.legendModule.currentPage;\n        var legendIndex = event.target.id.split('_Index_')[1];\n        var collection;\n        page = this.legendModule.totalPages.length <= this.legendModule.currentPage\n            ? this.legendModule.totalPages.length - 1 : this.legendModule.currentPage < 0 ?\n            0 : this.legendModule.currentPage;\n        var count = this.legendModule.totalPages.length !== 0 ?\n            this.legendModule.totalPages[page]['Collection'].length : this.legendModule.totalPages.length;\n        for (var i = 0; i < count; i++) {\n            collection = this.legendModule.totalPages[page]['Collection'][i];\n            legendText = collection['DisplayText'];\n            targetId = event.target['id'];\n            legendIndex = event.target['id'].split('_Index_')[1];\n            if ((targetId === (this.element.id + '_Legend_Text_Index_' + legendIndex)) &&\n                (event.target.textContent.indexOf('...') > -1) && collection['idIndex'] === parseInt(legendIndex, 10)) {\n                showTooltip(legendText, this.legendSettings.textStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_Legend_Text_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n            }\n        }\n        if ((targetId !== (this.element.id + '_Legend_Text_Index_' + legendIndex))) {\n            removeElement(this.element.id + '_EJ2_Legend_Text_Tooltip');\n        }\n    };\n    Maps.prototype.titleTooltip = function (event, x, y, isTouch) {\n        var targetId = event.target.id;\n        if (targetId === (this.element.id + '_LegendTitle') && (event.target.textContent.indexOf('...') > -1)) {\n            showTooltip(this.legendSettings.title.text, this.legendSettings.titleStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_LegendTitle_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n        }\n        else {\n            removeElement(this.element.id + '_EJ2_LegendTitle_Tooltip');\n        }\n        if ((targetId === (this.element.id + '_Map_title')) && (event.target.textContent.indexOf('...') > -1)) {\n            showTooltip(this.titleSettings.text, this.titleSettings.textStyle.size, x, y, this.element.offsetWidth, this.element.offsetHeight, this.element.id + '_EJ2_Title_Tooltip', getElement(this.element.id + '_Secondary_Element'), isTouch);\n        }\n        else {\n            removeElement(this.element.id + '_EJ2_Title_Tooltip');\n        }\n    };\n    /*\n\n    /**\n     * This method is used to perform operations while resizing the window.\n     *\n     * @param e - Specifies the arguments of window resize event.\n     */\n    Maps.prototype.mapsOnResize = function (e) {\n        var _this = this;\n        this.isResize = this.isReset = true;\n        var args = {\n            cancel: false,\n            name: resize,\n            previousSize: this.availableSize,\n            currentSize: calculateSize(this),\n            maps: this\n        };\n        this.trigger(resize, args);\n        if (!args.cancel) {\n            if (this.resizeTo) {\n                clearTimeout(this.resizeTo);\n            }\n            if (!isNullOrUndefined(this.element) && this.element.classList.contains('e-maps')) {\n                this.resizeTo = setTimeout(function () {\n                    _this.unWireEVents();\n                    _this.createSVG();\n                    _this.refreshing = true;\n                    _this.wireEVents();\n                    _this.render();\n                }, 500);\n            }\n        }\n        return false;\n    };\n    /**\n     * This method is used to zoom the map by specifying the center position.\n     *\n     * @param {number} centerPosition - Specifies the center position\n     * @param {number} centerPosition.latitude - Specifies the latitude value for the center position\n     * @param {number} centerPosition.longitude - Specifies the longitude value for the center position\n     * @param {number} zoomFactor - Specifies the zoom factor for maps.\n     * @returns {void}\n     */\n    Maps.prototype.zoomByPosition = function (centerPosition, zoomFactor) {\n        var factor = this.mapLayerPanel.calculateFactor(this.layersCollection[0]);\n        var position;\n        var size = this.mapAreaRect;\n        if (!this.isTileMap && this.zoomModule) {\n            if (!isNullOrUndefined(centerPosition)) {\n                position = convertGeoToPoint(centerPosition.latitude, centerPosition.longitude, factor, this.layersCollection[0], this);\n                var mapRect = document.getElementById(this.element.id + '_Layer_Collections').getBoundingClientRect();\n                var svgRect = this.svgObject.getBoundingClientRect();\n                var xDiff = Math.abs(mapRect.left - svgRect.left) / this.scale;\n                var yDiff = Math.abs(mapRect.top - svgRect.top) / this.scale;\n                var x = this.translatePoint.x + xDiff;\n                var y = this.translatePoint.y + yDiff;\n                this.scale = zoomFactor;\n                this.translatePoint.x = ((mapRect.left < svgRect.left ? x : 0) + (size.width / 2) - (position.x * zoomFactor)) / zoomFactor;\n                this.translatePoint.y = ((mapRect.top < svgRect.top ? y : 0) + (size.height / 2) - (position.y * zoomFactor)) / zoomFactor;\n                this.zoomModule.applyTransform();\n            }\n            else {\n                position = { x: size.width / 2, y: size.height / 2 };\n                this.zoomModule.performZooming(position, zoomFactor, zoomFactor > this.scale ? 'ZoomIn' : 'ZoomOut');\n            }\n        }\n        else if (this.zoomModule) {\n            this.tileZoomLevel = zoomFactor;\n            this.tileTranslatePoint = this.mapLayerPanel['panTileMap'](this.availableSize.width, this.availableSize.height, { x: centerPosition.longitude, y: centerPosition.latitude });\n            this.mapLayerPanel.generateTiles(zoomFactor, this.tileTranslatePoint, null, new BingMap(this));\n        }\n    };\n    /**\n     * This method is used to perform panning by specifying the direction.\n     *\n     * @param {PanDirection} direction - Specifies the direction in which the panning is performed.\n     * @param {PointerEvent | TouchEvent} mouseLocation - Specifies the location of the mouse pointer in maps.\n     */\n    Maps.prototype.panByDirection = function (direction, mouseLocation) {\n        var xDiff = 0;\n        var yDiff = 0;\n        switch (direction) {\n            case 'Left':\n                xDiff = -(this.mapAreaRect.width / 7);\n                break;\n            case 'Right':\n                xDiff = (this.mapAreaRect.width / 7);\n                break;\n            case 'Top':\n                yDiff = -(this.mapAreaRect.height / 7);\n                break;\n            case 'Bottom':\n                yDiff = (this.mapAreaRect.height / 7);\n                break;\n        }\n        if (this.zoomModule) {\n            this.zoomModule.panning(direction, xDiff, yDiff, mouseLocation);\n        }\n    };\n    /**\n     * This method is used to add the layers dynamically to the maps.\n     *\n     * @param {Object} layer - Specifies the layer for the maps.\n     */\n    Maps.prototype.addLayer = function (layer) {\n        this.layers.push(new LayerSettings(this.layers[0], 'layers', layer));\n        this.refresh();\n    };\n    /**\n     * This method is used to remove a layer from map.\n     *\n     * @param {number} index - Specifies the index number of the layer to be removed.\n     * @returns {void}\n     */\n    Maps.prototype.removeLayer = function (index) {\n        this.layers.splice(index, 1);\n        this.refresh();\n    };\n    /**\n     * This method is used to add markers dynamically in the maps.\n     * If we provide the index value of the layer in which the marker to be added and the coordinates\n     * of the marker as parameters, the marker will be added in the location.\n     *\n     * @param {number} layerIndex - Specifies the index number of the layer.\n     * @param {MarkerSettingsModel[]} markerCollection - Specifies the settings of the marker to be added.\n     * @returns {void}\n     */\n    Maps.prototype.addMarker = function (layerIndex, markerCollection) {\n        var layerEle = document.getElementById(this.element.id + '_LayerIndex_' + layerIndex);\n        if (markerCollection.length > 0 && layerEle) {\n            for (var _i = 0, markerCollection_1 = markerCollection; _i < markerCollection_1.length; _i++) {\n                var newMarker = markerCollection_1[_i];\n                this.layersCollection[layerIndex].markerSettings.push(new MarkerSettings(this, 'markerSettings', newMarker));\n            }\n            var markerModule = new Marker(this);\n            markerModule.markerRender(layerEle, layerIndex, this.mapLayerPanel['currentFactor'], 'AddMarker');\n            this.arrangeTemplate();\n        }\n    };\n    /**\n     * This method is used to select the geometric shape element in the maps component.\n     *\n     * @param {number} layerIndex - Specifies the index of the layer in maps.\n     * @param {string | string[]} propertyName - Specifies the property name from the data source.\n     * @param {string} name - Specifies the name of the shape that is selected.\n     * @param {boolean} enable - Specifies the shape selection to be enabled.\n     * @returns {void}\n     */\n    Maps.prototype.shapeSelection = function (layerIndex, propertyName, name, enable) {\n        var targetEle;\n        var subLayerIndex;\n        var popertyNameArray = Array.isArray(propertyName) ? propertyName : Array(propertyName);\n        if (isNullOrUndefined(enable)) {\n            enable = true;\n        }\n        var selectionsettings = this.layers[layerIndex].selectionSettings;\n        if (!selectionsettings.enableMultiSelect && this.legendSelection && enable) {\n            this.removeShapeSelection();\n        }\n        if (this.layers[layerIndex].type === 'SubLayer') {\n            for (var i = 0; i < this.layersCollection.length; i++) {\n                if ((this.layersCollection[i].shapeData === this.layers[layerIndex].shapeData)) {\n                    subLayerIndex = i;\n                    break;\n                }\n            }\n        }\n        if (selectionsettings.enable) {\n            var targetId = void 0;\n            var dataIndex = void 0;\n            var shapeIndex = void 0;\n            var indexValue = void 0;\n            var shapeDataValue = void 0;\n            var data = void 0;\n            var shapeData = this.layers[layerIndex].shapeData['features'];\n            for (var i = 0; i < shapeData.length; i++) {\n                for (var j = 0; j < popertyNameArray.length; j++) {\n                    var propertyName_1 = !isNullOrUndefined(shapeData[i]['properties'][popertyNameArray[j]])\n                        && isNaN(shapeData[i]['properties'][popertyNameArray[j]]) ?\n                        shapeData[i]['properties'][popertyNameArray[j]].toLowerCase() : shapeData[i]['properties'][popertyNameArray[j]];\n                    var shapeName = !isNullOrUndefined(name) ? name.toLowerCase() : name;\n                    var k = void 0;\n                    if (propertyName_1 === shapeName) {\n                        if (!isNullOrUndefined(this.layers[layerIndex].shapeSettings.colorValuePath)) {\n                            k = checkShapeDataFields(this.layers[layerIndex].dataSource, shapeData[i]['properties'], this.layers[layerIndex].shapeDataPath, this.layers[layerIndex].shapePropertyPath, this.layers[layerIndex]);\n                        }\n                        var baseLayer = this.layers[layerIndex];\n                        if (this.baseLayerIndex >= 0 && baseLayer.isBaseLayer) {\n                            indexValue = 0;\n                        }\n                        else if (this.layers[layerIndex].type === 'SubLayer') {\n                            indexValue = subLayerIndex;\n                        }\n                        targetId = this.element.id + '_' + 'LayerIndex_' + indexValue + '_shapeIndex_' + i + '_dataIndex_' + k;\n                        targetEle = getElement(targetId);\n                        if (isNullOrUndefined(k) && isNullOrUndefined(targetEle)) {\n                            targetId = this.element.id + '_' + 'LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_null';\n                            targetEle = getElement(targetId);\n                        }\n                        shapeIndex = parseInt(targetEle.id.split('_shapeIndex_')[1].split('_')[0], 10);\n                        shapeDataValue = this.layers[layerIndex].shapeData['features']['length'] > shapeIndex ?\n                            this.layers[layerIndex].shapeData['features'][shapeIndex]['properties'] : null;\n                        dataIndex = parseInt(targetEle.id.split('_dataIndex_')[1].split('_')[0], 10);\n                        data = isNullOrUndefined(dataIndex) ? null : this.layers[layerIndex].dataSource[dataIndex];\n                        if (enable) {\n                            triggerItemSelectionEvent(selectionsettings, this, targetEle, shapeDataValue, data);\n                            this.shapeSelectionClass = getElement('ShapeselectionMap');\n                            if (this.legendSettings.visible && targetEle.id.indexOf('_MarkerIndex_') === -1) {\n                                this.legendModule.shapeHighLightAndSelection(targetEle, data, selectionsettings, 'selection', layerIndex);\n                            }\n                            var shapeToggled = this.legendSettings.visible ? this.legendModule.shapeToggled : true;\n                            if (shapeToggled) {\n                                targetEle.setAttribute('class', 'ShapeselectionMapStyle');\n                                if (this.selectedElementId.indexOf(targetEle.getAttribute('id')) === -1) {\n                                    this.selectedElementId.push(targetEle.getAttribute('id'));\n                                }\n                                if (!selectionsettings.enableMultiSelect) {\n                                    return;\n                                }\n                            }\n                        }\n                        else {\n                            this.legendSelection = (!selectionsettings.enableMultiSelect && !this.legendSelection) ?\n                                true : this.legendSelection;\n                            if (this.legendSettings.visible && targetEle.id.indexOf('_MarkerIndex_') === -1 &&\n                                targetEle.getAttribute('class') === 'ShapeselectionMapStyle') {\n                                this.legendModule.shapeHighLightAndSelection(targetEle, data, selectionsettings, 'selection', layerIndex);\n                            }\n                            var shapeToggled = this.legendSettings.visible ? this.legendModule.shapeToggled : true;\n                            if (shapeToggled) {\n                                removeClass(targetEle);\n                                var selectedElementIdIndex = this.selectedElementId.indexOf(targetEle.getAttribute('id'));\n                                if (selectedElementIdIndex !== -1) {\n                                    this.selectedElementId.splice(selectedElementIdIndex, 1);\n                                    if (!selectionsettings.enableMultiSelect && this.legendSelection && this.selectedElementId.length > 0) {\n                                        this.removeShapeSelection();\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * This method is used to zoom the maps component based on the provided coordinates.\n     *\n     * @param {number} minLatitude - Specifies the minimum latitude to be zoomed.\n     * @param {number} minLongitude - Specifies the minimum latitude to be zoomed.\n     * @param {number} maxLatitude - Specifies the maximum latitude to be zoomed.\n     * @param {number} maxLongitude - Specifies the maximum longitude to be zoomed.\n     * @returns {void}\n     */\n    Maps.prototype.zoomToCoordinates = function (minLatitude, minLongitude, maxLatitude, maxLongitude) {\n        var _a, _b;\n        var centerLatitude;\n        var centerLongtitude;\n        var isTwoCoordinates = false;\n        if (isNullOrUndefined(maxLatitude) && isNullOrUndefined(maxLongitude)\n            || isNullOrUndefined(minLatitude) && isNullOrUndefined(minLongitude)) {\n            minLatitude = isNullOrUndefined(minLatitude) ? 0 : minLatitude;\n            minLongitude = isNullOrUndefined(minLatitude) ? 0 : minLongitude;\n            maxLatitude = isNullOrUndefined(maxLatitude) ? minLatitude : maxLatitude;\n            maxLongitude = isNullOrUndefined(maxLongitude) ? minLongitude : maxLongitude;\n            isTwoCoordinates = true;\n        }\n        if (minLatitude > maxLatitude) {\n            _a = [maxLatitude, minLatitude], minLatitude = _a[0], maxLatitude = _a[1];\n        }\n        if (minLongitude > maxLongitude) {\n            _b = [maxLongitude, minLongitude], minLongitude = _b[0], maxLongitude = _b[1];\n        }\n        if (!isTwoCoordinates) {\n            centerLatitude = (minLatitude + maxLatitude) / 2;\n            centerLongtitude = (minLongitude + maxLongitude) / 2;\n        }\n        else {\n            centerLatitude = (minLatitude + maxLatitude);\n            centerLongtitude = (minLongitude + maxLongitude);\n        }\n        this.centerLatOfGivenLocation = centerLatitude;\n        this.centerLongOfGivenLocation = centerLongtitude;\n        this.minLatOfGivenLocation = minLatitude;\n        this.minLongOfGivenLocation = minLongitude;\n        this.maxLatOfGivenLocation = maxLatitude;\n        this.maxLongOfGivenLocation = maxLongitude;\n        this.zoomNotApplied = true;\n        this.scaleOfGivenLocation = calculateZoomLevel(minLatitude, maxLatitude, minLongitude, maxLongitude, this.mapAreaRect.width, this.mapAreaRect.height, this);\n        var zoomArgs = {\n            cancel: false, name: 'zoom', type: zoomIn, maps: this,\n            tileTranslatePoint: {}, translatePoint: {},\n            tileZoomLevel: this.isTileMap ? { previous: this.tileZoomLevel, current: this.scaleOfGivenLocation } : {},\n            scale: !this.isTileMap ? { previous: this.scale, current: this.scaleOfGivenLocation } :\n                { previous: this.tileZoomLevel, current: this.scaleOfGivenLocation }\n        };\n        this.trigger('zoom', zoomArgs);\n        this.refresh();\n    };\n    /**\n     * This method is used to remove multiple selected shapes in the maps.\n     *\n     * @returns {void}\n     */\n    Maps.prototype.removeShapeSelection = function () {\n        var selectedElements = this.selectedElementId.length;\n        for (var i = 0; i < selectedElements; i++) {\n            removeClass(getElementByID(this.selectedElementId[0]));\n            this.selectedElementId.splice(0, 1);\n        }\n        if (this.legendSettings.visible) {\n            var legendSelectedElements = this.legendSelectionCollection.length;\n            for (var i = 0; i < legendSelectedElements; i++) {\n                removeClass(getElementByID(this.legendSelectionCollection[i]['legendElement']['id']));\n                this.selectedLegendElementId.splice(0, 1);\n            }\n        }\n        this.shapeSelectionItem = [];\n        this.legendSelectionCollection = [];\n    };\n    /**\n     * This method is used to set culture for maps component.\n     *\n     * @returns {void}\n     */\n    Maps.prototype.setCulture = function () {\n        this.intl = new Internationalization();\n        this.setLocaleConstants();\n        this.localeObject = new L10n(this.getModuleName(), this.defaultLocalConstants, this.locale);\n    };\n    /**\n     * This method to set locale constants to the maps component.\n     *\n     * @returns {void}\n     */\n    Maps.prototype.setLocaleConstants = function () {\n        // Need to modify after the api confirm\n        this.defaultLocalConstants = {\n            ZoomIn: 'Zoom in',\n            Zoom: 'Zoom',\n            ZoomOut: 'Zoom out',\n            Pan: 'Pan',\n            Reset: 'Reset'\n        };\n    };\n    /**\n     * This method disposes the maps component.\n     */\n    Maps.prototype.destroy = function () {\n        this.unWireEVents();\n        this.shapeSelectionItem = [];\n        this.toggledShapeElementId = [];\n        this.toggledLegendId = [];\n        this.legendSelectionCollection = [];\n        this.selectedLegendElementId = [];\n        this.selectedNavigationElementId = [];\n        this.selectedBubbleElementId = [];\n        this.selectedMarkerElementId = [];\n        this.selectedElementId = [];\n        this.dataLabelShape = [];\n        this.zoomShapeCollection = [];\n        this.zoomLabelPositions = [];\n        this.mouseDownEvent = { x: null, y: null };\n        this.mouseClickEvent = { x: null, y: null };\n        if (document.getElementById('mapsmeasuretext')) {\n            document.getElementById('mapsmeasuretext').remove();\n        }\n        this.removeSvg();\n        _super.prototype.destroy.call(this);\n    };\n    /**\n     * Gets component name\n     *\n     * @returns {string} - Returns the string value\n     */\n    Maps.prototype.getModuleName = function () {\n        return 'maps';\n    };\n    /**\n     * Gets the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Returns the string value\n     * @private\n     */\n    Maps.prototype.getPersistData = function () {\n        var keyEntity = ['translatePoint', 'zoomSettings', 'mapScaleValue', 'tileTranslatePoint', 'baseTranslatePoint',\n            'scale', 'zoomPersistence', 'defaultState', 'markerZoomedState', 'initialCheck', 'initialZoomLevel', 'initialTileTranslate',\n            'applyZoomReset', 'markerZoomFactor'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {MapsModel} newProp - Specifies the new property\n     * @param {MapsModel} oldProp - Specifies the old property\n     * @returns {void}\n     * @private\n     */\n    Maps.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var render = false;\n        var isMarker = false;\n        var isStaticMapType = false;\n        var layerEle;\n        if (newProp['layers']) {\n            var newLayerLength = Object.keys(newProp['layers']).length;\n            layerEle = document.getElementById(this.element.id + '_LayerIndex_' + (newLayerLength - 1));\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'background':\n                    this.renderBorder();\n                    break;\n                case 'height':\n                case 'width':\n                case 'layers':\n                case 'projectionType':\n                case 'centerPosition':\n                case 'legendSettings':\n                case 'baseLayerIndex':\n                    if (prop === 'layers') {\n                        var layerPropLength = Object.keys(newProp.layers).length;\n                        for (var x = 0; x < layerPropLength; x++) {\n                            if (!isNullOrUndefined(newProp.layers[x])) {\n                                var collection = Object.keys(newProp.layers[x]);\n                                for (var _b = 0, collection_1 = collection; _b < collection_1.length; _b++) {\n                                    var collectionProp = collection_1[_b];\n                                    if (collectionProp === 'markerSettings') {\n                                        isMarker = true;\n                                    }\n                                    else if (collectionProp === 'staticMapType') {\n                                        isStaticMapType = true;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    render = true;\n                    break;\n                case 'zoomSettings':\n                    if (!isNullOrUndefined(oldProp.zoomSettings)) {\n                        if (newProp.zoomSettings.zoomFactor !== oldProp.zoomSettings.zoomFactor) {\n                            render = false;\n                        }\n                        else if (newProp.zoomSettings.shouldZoomInitially !== oldProp.zoomSettings.shouldZoomInitially) {\n                            this.zoomSettings.zoomFactor = 1;\n                            render = true;\n                        }\n                        else if (newProp.zoomSettings.enable !== oldProp.zoomSettings.enable) {\n                            this.zoomSettings.zoomFactor = 1;\n                            render = true;\n                        }\n                        else {\n                            render = true;\n                        }\n                    }\n                    break;\n                case 'locale':\n                case 'currencyCode':\n                    _super.prototype.refresh.call(this);\n                    break;\n            }\n        }\n        if (render) {\n            if (newProp.layers && isMarker) {\n                removeElement(this.element.id + '_Markers_Group');\n                if (this.isTileMap) {\n                    this.mapLayerPanel.renderTileLayer(this.mapLayerPanel, this.layers['currentFactor'], (this.layers.length - 1));\n                }\n                else {\n                    this.render();\n                }\n            }\n            else if (newProp.layers && isStaticMapType) {\n                this.mapLayerPanel.renderGoogleMap(this.layers[this.layers.length - 1].key, this.staticMapZoom);\n            }\n            else {\n                this.createSVG();\n                this.renderElements();\n            }\n        }\n    };\n    /**\n     * To provide the array of modules needed for maps rendering\n     *\n     * @returns {ModuleDeclaration[]} - Returns the modules\n     * @private\n     */\n    Maps.prototype.requiredModules = function () {\n        var modules = [];\n        var isVisible = this.findVisibleLayers(this.layers);\n        var annotationEnable = false;\n        this.annotations.map(function (annotation, index) {\n            annotationEnable = annotation.content != null;\n        });\n        if (this.isBubbleVisible()) {\n            modules.push({\n                member: 'Bubble',\n                args: [this]\n            });\n        }\n        if (isVisible.highlight) {\n            modules.push({\n                member: 'Highlight',\n                args: [this]\n            });\n        }\n        if (isVisible.selection) {\n            modules.push({\n                member: 'Selection',\n                args: [this]\n            });\n        }\n        if (this.legendSettings.visible) {\n            modules.push({\n                member: 'Legend',\n                args: [this]\n            });\n        }\n        if (this.zoomSettings.enable || this.zoomSettings.zoomFactor > this.zoomSettings.minZoom) {\n            modules.push({\n                member: 'Zoom',\n                args: [this]\n            });\n        }\n        if (this.isMarkersVisible()) {\n            modules.push({\n                member: 'Marker',\n                args: [this]\n            });\n        }\n        if (this.isDataLabelVisible()) {\n            modules.push({\n                member: 'DataLabel',\n                args: [this]\n            });\n        }\n        if (this.isNavigationVisible()) {\n            modules.push({\n                member: 'NavigationLine',\n                args: [this]\n            });\n        }\n        if (isVisible.tooltip) {\n            modules.push({\n                member: 'MapsTooltip',\n                args: [this]\n            });\n        }\n        if (annotationEnable) {\n            modules.push({\n                member: 'Annotations',\n                args: [this, Annotations]\n            });\n        }\n        if (this.allowPrint) {\n            modules.push({\n                member: 'Print',\n                args: [this]\n            });\n        }\n        if (this.allowImageExport) {\n            modules.push({\n                member: 'ImageExport',\n                args: [this]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * To find marker visibility\n     */\n    Maps.prototype.isMarkersVisible = function () {\n        var isVisible = false;\n        Array.prototype.forEach.call(this.layers, function (layer, layerIndex) {\n            for (var i = 0; i < layer.markerSettings.length; i++) {\n                if (layer.markerSettings[i].visible) {\n                    isVisible = true;\n                    break;\n                }\n            }\n        });\n        return isVisible;\n    };\n    /**\n     * To find DataLabel visibility\n     */\n    Maps.prototype.isDataLabelVisible = function () {\n        var isVisible = false;\n        for (var i = 0; i < this.layers.length; i++) {\n            if (this.layers[i].dataLabelSettings.visible) {\n                isVisible = true;\n                break;\n            }\n        }\n        return isVisible;\n    };\n    /**\n     * To find navigation line visibility\n     */\n    Maps.prototype.isNavigationVisible = function () {\n        var isVisible = false;\n        Array.prototype.forEach.call(this.layers, function (layer, layerIndex) {\n            for (var i = 0; i < layer.navigationLineSettings.length; i++) {\n                if (layer.navigationLineSettings[i].visible) {\n                    isVisible = true;\n                    break;\n                }\n            }\n        });\n        return isVisible;\n    };\n    /**\n     * To find space between the secondary element and svg element.\n     * @private\n     */\n    Maps.prototype.getExtraPosition = function () {\n        var top = 0;\n        var left = 0;\n        var svgElement = getElement(this.element.id + '_svg');\n        if (!isNullOrUndefined(svgElement)) {\n            var svgClientRects = svgElement.getClientRects();\n            var mapsClientRects = (getElement(this.element.id + '_Secondary_Element')).getClientRects();\n            if (svgClientRects.length !== 0 && mapsClientRects.length !== 0) {\n                var svgClientRect = svgClientRects[0];\n                var mapsClientRect = mapsClientRects[0];\n                top = svgClientRect.top - mapsClientRect.top;\n                left = svgClientRect.left - mapsClientRect.left;\n            }\n        }\n        return new Point(left, top);\n    };\n    /**\n     * To find marker visibility\n     */\n    Maps.prototype.isBubbleVisible = function () {\n        var isVisible = false;\n        for (var _i = 0, _a = this.layers; _i < _a.length; _i++) {\n            var layer = _a[_i];\n            if (this.getBubbleVisible(layer)) {\n                isVisible = true;\n                break;\n            }\n        }\n        return isVisible;\n    };\n    /**\n     * To find the bubble visibility from layer\n     *\n     * @param {LayerSettingsModel} layer - Spcifies the layer settings model\n     * @returns {boolean} - Returns the boolean value\n     * @private\n     */\n    Maps.prototype.getBubbleVisible = function (layer) {\n        var isVisible = false;\n        for (var _i = 0, _a = layer.bubbleSettings; _i < _a.length; _i++) {\n            var bubble = _a[_i];\n            if (bubble.visible) {\n                isVisible = true;\n                break;\n            }\n        }\n        return isVisible;\n    };\n    /**\n     * This method handles the printing functionality for the maps component.\n     *\n     * @param {string[] | string | Element} id - Specifies the element to be printed.\n     * @returns {void}\n     */\n    Maps.prototype.print = function (id) {\n        if ((this.allowPrint) && (this.printModule)) {\n            this.printModule.print(id);\n        }\n    };\n    /**\n     * This method handles the export functionality for the maps component.\n     *\n     * @param {ExportType} type - Specifies the type of the exported file.\n     * @param {string} fileName - Specifies the name of the file with which the rendered maps need to be exported.\n     * @param {PdfPageOrientation} orientation - Specifies the orientation of the pdf document in exporting.\n     * @param {boolean} allowDownload - Specifies whether to download as a file or get as base64 string for the file\n     * @returns {Promise<string>} - Returns the string value.\n     */\n    Maps.prototype.export = function (type, fileName, orientation, allowDownload) {\n        var _this = this;\n        if (isNullOrUndefined(allowDownload)) {\n            allowDownload = true;\n        }\n        if ((type !== 'PDF') && (this.allowImageExport) && (this.imageExportModule)) {\n            return new Promise(function (resolve, reject) {\n                resolve(_this.imageExportModule.export(type, fileName, allowDownload));\n            });\n        }\n        else if ((this.allowPdfExport) && (this.pdfExportModule)) {\n            return new Promise(function (resolve, reject) {\n                resolve(_this.pdfExportModule.export(type, fileName, allowDownload, orientation));\n            });\n        }\n        return null;\n    };\n    /**\n     * To find visibility of layers and markers for required modules load.\n     *\n     * @param {LayerSettingsModel[]} layers - Specifies the layers.\n     * @param {boolean} isLayerVisible - Specifies whether the layer is visible or not.\n     * @param {boolean} isBubblevisible - Specifies whether the bubble is visible or not.\n     * @param {boolean} istooltipVisible - Specifies whether the tooltip is visible or not.\n     * @param {boolean} isSelection - Specifies whether the shape is selectd or not.\n     * @param {boolean} isHighlight - Specfies whether the shape is highlighted or not.\n     * @returns {boolean} - Returns the boolean value\n     */\n    Maps.prototype.findVisibleLayers = function (layers, isLayerVisible, isBubblevisible, istooltipVisible, isSelection, isHighlight) {\n        if (isLayerVisible === void 0) { isLayerVisible = false; }\n        if (isBubblevisible === void 0) { isBubblevisible = false; }\n        if (istooltipVisible === void 0) { istooltipVisible = false; }\n        if (isSelection === void 0) { isSelection = false; }\n        if (isHighlight === void 0) { isHighlight = false; }\n        var bubbles;\n        var markers;\n        var navigationLine;\n        for (var _i = 0, layers_1 = layers; _i < layers_1.length; _i++) {\n            var layer = layers_1[_i];\n            isLayerVisible = layer.visible || isLayerVisible;\n            if (layer.visible) {\n                bubbles = layer.bubbleSettings;\n                markers = layer.markerSettings;\n                navigationLine = layer.navigationLineSettings;\n                for (var _a = 0, navigationLine_1 = navigationLine; _a < navigationLine_1.length; _a++) {\n                    var navigation = navigationLine_1[_a];\n                    if (navigation.visible) {\n                        isSelection = navigation.highlightSettings.enable || isSelection;\n                        isHighlight = navigation.selectionSettings.enable || isHighlight;\n                    }\n                }\n                for (var _b = 0, markers_1 = markers; _b < markers_1.length; _b++) {\n                    var marker = markers_1[_b];\n                    if (marker.visible) {\n                        istooltipVisible = marker.tooltipSettings.visible || istooltipVisible;\n                        isSelection = marker.selectionSettings.enable || isSelection;\n                        isHighlight = marker.highlightSettings.enable || isHighlight;\n                    }\n                    if (istooltipVisible) {\n                        break;\n                    }\n                }\n                for (var _c = 0, bubbles_1 = bubbles; _c < bubbles_1.length; _c++) {\n                    var bubble = bubbles_1[_c];\n                    if (bubble.visible) {\n                        istooltipVisible = bubble.tooltipSettings.visible || istooltipVisible;\n                        isSelection = bubble.selectionSettings.enable || isSelection;\n                        isHighlight = bubble.highlightSettings.enable || isHighlight;\n                    }\n                    if (istooltipVisible) {\n                        break;\n                    }\n                }\n                istooltipVisible = layer.tooltipSettings.visible || istooltipVisible;\n                isSelection = layer.selectionSettings.enable || isSelection;\n                isHighlight = layer.highlightSettings.enable || isHighlight;\n            }\n            if (isLayerVisible && isBubblevisible && istooltipVisible) {\n                break;\n            }\n        }\n        return {\n            layer: isLayerVisible, bubble: isBubblevisible, tooltip: istooltipVisible,\n            selection: isSelection, highlight: isHighlight\n        };\n    };\n    /**\n     * This method is used to get the geo location points.\n     *\n     * @param {number} layerIndex - Specifies the index number of the layer of the map.\n     * @param {number} x - Specifies the x value.\n     * @param {number} y - Specifies the y value.\n     * @returns {GeoPosition}- Returns the geo position\n     */\n    Maps.prototype.getGeoLocation = function (layerIndex, x, y) {\n        var container = document.getElementById(this.element.id);\n        var pageX = x - container.offsetLeft;\n        var pageY = y - container.offsetTop;\n        var currentLayer = this.layersCollection[layerIndex];\n        var translate = getTranslate(this, currentLayer, false);\n        var translatePoint = translate['location'];\n        var translatePointX = translatePoint.x * this.scale;\n        var translatePointY = translatePoint.y * this.scale;\n        var mapSize = (Math.min(this.mapAreaRect.height, this.mapAreaRect.width)\n            * this.mapLayerPanel['currentFactor']) * this.scale;\n        var xx = (this.clip(pageX - translatePointX, 0, mapSize - 1) / mapSize) - 0.5;\n        var yy = 0.5 - (this.clip(pageY - translatePointY, 0, mapSize - 1) / mapSize);\n        var lat = 90 - 360 * Math.atan(Math.exp(-yy * 2 * Math.PI)) / Math.PI;\n        var long = 360 * xx;\n        return { latitude: lat, longitude: long };\n    };\n    Maps.prototype.clip = function (value, minVal, maxVal) {\n        return Math.min(Math.max(value, minVal), maxVal);\n    };\n    /**\n     * This method is used to get the geo location points when tile maps is rendered in the maps component.\n     *\n     * @param {number} x - Specifies the x value\n     * @param {number} y - Specifies the y value\n     * @returns {GeoPosition} - Returns the position\n     */\n    Maps.prototype.getTileGeoLocation = function (x, y) {\n        var container = document.getElementById(this.element.id);\n        var ele = document.getElementById(this.element.id + '_tile_parent');\n        var latLong = this.pointToLatLong(x + this.mapAreaRect.x - (ele.offsetLeft - container.offsetLeft), y + this.mapAreaRect.y - (ele.offsetTop - container.offsetTop));\n        return { latitude: latLong['latitude'], longitude: latLong['longitude'] };\n    };\n    /**\n     * This method is used to convert the point to latitude and longitude in maps.\n     *\n     * @param {number} pageX - Specifies the x value for the page.\n     * @param {number} pageY - Specifies the y value for the page.\n     * @returns {Object} - Returns the object.\n     */\n    Maps.prototype.pointToLatLong = function (pageX, pageY) {\n        var padding = this.layers[this.layers.length - 1].layerType === 'GoogleStaticMap' ? 0 : 10;\n        pageY = (this.zoomSettings.enable) ? pageY + padding : pageY;\n        var mapSize = 256 * Math.pow(2, this.tileZoomLevel);\n        var x1 = (this.clip(pageX - (this.translatePoint.x * this.scale), 0, mapSize - 1) / mapSize) - 0.5;\n        var y1 = 0.5 - (this.clip(pageY - (this.translatePoint.y * this.scale), 0, mapSize - 1) / mapSize);\n        var lat = 90 - 360 * Math.atan(Math.exp(-y1 * 2 * Math.PI)) / Math.PI;\n        var long = 360 * x1;\n        return { latitude: lat, longitude: long };\n    };\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"background\", void 0);\n    __decorate([\n        Property(false)\n    ], Maps.prototype, \"useGroupingSeparator\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"format\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"width\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"height\", void 0);\n    __decorate([\n        Property('MouseMove')\n    ], Maps.prototype, \"tooltipDisplayMode\", void 0);\n    __decorate([\n        Property(false)\n    ], Maps.prototype, \"allowPrint\", void 0);\n    __decorate([\n        Property(false)\n    ], Maps.prototype, \"allowImageExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Maps.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, TitleSettings)\n    ], Maps.prototype, \"titleSettings\", void 0);\n    __decorate([\n        Complex({}, ZoomSettings)\n    ], Maps.prototype, \"zoomSettings\", void 0);\n    __decorate([\n        Complex({}, LegendSettings)\n    ], Maps.prototype, \"legendSettings\", void 0);\n    __decorate([\n        Collection([], LayerSettings)\n    ], Maps.prototype, \"layers\", void 0);\n    __decorate([\n        Collection([], Annotation)\n    ], Maps.prototype, \"annotations\", void 0);\n    __decorate([\n        Complex({}, Margin)\n    ], Maps.prototype, \"margin\", void 0);\n    __decorate([\n        Complex({ color: '#DDDDDD', width: 0 }, Border)\n    ], Maps.prototype, \"border\", void 0);\n    __decorate([\n        Property('Material')\n    ], Maps.prototype, \"theme\", void 0);\n    __decorate([\n        Property('Mercator')\n    ], Maps.prototype, \"projectionType\", void 0);\n    __decorate([\n        Property(0)\n    ], Maps.prototype, \"baseLayerIndex\", void 0);\n    __decorate([\n        Property(null)\n    ], Maps.prototype, \"description\", void 0);\n    __decorate([\n        Property(1)\n    ], Maps.prototype, \"tabIndex\", void 0);\n    __decorate([\n        Complex({ latitude: null, longitude: null }, CenterPosition)\n    ], Maps.prototype, \"centerPosition\", void 0);\n    __decorate([\n        Complex({}, MapsAreaSettings)\n    ], Maps.prototype, \"mapsArea\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"loaded\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"doubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"rightClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"resize\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"tooltipRender\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"legendRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"tooltipRenderComplete\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"shapeSelected\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"itemSelection\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"itemHighlight\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"shapeHighlight\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"layerRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"shapeRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerClusterRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerClusterClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerClusterMouseMove\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"markerMouseMove\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"dataLabelRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"bubbleRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"bubbleClick\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"bubbleMouseMove\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"animationComplete\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"annotationRendering\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"zoom\", void 0);\n    __decorate([\n        Event()\n    ], Maps.prototype, \"pan\", void 0);\n    Maps = __decorate([\n        NotifyPropertyChanges\n    ], Maps);\n    return Maps;\n}(Component));\nexport { Maps };\n"]},"metadata":{},"sourceType":"module"}