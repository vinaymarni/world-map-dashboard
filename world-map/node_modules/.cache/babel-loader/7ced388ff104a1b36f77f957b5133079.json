{"ast":null,"code":"import { ColorMapping, bubbleRendering } from '../index';\nimport { bubbleClick, bubbleMouseMove } from '../index';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CircleOption, MapLocation, findMidPointOfPolygon, Point, drawCircle, elementAnimate, getTranslate } from '../utils/helper';\nimport { RectOption, Rect, drawRectangle, checkPropertyPath, getZoomTranslate, getRatioOfBubble, maintainSelection, getValueFromObject } from '../utils/helper';\n/**\n * Bubble module class\n */\n\nvar Bubble =\n/** @class */\nfunction () {\n  function Bubble(maps) {\n    /**\n     * Bubble Id for current layer\n     */\n    this.id = '';\n    this.maps = maps;\n    this.bubbleCollection = [];\n  } // eslint-disable-next-line valid-jsdoc\n\n  /**\n   * To render bubble\n   *\n   * @private\n   */\n\n\n  Bubble.prototype.renderBubble = function ( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  bubbleSettings, shapeData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group, bubbleID) {\n    var _this = this; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var layerData = layer.layerData;\n    var colorValuePath = bubbleSettings.colorValuePath;\n    var equalValue = !isNullOrUndefined(colorValuePath) ? colorValuePath.indexOf('.') > -1 ? getValueFromObject(shapeData, bubbleSettings.colorValuePath) : shapeData[colorValuePath] : shapeData[colorValuePath];\n    var colorValue = !isNullOrUndefined(colorValuePath) ? colorValuePath.indexOf('.') > -1 ? Number(getValueFromObject(shapeData, bubbleSettings.colorValuePath)) : Number(shapeData[colorValuePath]) : Number(shapeData[colorValuePath]);\n    var bubbleValue = !isNullOrUndefined(bubbleSettings.valuePath) ? bubbleSettings.valuePath.indexOf('.') > -1 ? Number(getValueFromObject(shapeData, bubbleSettings.valuePath)) : Number(shapeData[bubbleSettings.valuePath]) : Number(shapeData[bubbleSettings.valuePath]);\n    var opacity;\n    var bubbleColor;\n\n    if (isNaN(bubbleValue) && isNaN(colorValue) && isNullOrUndefined(equalValue)) {\n      return null;\n    }\n\n    var radius = getRatioOfBubble(bubbleSettings.minRadius, bubbleSettings.maxRadius, bubbleValue, range.min, range.max);\n    var colorMapping = new ColorMapping(this.maps); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var shapeColor = colorMapping.getColorByValue(bubbleSettings.colorMapping, colorValue, equalValue); // eslint-disable-next-line prefer-const\n\n    bubbleColor = Object.prototype.toString.call(shapeColor) === '[object Object]' && !isNullOrUndefined(shapeColor['fill']) ? shapeColor['fill'] : color; // eslint-disable-next-line prefer-const\n\n    opacity = Object.prototype.toString.call(shapeColor) === '[object Object]' && !isNullOrUndefined(shapeColor['opacity']) ? shapeColor['opacity'] : bubbleSettings.opacity;\n    var shapePoints = [[]];\n    this.maps.translateType = 'bubble';\n    var midIndex = 0;\n    var pointsLength = 0;\n    var currentLength = 0;\n\n    for (var i = 0, len = layerData.length; i < len; i++) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var shape = layerData[i];\n      shape = shape['property'];\n      var shapePath = checkPropertyPath(shapeData[layer.shapeDataPath], layer.shapePropertyPath, shape);\n      var shapeDataLayerPathValue = !isNullOrUndefined(shapeData[layer.shapeDataPath]) && isNaN(shapeData[layer.shapeDataPath]) ? shapeData[layer.shapeDataPath].toLowerCase() : shapeData[layer.shapeDataPath];\n      var shapePathValue = !isNullOrUndefined(shape[shapePath]) && isNaN(shape[shapePath]) ? shape[shapePath].toLowerCase() : shape[shapePath];\n\n      if (shapeDataLayerPathValue === shapePathValue && layerData[i].type !== 'LineString') {\n        if (layerData[i]['type'] === 'Point') {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          shapePoints.push(this.getPoints(layerData[i], []));\n        } else if (!layerData[i]['_isMultiPolygon']) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          shapePoints.push(this.getPoints(layerData[i], []));\n          currentLength = shapePoints[shapePoints.length - 1].length;\n\n          if (pointsLength < currentLength) {\n            pointsLength = currentLength;\n            midIndex = shapePoints.length - 1;\n          }\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          var layer_1 = layerData[i];\n\n          for (var j = 0; j < layer_1.length; j++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            shapePoints.push(this.getPoints(layer_1[j], []));\n            currentLength = shapePoints[shapePoints.length - 1].length;\n\n            if (pointsLength < currentLength) {\n              pointsLength = currentLength;\n              midIndex = shapePoints.length - 1;\n            }\n          }\n        }\n      }\n    }\n\n    var projectionType = this.maps.projectionType;\n    var centerY;\n    var eventArgs;\n    var bubbleBorder = {\n      color: bubbleSettings.border.color,\n      opacity: bubbleSettings.border.opacity,\n      width: bubbleSettings.border.width\n    }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var center = findMidPointOfPolygon(shapePoints[midIndex], projectionType, layer.geometryType);\n\n    if (bubbleSettings.visible) {\n      if (!isNullOrUndefined(center)) {\n        centerY = this.maps.projectionType === 'Mercator' ? center['y'] : -center['y'];\n        eventArgs = {\n          cancel: false,\n          name: bubbleRendering,\n          border: bubbleBorder,\n          cx: center['x'],\n          cy: centerY,\n          data: shapeData,\n          fill: bubbleColor,\n          maps: this.maps,\n          radius: radius\n        };\n      } else {\n        var shapePointsLength = shapePoints.length - 1;\n\n        if (shapePoints[shapePointsLength]['x'] && shapePoints[shapePointsLength]['y']) {\n          eventArgs = {\n            cancel: false,\n            name: bubbleRendering,\n            border: bubbleBorder,\n            cx: shapePoints[shapePointsLength]['x'],\n            cy: shapePoints[shapePointsLength]['y'],\n            data: shapeData,\n            fill: bubbleColor,\n            maps: this.maps,\n            radius: radius\n          };\n        } else {\n          return;\n        }\n      }\n\n      this.maps.trigger('bubbleRendering', eventArgs, function (bubbleArgs) {\n        if (eventArgs.cancel) {\n          return;\n        }\n\n        var bubbleElement;\n        eventArgs.border.opacity = isNullOrUndefined(eventArgs.border.opacity) ? opacity : eventArgs.border.opacity;\n\n        if (bubbleSettings.bubbleType === 'Circle') {\n          var circle = new CircleOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, 0, 0, eventArgs.radius, null);\n          bubbleElement = drawCircle(_this.maps, circle, group);\n        } else {\n          var y = _this.maps.projectionType === 'Mercator' ? eventArgs.cy - radius : eventArgs.cy + radius;\n          var rectangle = new RectOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, new Rect(0, 0, radius * 2, radius * 2), 2, 2);\n          eventArgs.cx -= radius;\n          eventArgs.cy = y;\n          bubbleElement = drawRectangle(_this.maps, rectangle, group);\n        }\n\n        maintainSelection(_this.maps.selectedBubbleElementId, _this.maps.bubbleSelectionClass, bubbleElement, 'BubbleselectionMapStyle');\n\n        _this.bubbleCollection.push({\n          LayerIndex: layerIndex,\n          BubbleIndex: bubbleIndex,\n          DataIndex: dataIndex,\n          element: bubbleElement,\n          center: {\n            x: eventArgs.cx,\n            y: eventArgs.cy\n          }\n        }); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n        var translate;\n        var animate = layer.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n\n        if (_this.maps.zoomSettings.zoomFactor > 1 && !isNullOrUndefined(_this.maps.zoomModule)) {\n          translate = getZoomTranslate(_this.maps, layer, animate);\n        } else {\n          translate = getTranslate(_this.maps, layer, animate);\n        } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n        var bubbleDataSource = bubbleSettings.dataSource;\n        var scale = translate['scale'];\n        var transPoint = translate['location'];\n        var position = new MapLocation(_this.maps.isTileMap ? eventArgs.cx : (eventArgs.cx + transPoint.x) * scale, _this.maps.isTileMap ? eventArgs.cy : (eventArgs.cy + transPoint.y) * scale);\n        bubbleElement.setAttribute('transform', 'translate( ' + position.x + ' ' + position.y + ' )');\n        var bubble = bubbleDataSource.length - 1 === dataIndex ? 'bubble' : null;\n\n        if (bubbleSettings.bubbleType === 'Square') {\n          position.x += radius;\n          position.y += radius * (_this.maps.projectionType === 'Mercator' ? 1 : -1);\n        } else {\n          radius = 0;\n        }\n\n        if (bubbleSettings.animationDuration > 0) {\n          elementAnimate(bubbleElement, bubbleSettings.animationDelay, bubbleSettings.animationDuration, position, _this.maps, bubble, radius);\n        }\n      });\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Bubble.prototype.getPoints = function (shape, points) {\n    if (isNullOrUndefined(shape.map)) {\n      points = shape['point'];\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      shape.map(function (current, index) {\n        points.push(new Point(current['point']['x'], current['point']['y']));\n      });\n    }\n\n    return points;\n  }; // eslint-disable-next-line valid-jsdoc\n\n  /**\n   * To check and trigger bubble click event\n   *\n   * @private\n   */\n\n\n  Bubble.prototype.bubbleClick = function (e) {\n    var target = e.target.id;\n\n    if (target.indexOf('_LayerIndex_') === -1) {\n      return;\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var data = this.getbubble(target);\n\n    if (isNullOrUndefined(data)) {\n      return;\n    }\n\n    var eventArgs = {\n      cancel: false,\n      name: bubbleClick,\n      data: data,\n      maps: this.maps,\n      target: target,\n      x: e.clientX,\n      y: e.clientY\n    };\n    this.maps.trigger(bubbleClick, eventArgs);\n  };\n  /**\n   * To get bubble from target id\n   *\n   * @param {string} target - Specifies the target\n   * @returns {object} - Returns the object\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  Bubble.prototype.getbubble = function (target) {\n    var id = target.split('_LayerIndex_');\n    var index = parseInt(id[1].split('_')[0], 10);\n    var layer = this.maps.layers[index]; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    var data;\n\n    if (target.indexOf('_BubbleIndex_') > -1) {\n      var bubbleIndex = parseInt(id[1].split('_BubbleIndex_')[1], 10);\n      var dataIndex = parseInt(id[1].split('_BubbleIndex_')[1].split('_dataIndex_')[1], 10);\n\n      if (!isNaN(bubbleIndex)) {\n        data = layer.bubbleSettings[bubbleIndex].dataSource[dataIndex];\n        return data;\n      }\n    }\n\n    return null;\n  }; // eslint-disable-next-line valid-jsdoc\n\n  /**\n   * To check and trigger bubble move event\n   *\n   * @private\n   */\n\n\n  Bubble.prototype.bubbleMove = function (e) {\n    var target = e.target.id;\n\n    if (target.indexOf('_LayerIndex_') === -1) {\n      return;\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    var data = this.getbubble(target);\n\n    if (isNullOrUndefined(data)) {\n      return;\n    }\n\n    var eventArgs = {\n      cancel: false,\n      name: bubbleMouseMove,\n      data: data,\n      maps: this.maps,\n      target: target,\n      x: e.clientX,\n      y: e.clientY\n    };\n    this.maps.trigger(bubbleMouseMove, eventArgs);\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} - Returns the module name.\n   */\n\n\n  Bubble.prototype.getModuleName = function () {\n    return 'Bubble';\n  };\n  /**\n   * To destroy the bubble.\n   *\n   * @param {Maps} maps - Specifies the instance of the maps.\n   * @returns {void}\n   * @private\n   */\n\n\n  Bubble.prototype.destroy = function (maps) {\n    /**\n     * Destroy method performed here\n     */\n  };\n\n  return Bubble;\n}();\n\nexport { Bubble };","map":{"version":3,"sources":["C:/Users/vinay/Desktop/world-map-dashboard/world-map/node_modules/@syncfusion/ej2-maps/src/maps/layers/bubble.js"],"names":["ColorMapping","bubbleRendering","bubbleClick","bubbleMouseMove","isNullOrUndefined","CircleOption","MapLocation","findMidPointOfPolygon","Point","drawCircle","elementAnimate","getTranslate","RectOption","Rect","drawRectangle","checkPropertyPath","getZoomTranslate","getRatioOfBubble","maintainSelection","getValueFromObject","Bubble","maps","id","bubbleCollection","prototype","renderBubble","bubbleSettings","shapeData","color","range","bubbleIndex","dataIndex","layerIndex","layer","group","bubbleID","_this","layerData","colorValuePath","equalValue","indexOf","colorValue","Number","bubbleValue","valuePath","opacity","bubbleColor","isNaN","radius","minRadius","maxRadius","min","max","colorMapping","shapeColor","getColorByValue","Object","toString","call","shapePoints","translateType","midIndex","pointsLength","currentLength","i","len","length","shape","shapePath","shapeDataPath","shapePropertyPath","shapeDataLayerPathValue","toLowerCase","shapePathValue","type","push","getPoints","layer_1","j","projectionType","centerY","eventArgs","bubbleBorder","border","width","center","geometryType","visible","cancel","name","cx","cy","data","fill","shapePointsLength","trigger","bubbleArgs","bubbleElement","bubbleType","circle","y","rectangle","selectedBubbleElementId","bubbleSelectionClass","LayerIndex","BubbleIndex","DataIndex","element","x","translate","animate","animationDuration","zoomModule","zoomSettings","zoomFactor","bubbleDataSource","dataSource","scale","transPoint","position","isTileMap","setAttribute","bubble","animationDelay","points","map","current","index","e","target","getbubble","clientX","clientY","split","parseInt","layers","bubbleMove","getModuleName","destroy"],"mappings":"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","sourcesContent":["import { ColorMapping, bubbleRendering } from '../index';\nimport { bubbleClick, bubbleMouseMove } from '../index';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CircleOption, MapLocation, findMidPointOfPolygon, Point, drawCircle, elementAnimate, getTranslate } from '../utils/helper';\nimport { RectOption, Rect, drawRectangle, checkPropertyPath, getZoomTranslate, getRatioOfBubble, maintainSelection, getValueFromObject } from '../utils/helper';\n/**\n * Bubble module class\n */\nvar Bubble = /** @class */ (function () {\n    function Bubble(maps) {\n        /**\n         * Bubble Id for current layer\n         */\n        this.id = '';\n        this.maps = maps;\n        this.bubbleCollection = [];\n    }\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * To render bubble\n     *\n     * @private\n     */\n    Bubble.prototype.renderBubble = function (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    bubbleSettings, shapeData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group, bubbleID) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var layerData = layer.layerData;\n        var colorValuePath = bubbleSettings.colorValuePath;\n        var equalValue = (!isNullOrUndefined(colorValuePath)) ? ((colorValuePath.indexOf('.') > -1) ?\n            (getValueFromObject(shapeData, bubbleSettings.colorValuePath)) : shapeData[colorValuePath]) : shapeData[colorValuePath];\n        var colorValue = (!isNullOrUndefined(colorValuePath)) ? ((colorValuePath.indexOf('.') > -1) ?\n            Number(getValueFromObject(shapeData, bubbleSettings.colorValuePath)) : Number(shapeData[colorValuePath])) :\n            Number(shapeData[colorValuePath]);\n        var bubbleValue = (!isNullOrUndefined(bubbleSettings.valuePath)) ? ((bubbleSettings.valuePath.indexOf('.') > -1) ?\n            Number(getValueFromObject(shapeData, bubbleSettings.valuePath)) : Number(shapeData[bubbleSettings.valuePath])) :\n            Number(shapeData[bubbleSettings.valuePath]);\n        var opacity;\n        var bubbleColor;\n        if (isNaN(bubbleValue) && isNaN(colorValue) && isNullOrUndefined(equalValue)) {\n            return null;\n        }\n        var radius = getRatioOfBubble(bubbleSettings.minRadius, bubbleSettings.maxRadius, bubbleValue, range.min, range.max);\n        var colorMapping = new ColorMapping(this.maps);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var shapeColor = colorMapping.getColorByValue(bubbleSettings.colorMapping, colorValue, equalValue);\n        // eslint-disable-next-line prefer-const\n        bubbleColor = (Object.prototype.toString.call(shapeColor) === '[object Object]' &&\n            !isNullOrUndefined(shapeColor['fill'])) ? shapeColor['fill'] : color;\n        // eslint-disable-next-line prefer-const\n        opacity = (Object.prototype.toString.call(shapeColor) === '[object Object]' &&\n            !isNullOrUndefined(shapeColor['opacity'])) ? shapeColor['opacity'] : bubbleSettings.opacity;\n        var shapePoints = [[]];\n        this.maps.translateType = 'bubble';\n        var midIndex = 0;\n        var pointsLength = 0;\n        var currentLength = 0;\n        for (var i = 0, len = layerData.length; i < len; i++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var shape = layerData[i];\n            shape = shape['property'];\n            var shapePath = checkPropertyPath(shapeData[layer.shapeDataPath], layer.shapePropertyPath, shape);\n            var shapeDataLayerPathValue = !isNullOrUndefined(shapeData[layer.shapeDataPath]) &&\n                isNaN(shapeData[layer.shapeDataPath]) ? shapeData[layer.shapeDataPath].toLowerCase() : shapeData[layer.shapeDataPath];\n            var shapePathValue = !isNullOrUndefined(shape[shapePath]) && isNaN(shape[shapePath])\n                ? shape[shapePath].toLowerCase() : shape[shapePath];\n            if (shapeDataLayerPathValue === shapePathValue && layerData[i].type !== 'LineString') {\n                if (layerData[i]['type'] === 'Point') {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    shapePoints.push(this.getPoints(layerData[i], []));\n                }\n                else if (!layerData[i]['_isMultiPolygon']) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    shapePoints.push(this.getPoints(layerData[i], []));\n                    currentLength = shapePoints[shapePoints.length - 1].length;\n                    if (pointsLength < currentLength) {\n                        pointsLength = currentLength;\n                        midIndex = shapePoints.length - 1;\n                    }\n                }\n                else {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    var layer_1 = layerData[i];\n                    for (var j = 0; j < layer_1.length; j++) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        shapePoints.push(this.getPoints(layer_1[j], []));\n                        currentLength = shapePoints[shapePoints.length - 1].length;\n                        if (pointsLength < currentLength) {\n                            pointsLength = currentLength;\n                            midIndex = shapePoints.length - 1;\n                        }\n                    }\n                }\n            }\n        }\n        var projectionType = this.maps.projectionType;\n        var centerY;\n        var eventArgs;\n        var bubbleBorder = {\n            color: bubbleSettings.border.color, opacity: bubbleSettings.border.opacity,\n            width: bubbleSettings.border.width\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var center = findMidPointOfPolygon(shapePoints[midIndex], projectionType, layer.geometryType);\n        if (bubbleSettings.visible) {\n            if (!isNullOrUndefined(center)) {\n                centerY = this.maps.projectionType === 'Mercator' ? center['y'] : (-center['y']);\n                eventArgs = {\n                    cancel: false, name: bubbleRendering, border: bubbleBorder,\n                    cx: center['x'], cy: centerY, data: shapeData, fill: bubbleColor,\n                    maps: this.maps, radius: radius\n                };\n            }\n            else {\n                var shapePointsLength = shapePoints.length - 1;\n                if (shapePoints[shapePointsLength]['x'] && shapePoints[shapePointsLength]['y']) {\n                    eventArgs = {\n                        cancel: false, name: bubbleRendering, border: bubbleBorder,\n                        cx: shapePoints[shapePointsLength]['x'], cy: shapePoints[shapePointsLength]['y'],\n                        data: shapeData, fill: bubbleColor, maps: this.maps,\n                        radius: radius\n                    };\n                }\n                else {\n                    return;\n                }\n            }\n            this.maps.trigger('bubbleRendering', eventArgs, function (bubbleArgs) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                var bubbleElement;\n                eventArgs.border.opacity = isNullOrUndefined(eventArgs.border.opacity) ? opacity : eventArgs.border.opacity;\n                if (bubbleSettings.bubbleType === 'Circle') {\n                    var circle = new CircleOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, 0, 0, eventArgs.radius, null);\n                    bubbleElement = drawCircle(_this.maps, circle, group);\n                }\n                else {\n                    var y = _this.maps.projectionType === 'Mercator' ? (eventArgs.cy - radius) : (eventArgs.cy + radius);\n                    var rectangle = new RectOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, new Rect(0, 0, radius * 2, radius * 2), 2, 2);\n                    eventArgs.cx -= radius;\n                    eventArgs.cy = y;\n                    bubbleElement = drawRectangle(_this.maps, rectangle, group);\n                }\n                maintainSelection(_this.maps.selectedBubbleElementId, _this.maps.bubbleSelectionClass, bubbleElement, 'BubbleselectionMapStyle');\n                _this.bubbleCollection.push({\n                    LayerIndex: layerIndex,\n                    BubbleIndex: bubbleIndex,\n                    DataIndex: dataIndex,\n                    element: bubbleElement,\n                    center: { x: eventArgs.cx, y: eventArgs.cy }\n                });\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var translate;\n                var animate = layer.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n                if (_this.maps.zoomSettings.zoomFactor > 1 && !isNullOrUndefined(_this.maps.zoomModule)) {\n                    translate = getZoomTranslate(_this.maps, layer, animate);\n                }\n                else {\n                    translate = getTranslate(_this.maps, layer, animate);\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var bubbleDataSource = bubbleSettings.dataSource;\n                var scale = translate['scale'];\n                var transPoint = translate['location'];\n                var position = new MapLocation((_this.maps.isTileMap ? (eventArgs.cx) : ((eventArgs.cx + transPoint.x) * scale)), (_this.maps.isTileMap ? (eventArgs.cy) : ((eventArgs.cy + transPoint.y) * scale)));\n                bubbleElement.setAttribute('transform', 'translate( ' + (position.x) + ' ' + (position.y) + ' )');\n                var bubble = (bubbleDataSource.length - 1) === dataIndex ? 'bubble' : null;\n                if (bubbleSettings.bubbleType === 'Square') {\n                    position.x += radius;\n                    position.y += radius * (_this.maps.projectionType === 'Mercator' ? 1 : -1);\n                }\n                else {\n                    radius = 0;\n                }\n                if (bubbleSettings.animationDuration > 0) {\n                    elementAnimate(bubbleElement, bubbleSettings.animationDelay, bubbleSettings.animationDuration, position, _this.maps, bubble, radius);\n                }\n            });\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Bubble.prototype.getPoints = function (shape, points) {\n        if (isNullOrUndefined(shape.map)) {\n            points = shape['point'];\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            shape.map(function (current, index) {\n                points.push(new Point(current['point']['x'], current['point']['y']));\n            });\n        }\n        return points;\n    };\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * To check and trigger bubble click event\n     *\n     * @private\n     */\n    Bubble.prototype.bubbleClick = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data = this.getbubble(target);\n        if (isNullOrUndefined(data)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: bubbleClick, data: data, maps: this.maps,\n            target: target, x: e.clientX, y: e.clientY\n        };\n        this.maps.trigger(bubbleClick, eventArgs);\n    };\n    /**\n     * To get bubble from target id\n     *\n     * @param {string} target - Specifies the target\n     * @returns {object} - Returns the object\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Bubble.prototype.getbubble = function (target) {\n        var id = target.split('_LayerIndex_');\n        var index = parseInt(id[1].split('_')[0], 10);\n        var layer = this.maps.layers[index];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data;\n        if (target.indexOf('_BubbleIndex_') > -1) {\n            var bubbleIndex = parseInt(id[1].split('_BubbleIndex_')[1], 10);\n            var dataIndex = parseInt(id[1].split('_BubbleIndex_')[1].split('_dataIndex_')[1], 10);\n            if (!isNaN(bubbleIndex)) {\n                data = layer.bubbleSettings[bubbleIndex].dataSource[dataIndex];\n                return data;\n            }\n        }\n        return null;\n    };\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * To check and trigger bubble move event\n     *\n     * @private\n     */\n    Bubble.prototype.bubbleMove = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data = this.getbubble(target);\n        if (isNullOrUndefined(data)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: bubbleMouseMove, data: data, maps: this.maps,\n            target: target, x: e.clientX, y: e.clientY\n        };\n        this.maps.trigger(bubbleMouseMove, eventArgs);\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} - Returns the module name.\n     */\n    Bubble.prototype.getModuleName = function () {\n        return 'Bubble';\n    };\n    /**\n     * To destroy the bubble.\n     *\n     * @param {Maps} maps - Specifies the instance of the maps.\n     * @returns {void}\n     * @private\n     */\n    Bubble.prototype.destroy = function (maps) {\n        /**\n         * Destroy method performed here\n         */\n    };\n    return Bubble;\n}());\nexport { Bubble };\n"]},"metadata":{},"sourceType":"module"}